!function(modules){this.webpackChunk=function webpackChunkCallback(chunkIds,moreModules){for(var moduleId in moreModules)modules[moduleId]=moreModules[moduleId];for(;chunkIds.length;)installedChunks[chunkIds.pop()]=1};var installedModules={},installedChunks={0:1};function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.l=!0,module.exports}__webpack_require__.e=function requireEnsure(){return Promise.resolve()},__webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.d=function(exports,name,getter){__webpack_require__.o(exports,name)||Object.defineProperty(exports,name,{enumerable:!0,get:getter})},__webpack_require__.r=function(exports){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(exports,"__esModule",{value:!0})},__webpack_require__.t=function(value,mode){if(1&mode&&(value=__webpack_require__(value)),8&mode)return value;if(4&mode&&"object"==typeof value&&value&&value.__esModule)return value;var ns=Object.create(null);if(__webpack_require__.r(ns),Object.defineProperty(ns,"default",{enumerable:!0,value:value}),2&mode&&"string"!=typeof value)for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module.default}:function getModuleExports(){return module};return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s="8Z8O")}({"8Z8O":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var extendStatics,platform=__webpack_require__("MNsG"),__extends=(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)});function _encode(ch){return"%"+ch.charCodeAt(0).toString(16).toUpperCase()}function encodeURIComponent2(str){return encodeURIComponent(str).replace(/[!'()*]/g,_encode)}function encodeNoop(str){return str.replace(/[#?]/,_encode)}var _schemePattern=/^\w[\w\d+.-]*$/,_singleSlashStart=/^\//,_doubleSlashStart=/^\/\//;var _regexp=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,_driveLetterPath=/^\/[a-zA-Z]:/,_upperCaseDrive=/^(\/)?([A-Z]:)/,_driveLetter=/^[a-zA-Z]:/,uri_URI=function(){function URI(schemeOrData,authority,path,query,fragment){"object"==typeof schemeOrData?(this.scheme=schemeOrData.scheme||"",this.authority=schemeOrData.authority||"",this.path=schemeOrData.path||"",this.query=schemeOrData.query||"",this.fragment=schemeOrData.fragment||""):(this.scheme=schemeOrData||"",this.authority=authority||"",this.path=path||"",this.query=query||"",this.fragment=fragment||"",function _validateUri(ret){if(ret.scheme&&!_schemePattern.test(ret.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(ret.path)if(ret.authority){if(!_singleSlashStart.test(ret.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(_doubleSlashStart.test(ret.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}(this))}return URI.isUri=function(thing){return thing instanceof URI||!!thing&&("string"==typeof thing.authority&&"string"==typeof thing.fragment&&"string"==typeof thing.path&&"string"==typeof thing.query&&"string"==typeof thing.scheme)},Object.defineProperty(URI.prototype,"fsPath",{get:function(){return _makeFsPath(this)},enumerable:!0,configurable:!0}),URI.prototype.with=function(change){if(!change)return this;var scheme=change.scheme,authority=change.authority,path=change.path,query=change.query,fragment=change.fragment;return void 0===scheme?scheme=this.scheme:null===scheme&&(scheme=""),void 0===authority?authority=this.authority:null===authority&&(authority=""),void 0===path?path=this.path:null===path&&(path=""),void 0===query?query=this.query:null===query&&(query=""),void 0===fragment?fragment=this.fragment:null===fragment&&(fragment=""),scheme===this.scheme&&authority===this.authority&&path===this.path&&query===this.query&&fragment===this.fragment?this:new _URI(scheme,authority,path,query,fragment)},URI.parse=function(value){var match=_regexp.exec(value);return match?new _URI(match[2]||"",decodeURIComponent(match[4]||""),decodeURIComponent(match[5]||""),decodeURIComponent(match[7]||""),decodeURIComponent(match[9]||"")):new _URI("","","","","")},URI.file=function(path){var authority="";if(platform.c&&(path=path.replace(/\\/g,"/")),"/"===path[0]&&"/"===path[1]){var idx=path.indexOf("/",2);-1===idx?(authority=path.substring(2),path="/"):(authority=path.substring(2,idx),path=path.substring(idx)||"/")}return(_driveLetter.test(path)||"/"!==path[0])&&(path="/"+path),new _URI("file",authority,path,"","")},URI.from=function(components){return new _URI(components.scheme,components.authority,components.path,components.query,components.fragment)},URI.prototype.toString=function(skipEncoding){return void 0===skipEncoding&&(skipEncoding=!1),_asFormatted(this,skipEncoding)},URI.prototype.toJSON=function(){var res={$mid:1,fsPath:this.fsPath,external:this.toString()};return this.path&&(res.path=this.path),this.scheme&&(res.scheme=this.scheme),this.authority&&(res.authority=this.authority),this.query&&(res.query=this.query),this.fragment&&(res.fragment=this.fragment),res},URI.revive=function(data){if(data){if(data instanceof URI)return data;var result=new _URI(data);return result._fsPath=data.fsPath,result._formatted=data.external,result}return data},URI}(),common_uri=uri_URI,_URI=function(_super){function _URI(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this._formatted=null,_this._fsPath=null,_this}return __extends(_URI,_super),Object.defineProperty(_URI.prototype,"fsPath",{get:function(){return this._fsPath||(this._fsPath=_makeFsPath(this)),this._fsPath},enumerable:!0,configurable:!0}),_URI.prototype.toString=function(skipEncoding){return void 0===skipEncoding&&(skipEncoding=!1),skipEncoding?_asFormatted(this,!0):(this._formatted||(this._formatted=_asFormatted(this,!1)),this._formatted)},_URI}(uri_URI);function _makeFsPath(uri){var value;return value=uri.authority&&uri.path&&"file"===uri.scheme?"//"+uri.authority+uri.path:_driveLetterPath.test(uri.path)?uri.path[1].toLowerCase()+uri.path.substr(2):uri.path,platform.c&&(value=value.replace(/\//g,"\\")),value}function _asFormatted(uri,skipEncoding){var encoder=skipEncoding?encodeNoop:encodeURIComponent2,parts=[],scheme=uri.scheme,authority=uri.authority,path=uri.path,query=uri.query,fragment=uri.fragment;if(scheme&&parts.push(scheme,":"),(authority||"file"===scheme)&&parts.push("//"),authority){if(-1!==(idx=authority.indexOf("@"))){var userinfo=authority.substr(0,idx);authority=authority.substr(idx+1),-1===(idx=userinfo.indexOf(":"))?parts.push(encoder(userinfo)):parts.push(encoder(userinfo.substr(0,idx)),":",encoder(userinfo.substr(idx+1))),parts.push("@")}-1===(idx=(authority=authority.toLowerCase()).indexOf(":"))?parts.push(encoder(authority)):parts.push(encoder(authority.substr(0,idx)),authority.substr(idx))}if(path){var m=_upperCaseDrive.exec(path);m&&(path=m[1]?"/"+m[2].toLowerCase()+path.substr(3):m[2].toLowerCase()+path.substr(2));for(var lastIdx=0;;){var idx;if(-1===(idx=path.indexOf("/",lastIdx))){parts.push(encoder(path.substring(lastIdx)));break}parts.push(encoder(path.substring(lastIdx,idx)),"/"),lastIdx=idx+1}}return query&&parts.push("?",encoder(query)),fragment&&parts.push("#",encoder(fragment)),parts.join("")}var winjs_base=__webpack_require__("VMIq"),Position=function(){function Position(lineNumber,column){this.lineNumber=lineNumber,this.column=column}return Position.prototype.equals=function(other){return Position.equals(this,other)},Position.equals=function(a,b){return!a&&!b||!!a&&!!b&&a.lineNumber===b.lineNumber&&a.column===b.column},Position.prototype.isBefore=function(other){return Position.isBefore(this,other)},Position.isBefore=function(a,b){return a.lineNumber<b.lineNumber||!(b.lineNumber<a.lineNumber)&&a.column<b.column},Position.prototype.isBeforeOrEqual=function(other){return Position.isBeforeOrEqual(this,other)},Position.isBeforeOrEqual=function(a,b){return a.lineNumber<b.lineNumber||!(b.lineNumber<a.lineNumber)&&a.column<=b.column},Position.compare=function(a,b){var aLineNumber=0|a.lineNumber,bLineNumber=0|b.lineNumber;return aLineNumber===bLineNumber?(0|a.column)-(0|b.column):aLineNumber-bLineNumber},Position.prototype.clone=function(){return new Position(this.lineNumber,this.column)},Position.prototype.toString=function(){return"("+this.lineNumber+","+this.column+")"},Position.lift=function(pos){return new Position(pos.lineNumber,pos.column)},Position.isIPosition=function(obj){return obj&&"number"==typeof obj.lineNumber&&"number"==typeof obj.column},Position}(),range_Range=function(){function Range(startLineNumber,startColumn,endLineNumber,endColumn){startLineNumber>endLineNumber||startLineNumber===endLineNumber&&startColumn>endColumn?(this.startLineNumber=endLineNumber,this.startColumn=endColumn,this.endLineNumber=startLineNumber,this.endColumn=startColumn):(this.startLineNumber=startLineNumber,this.startColumn=startColumn,this.endLineNumber=endLineNumber,this.endColumn=endColumn)}return Range.prototype.isEmpty=function(){return Range.isEmpty(this)},Range.isEmpty=function(range){return range.startLineNumber===range.endLineNumber&&range.startColumn===range.endColumn},Range.prototype.containsPosition=function(position){return Range.containsPosition(this,position)},Range.containsPosition=function(range,position){return!(position.lineNumber<range.startLineNumber||position.lineNumber>range.endLineNumber)&&(!(position.lineNumber===range.startLineNumber&&position.column<range.startColumn)&&!(position.lineNumber===range.endLineNumber&&position.column>range.endColumn))},Range.prototype.containsRange=function(range){return Range.containsRange(this,range)},Range.containsRange=function(range,otherRange){return!(otherRange.startLineNumber<range.startLineNumber||otherRange.endLineNumber<range.startLineNumber)&&(!(otherRange.startLineNumber>range.endLineNumber||otherRange.endLineNumber>range.endLineNumber)&&(!(otherRange.startLineNumber===range.startLineNumber&&otherRange.startColumn<range.startColumn)&&!(otherRange.endLineNumber===range.endLineNumber&&otherRange.endColumn>range.endColumn)))},Range.prototype.plusRange=function(range){return Range.plusRange(this,range)},Range.plusRange=function(a,b){var startLineNumber,startColumn,endLineNumber,endColumn;return b.startLineNumber<a.startLineNumber?(startLineNumber=b.startLineNumber,startColumn=b.startColumn):b.startLineNumber===a.startLineNumber?(startLineNumber=b.startLineNumber,startColumn=Math.min(b.startColumn,a.startColumn)):(startLineNumber=a.startLineNumber,startColumn=a.startColumn),b.endLineNumber>a.endLineNumber?(endLineNumber=b.endLineNumber,endColumn=b.endColumn):b.endLineNumber===a.endLineNumber?(endLineNumber=b.endLineNumber,endColumn=Math.max(b.endColumn,a.endColumn)):(endLineNumber=a.endLineNumber,endColumn=a.endColumn),new Range(startLineNumber,startColumn,endLineNumber,endColumn)},Range.prototype.intersectRanges=function(range){return Range.intersectRanges(this,range)},Range.intersectRanges=function(a,b){var resultStartLineNumber=a.startLineNumber,resultStartColumn=a.startColumn,resultEndLineNumber=a.endLineNumber,resultEndColumn=a.endColumn,otherStartLineNumber=b.startLineNumber,otherStartColumn=b.startColumn,otherEndLineNumber=b.endLineNumber,otherEndColumn=b.endColumn;return resultStartLineNumber<otherStartLineNumber?(resultStartLineNumber=otherStartLineNumber,resultStartColumn=otherStartColumn):resultStartLineNumber===otherStartLineNumber&&(resultStartColumn=Math.max(resultStartColumn,otherStartColumn)),resultEndLineNumber>otherEndLineNumber?(resultEndLineNumber=otherEndLineNumber,resultEndColumn=otherEndColumn):resultEndLineNumber===otherEndLineNumber&&(resultEndColumn=Math.min(resultEndColumn,otherEndColumn)),resultStartLineNumber>resultEndLineNumber||resultStartLineNumber===resultEndLineNumber&&resultStartColumn>resultEndColumn?null:new Range(resultStartLineNumber,resultStartColumn,resultEndLineNumber,resultEndColumn)},Range.prototype.equalsRange=function(other){return Range.equalsRange(this,other)},Range.equalsRange=function(a,b){return!!a&&!!b&&a.startLineNumber===b.startLineNumber&&a.startColumn===b.startColumn&&a.endLineNumber===b.endLineNumber&&a.endColumn===b.endColumn},Range.prototype.getEndPosition=function(){return new Position(this.endLineNumber,this.endColumn)},Range.prototype.getStartPosition=function(){return new Position(this.startLineNumber,this.startColumn)},Range.prototype.toString=function(){return"["+this.startLineNumber+","+this.startColumn+" -> "+this.endLineNumber+","+this.endColumn+"]"},Range.prototype.setEndPosition=function(endLineNumber,endColumn){return new Range(this.startLineNumber,this.startColumn,endLineNumber,endColumn)},Range.prototype.setStartPosition=function(startLineNumber,startColumn){return new Range(startLineNumber,startColumn,this.endLineNumber,this.endColumn)},Range.prototype.collapseToStart=function(){return Range.collapseToStart(this)},Range.collapseToStart=function(range){return new Range(range.startLineNumber,range.startColumn,range.startLineNumber,range.startColumn)},Range.fromPositions=function(start,end){return void 0===end&&(end=start),new Range(start.lineNumber,start.column,end.lineNumber,end.column)},Range.lift=function(range){return range?new Range(range.startLineNumber,range.startColumn,range.endLineNumber,range.endColumn):null},Range.isIRange=function(obj){return obj&&"number"==typeof obj.startLineNumber&&"number"==typeof obj.startColumn&&"number"==typeof obj.endLineNumber&&"number"==typeof obj.endColumn},Range.areIntersectingOrTouching=function(a,b){return!(a.endLineNumber<b.startLineNumber||a.endLineNumber===b.startLineNumber&&a.endColumn<b.startColumn)&&!(b.endLineNumber<a.startLineNumber||b.endLineNumber===a.startLineNumber&&b.endColumn<a.startColumn)},Range.compareRangesUsingStarts=function(a,b){var aStartLineNumber=0|a.startLineNumber,bStartLineNumber=0|b.startLineNumber;if(aStartLineNumber===bStartLineNumber){var aStartColumn=0|a.startColumn,bStartColumn=0|b.startColumn;if(aStartColumn===bStartColumn){var aEndLineNumber=0|a.endLineNumber,bEndLineNumber=0|b.endLineNumber;return aEndLineNumber===bEndLineNumber?(0|a.endColumn)-(0|b.endColumn):aEndLineNumber-bEndLineNumber}return aStartColumn-bStartColumn}return aStartLineNumber-bStartLineNumber},Range.compareRangesUsingEnds=function(a,b){return a.endLineNumber===b.endLineNumber?a.endColumn===b.endColumn?a.startLineNumber===b.startLineNumber?a.startColumn-b.startColumn:a.startLineNumber-b.startLineNumber:a.endColumn-b.endColumn:a.endLineNumber-b.endLineNumber},Range.spansMultipleLines=function(range){return range.endLineNumber>range.startLineNumber},Range}(),DiffChange=function(){function DiffChange(originalStart,originalLength,modifiedStart,modifiedLength){this.originalStart=originalStart,this.originalLength=originalLength,this.modifiedStart=modifiedStart,this.modifiedLength=modifiedLength}return DiffChange.prototype.getOriginalEnd=function(){return this.originalStart+this.originalLength},DiffChange.prototype.getModifiedEnd=function(){return this.modifiedStart+this.modifiedLength},DiffChange}();function createStringSequence(a){return{getLength:function(){return a.length},getElementHash:function(pos){return a[pos]}}}function stringDiff(original,modified,pretty){return new diff_LcsDiff(createStringSequence(original),createStringSequence(modified)).ComputeDiff(pretty)}var Debug=function(){function Debug(){}return Debug.Assert=function(condition,message){if(!condition)throw new Error(message)},Debug}(),MyArray=function(){function MyArray(){}return MyArray.Copy=function(sourceArray,sourceIndex,destinationArray,destinationIndex,length){for(var i=0;i<length;i++)destinationArray[destinationIndex+i]=sourceArray[sourceIndex+i]},MyArray}(),diff_DiffChangeHelper=function(){function DiffChangeHelper(){this.m_changes=[],this.m_originalStart=Number.MAX_VALUE,this.m_modifiedStart=Number.MAX_VALUE,this.m_originalCount=0,this.m_modifiedCount=0}return DiffChangeHelper.prototype.MarkNextChange=function(){(this.m_originalCount>0||this.m_modifiedCount>0)&&this.m_changes.push(new DiffChange(this.m_originalStart,this.m_originalCount,this.m_modifiedStart,this.m_modifiedCount)),this.m_originalCount=0,this.m_modifiedCount=0,this.m_originalStart=Number.MAX_VALUE,this.m_modifiedStart=Number.MAX_VALUE},DiffChangeHelper.prototype.AddOriginalElement=function(originalIndex,modifiedIndex){this.m_originalStart=Math.min(this.m_originalStart,originalIndex),this.m_modifiedStart=Math.min(this.m_modifiedStart,modifiedIndex),this.m_originalCount++},DiffChangeHelper.prototype.AddModifiedElement=function(originalIndex,modifiedIndex){this.m_originalStart=Math.min(this.m_originalStart,originalIndex),this.m_modifiedStart=Math.min(this.m_modifiedStart,modifiedIndex),this.m_modifiedCount++},DiffChangeHelper.prototype.getChanges=function(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes},DiffChangeHelper.prototype.getReverseChanges=function(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes.reverse(),this.m_changes},DiffChangeHelper}(),diff_hasOwnProperty=Object.prototype.hasOwnProperty,diff_LcsDiff=function(){function LcsDiff(originalSequence,newSequence,continueProcessingPredicate){void 0===continueProcessingPredicate&&(continueProcessingPredicate=null),this.OriginalSequence=originalSequence,this.ModifiedSequence=newSequence,this.ContinueProcessingPredicate=continueProcessingPredicate,this.m_originalIds=[],this.m_modifiedIds=[],this.m_forwardHistory=[],this.m_reverseHistory=[],this.ComputeUniqueIdentifiers()}return LcsDiff.prototype.ComputeUniqueIdentifiers=function(){var originalSequenceLength=this.OriginalSequence.getLength(),modifiedSequenceLength=this.ModifiedSequence.getLength();this.m_originalIds=new Array(originalSequenceLength),this.m_modifiedIds=new Array(modifiedSequenceLength);var i,hashTable={},currentUniqueId=1;for(i=0;i<originalSequenceLength;i++){var originalElementHash=this.OriginalSequence.getElementHash(i);diff_hasOwnProperty.call(hashTable,originalElementHash)?this.m_originalIds[i]=hashTable[originalElementHash]:(this.m_originalIds[i]=currentUniqueId++,hashTable[originalElementHash]=this.m_originalIds[i])}for(i=0;i<modifiedSequenceLength;i++){var modifiedElementHash=this.ModifiedSequence.getElementHash(i);diff_hasOwnProperty.call(hashTable,modifiedElementHash)?this.m_modifiedIds[i]=hashTable[modifiedElementHash]:(this.m_modifiedIds[i]=currentUniqueId++,hashTable[modifiedElementHash]=this.m_modifiedIds[i])}},LcsDiff.prototype.ElementsAreEqual=function(originalIndex,newIndex){return this.m_originalIds[originalIndex]===this.m_modifiedIds[newIndex]},LcsDiff.prototype.OriginalElementsAreEqual=function(index1,index2){return this.m_originalIds[index1]===this.m_originalIds[index2]},LcsDiff.prototype.ModifiedElementsAreEqual=function(index1,index2){return this.m_modifiedIds[index1]===this.m_modifiedIds[index2]},LcsDiff.prototype.ComputeDiff=function(pretty){return this._ComputeDiff(0,this.OriginalSequence.getLength()-1,0,this.ModifiedSequence.getLength()-1,pretty)},LcsDiff.prototype._ComputeDiff=function(originalStart,originalEnd,modifiedStart,modifiedEnd,pretty){var changes=this.ComputeDiffRecursive(originalStart,originalEnd,modifiedStart,modifiedEnd,[!1]);return pretty?this.ShiftChanges(changes):changes},LcsDiff.prototype.ComputeDiffRecursive=function(originalStart,originalEnd,modifiedStart,modifiedEnd,quitEarlyArr){for(quitEarlyArr[0]=!1;originalStart<=originalEnd&&modifiedStart<=modifiedEnd&&this.ElementsAreEqual(originalStart,modifiedStart);)originalStart++,modifiedStart++;for(;originalEnd>=originalStart&&modifiedEnd>=modifiedStart&&this.ElementsAreEqual(originalEnd,modifiedEnd);)originalEnd--,modifiedEnd--;if(originalStart>originalEnd||modifiedStart>modifiedEnd){var changes=void 0;return modifiedStart<=modifiedEnd?(Debug.Assert(originalStart===originalEnd+1,"originalStart should only be one more than originalEnd"),changes=[new DiffChange(originalStart,0,modifiedStart,modifiedEnd-modifiedStart+1)]):originalStart<=originalEnd?(Debug.Assert(modifiedStart===modifiedEnd+1,"modifiedStart should only be one more than modifiedEnd"),changes=[new DiffChange(originalStart,originalEnd-originalStart+1,modifiedStart,0)]):(Debug.Assert(originalStart===originalEnd+1,"originalStart should only be one more than originalEnd"),Debug.Assert(modifiedStart===modifiedEnd+1,"modifiedStart should only be one more than modifiedEnd"),changes=[]),changes}var midOriginalArr=[0],midModifiedArr=[0],result=this.ComputeRecursionPoint(originalStart,originalEnd,modifiedStart,modifiedEnd,midOriginalArr,midModifiedArr,quitEarlyArr),midOriginal=midOriginalArr[0],midModified=midModifiedArr[0];if(null!==result)return result;if(!quitEarlyArr[0]){var leftChanges=this.ComputeDiffRecursive(originalStart,midOriginal,modifiedStart,midModified,quitEarlyArr),rightChanges=[];return rightChanges=quitEarlyArr[0]?[new DiffChange(midOriginal+1,originalEnd-(midOriginal+1)+1,midModified+1,modifiedEnd-(midModified+1)+1)]:this.ComputeDiffRecursive(midOriginal+1,originalEnd,midModified+1,modifiedEnd,quitEarlyArr),this.ConcatenateChanges(leftChanges,rightChanges)}return[new DiffChange(originalStart,originalEnd-originalStart+1,modifiedStart,modifiedEnd-modifiedStart+1)]},LcsDiff.prototype.WALKTRACE=function(diagonalForwardBase,diagonalForwardStart,diagonalForwardEnd,diagonalForwardOffset,diagonalReverseBase,diagonalReverseStart,diagonalReverseEnd,diagonalReverseOffset,forwardPoints,reversePoints,originalIndex,originalEnd,midOriginalArr,modifiedIndex,modifiedEnd,midModifiedArr,deltaIsEven,quitEarlyArr){var forwardChanges,diagonal,reverseChanges=null,changeHelper=new diff_DiffChangeHelper,diagonalMin=diagonalForwardStart,diagonalMax=diagonalForwardEnd,diagonalRelative=midOriginalArr[0]-midModifiedArr[0]-diagonalForwardOffset,lastOriginalIndex=Number.MIN_VALUE,historyIndex=this.m_forwardHistory.length-1;do{(diagonal=diagonalRelative+diagonalForwardBase)===diagonalMin||diagonal<diagonalMax&&forwardPoints[diagonal-1]<forwardPoints[diagonal+1]?(modifiedIndex=(originalIndex=forwardPoints[diagonal+1])-diagonalRelative-diagonalForwardOffset,originalIndex<lastOriginalIndex&&changeHelper.MarkNextChange(),lastOriginalIndex=originalIndex,changeHelper.AddModifiedElement(originalIndex+1,modifiedIndex),diagonalRelative=diagonal+1-diagonalForwardBase):(modifiedIndex=(originalIndex=forwardPoints[diagonal-1]+1)-diagonalRelative-diagonalForwardOffset,originalIndex<lastOriginalIndex&&changeHelper.MarkNextChange(),lastOriginalIndex=originalIndex-1,changeHelper.AddOriginalElement(originalIndex,modifiedIndex+1),diagonalRelative=diagonal-1-diagonalForwardBase),historyIndex>=0&&(diagonalForwardBase=(forwardPoints=this.m_forwardHistory[historyIndex])[0],diagonalMin=1,diagonalMax=forwardPoints.length-1)}while(--historyIndex>=-1);if(forwardChanges=changeHelper.getReverseChanges(),quitEarlyArr[0]){var originalStartPoint=midOriginalArr[0]+1,modifiedStartPoint=midModifiedArr[0]+1;if(null!==forwardChanges&&forwardChanges.length>0){var lastForwardChange=forwardChanges[forwardChanges.length-1];originalStartPoint=Math.max(originalStartPoint,lastForwardChange.getOriginalEnd()),modifiedStartPoint=Math.max(modifiedStartPoint,lastForwardChange.getModifiedEnd())}reverseChanges=[new DiffChange(originalStartPoint,originalEnd-originalStartPoint+1,modifiedStartPoint,modifiedEnd-modifiedStartPoint+1)]}else{changeHelper=new diff_DiffChangeHelper,diagonalMin=diagonalReverseStart,diagonalMax=diagonalReverseEnd,diagonalRelative=midOriginalArr[0]-midModifiedArr[0]-diagonalReverseOffset,lastOriginalIndex=Number.MAX_VALUE,historyIndex=deltaIsEven?this.m_reverseHistory.length-1:this.m_reverseHistory.length-2;do{(diagonal=diagonalRelative+diagonalReverseBase)===diagonalMin||diagonal<diagonalMax&&reversePoints[diagonal-1]>=reversePoints[diagonal+1]?(modifiedIndex=(originalIndex=reversePoints[diagonal+1]-1)-diagonalRelative-diagonalReverseOffset,originalIndex>lastOriginalIndex&&changeHelper.MarkNextChange(),lastOriginalIndex=originalIndex+1,changeHelper.AddOriginalElement(originalIndex+1,modifiedIndex+1),diagonalRelative=diagonal+1-diagonalReverseBase):(modifiedIndex=(originalIndex=reversePoints[diagonal-1])-diagonalRelative-diagonalReverseOffset,originalIndex>lastOriginalIndex&&changeHelper.MarkNextChange(),lastOriginalIndex=originalIndex,changeHelper.AddModifiedElement(originalIndex+1,modifiedIndex+1),diagonalRelative=diagonal-1-diagonalReverseBase),historyIndex>=0&&(diagonalReverseBase=(reversePoints=this.m_reverseHistory[historyIndex])[0],diagonalMin=1,diagonalMax=reversePoints.length-1)}while(--historyIndex>=-1);reverseChanges=changeHelper.getChanges()}return this.ConcatenateChanges(forwardChanges,reverseChanges)},LcsDiff.prototype.ComputeRecursionPoint=function(originalStart,originalEnd,modifiedStart,modifiedEnd,midOriginalArr,midModifiedArr,quitEarlyArr){var originalIndex,modifiedIndex,numDifferences,diagonalForwardStart=0,diagonalForwardEnd=0,diagonalReverseStart=0,diagonalReverseEnd=0;originalStart--,modifiedStart--,midOriginalArr[0]=0,midModifiedArr[0]=0,this.m_forwardHistory=[],this.m_reverseHistory=[];var diagonal,tempOriginalIndex,maxDifferences=originalEnd-originalStart+(modifiedEnd-modifiedStart),numDiagonals=maxDifferences+1,forwardPoints=new Array(numDiagonals),reversePoints=new Array(numDiagonals),diagonalForwardBase=modifiedEnd-modifiedStart,diagonalReverseBase=originalEnd-originalStart,diagonalForwardOffset=originalStart-modifiedStart,diagonalReverseOffset=originalEnd-modifiedEnd,deltaIsEven=(diagonalReverseBase-diagonalForwardBase)%2==0;for(forwardPoints[diagonalForwardBase]=originalStart,reversePoints[diagonalReverseBase]=originalEnd,quitEarlyArr[0]=!1,numDifferences=1;numDifferences<=maxDifferences/2+1;numDifferences++){var furthestOriginalIndex=0,furthestModifiedIndex=0;for(diagonalForwardStart=this.ClipDiagonalBound(diagonalForwardBase-numDifferences,numDifferences,diagonalForwardBase,numDiagonals),diagonalForwardEnd=this.ClipDiagonalBound(diagonalForwardBase+numDifferences,numDifferences,diagonalForwardBase,numDiagonals),diagonal=diagonalForwardStart;diagonal<=diagonalForwardEnd;diagonal+=2){for(modifiedIndex=(originalIndex=diagonal===diagonalForwardStart||diagonal<diagonalForwardEnd&&forwardPoints[diagonal-1]<forwardPoints[diagonal+1]?forwardPoints[diagonal+1]:forwardPoints[diagonal-1]+1)-(diagonal-diagonalForwardBase)-diagonalForwardOffset,tempOriginalIndex=originalIndex;originalIndex<originalEnd&&modifiedIndex<modifiedEnd&&this.ElementsAreEqual(originalIndex+1,modifiedIndex+1);)originalIndex++,modifiedIndex++;if(forwardPoints[diagonal]=originalIndex,originalIndex+modifiedIndex>furthestOriginalIndex+furthestModifiedIndex&&(furthestOriginalIndex=originalIndex,furthestModifiedIndex=modifiedIndex),!deltaIsEven&&Math.abs(diagonal-diagonalReverseBase)<=numDifferences-1&&originalIndex>=reversePoints[diagonal])return midOriginalArr[0]=originalIndex,midModifiedArr[0]=modifiedIndex,tempOriginalIndex<=reversePoints[diagonal]&&numDifferences<=1448?this.WALKTRACE(diagonalForwardBase,diagonalForwardStart,diagonalForwardEnd,diagonalForwardOffset,diagonalReverseBase,diagonalReverseStart,diagonalReverseEnd,diagonalReverseOffset,forwardPoints,reversePoints,originalIndex,originalEnd,midOriginalArr,modifiedIndex,modifiedEnd,midModifiedArr,deltaIsEven,quitEarlyArr):null}var matchLengthOfLongest=(furthestOriginalIndex-originalStart+(furthestModifiedIndex-modifiedStart)-numDifferences)/2;if(null!==this.ContinueProcessingPredicate&&!this.ContinueProcessingPredicate(furthestOriginalIndex,this.OriginalSequence,matchLengthOfLongest))return quitEarlyArr[0]=!0,midOriginalArr[0]=furthestOriginalIndex,midModifiedArr[0]=furthestModifiedIndex,matchLengthOfLongest>0&&numDifferences<=1448?this.WALKTRACE(diagonalForwardBase,diagonalForwardStart,diagonalForwardEnd,diagonalForwardOffset,diagonalReverseBase,diagonalReverseStart,diagonalReverseEnd,diagonalReverseOffset,forwardPoints,reversePoints,originalIndex,originalEnd,midOriginalArr,modifiedIndex,modifiedEnd,midModifiedArr,deltaIsEven,quitEarlyArr):(originalStart++,modifiedStart++,[new DiffChange(originalStart,originalEnd-originalStart+1,modifiedStart,modifiedEnd-modifiedStart+1)]);for(diagonalReverseStart=this.ClipDiagonalBound(diagonalReverseBase-numDifferences,numDifferences,diagonalReverseBase,numDiagonals),diagonalReverseEnd=this.ClipDiagonalBound(diagonalReverseBase+numDifferences,numDifferences,diagonalReverseBase,numDiagonals),diagonal=diagonalReverseStart;diagonal<=diagonalReverseEnd;diagonal+=2){for(modifiedIndex=(originalIndex=diagonal===diagonalReverseStart||diagonal<diagonalReverseEnd&&reversePoints[diagonal-1]>=reversePoints[diagonal+1]?reversePoints[diagonal+1]-1:reversePoints[diagonal-1])-(diagonal-diagonalReverseBase)-diagonalReverseOffset,tempOriginalIndex=originalIndex;originalIndex>originalStart&&modifiedIndex>modifiedStart&&this.ElementsAreEqual(originalIndex,modifiedIndex);)originalIndex--,modifiedIndex--;if(reversePoints[diagonal]=originalIndex,deltaIsEven&&Math.abs(diagonal-diagonalForwardBase)<=numDifferences&&originalIndex<=forwardPoints[diagonal])return midOriginalArr[0]=originalIndex,midModifiedArr[0]=modifiedIndex,tempOriginalIndex>=forwardPoints[diagonal]&&numDifferences<=1448?this.WALKTRACE(diagonalForwardBase,diagonalForwardStart,diagonalForwardEnd,diagonalForwardOffset,diagonalReverseBase,diagonalReverseStart,diagonalReverseEnd,diagonalReverseOffset,forwardPoints,reversePoints,originalIndex,originalEnd,midOriginalArr,modifiedIndex,modifiedEnd,midModifiedArr,deltaIsEven,quitEarlyArr):null}if(numDifferences<=1447){var temp=new Array(diagonalForwardEnd-diagonalForwardStart+2);temp[0]=diagonalForwardBase-diagonalForwardStart+1,MyArray.Copy(forwardPoints,diagonalForwardStart,temp,1,diagonalForwardEnd-diagonalForwardStart+1),this.m_forwardHistory.push(temp),(temp=new Array(diagonalReverseEnd-diagonalReverseStart+2))[0]=diagonalReverseBase-diagonalReverseStart+1,MyArray.Copy(reversePoints,diagonalReverseStart,temp,1,diagonalReverseEnd-diagonalReverseStart+1),this.m_reverseHistory.push(temp)}}return this.WALKTRACE(diagonalForwardBase,diagonalForwardStart,diagonalForwardEnd,diagonalForwardOffset,diagonalReverseBase,diagonalReverseStart,diagonalReverseEnd,diagonalReverseOffset,forwardPoints,reversePoints,originalIndex,originalEnd,midOriginalArr,modifiedIndex,modifiedEnd,midModifiedArr,deltaIsEven,quitEarlyArr)},LcsDiff.prototype.ShiftChanges=function(changes){var mergedDiffs;do{mergedDiffs=!1;for(var i=0;i<changes.length;i++)for(var change=changes[i],originalStop=i<changes.length-1?changes[i+1].originalStart:this.OriginalSequence.getLength(),modifiedStop=i<changes.length-1?changes[i+1].modifiedStart:this.ModifiedSequence.getLength(),checkOriginal=change.originalLength>0,checkModified=change.modifiedLength>0;change.originalStart+change.originalLength<originalStop&&change.modifiedStart+change.modifiedLength<modifiedStop&&(!checkOriginal||this.OriginalElementsAreEqual(change.originalStart,change.originalStart+change.originalLength))&&(!checkModified||this.ModifiedElementsAreEqual(change.modifiedStart,change.modifiedStart+change.modifiedLength));)change.originalStart++,change.modifiedStart++;var result=new Array,mergedChangeArr=[null];for(i=0;i<changes.length;i++)i<changes.length-1&&this.ChangesOverlap(changes[i],changes[i+1],mergedChangeArr)?(mergedDiffs=!0,result.push(mergedChangeArr[0]),i++):result.push(changes[i]);changes=result}while(mergedDiffs);for(i=changes.length-1;i>=0;i--){change=changes[i],originalStop=0,modifiedStop=0;if(i>0){var prevChange=changes[i-1];prevChange.originalLength>0&&(originalStop=prevChange.originalStart+prevChange.originalLength),prevChange.modifiedLength>0&&(modifiedStop=prevChange.modifiedStart+prevChange.modifiedLength)}checkOriginal=change.originalLength>0,checkModified=change.modifiedLength>0;for(var bestDelta=0,bestScore=this._boundaryScore(change.originalStart,change.originalLength,change.modifiedStart,change.modifiedLength),delta=1;;delta++){var originalStart=change.originalStart-delta,modifiedStart=change.modifiedStart-delta;if(originalStart<originalStop||modifiedStart<modifiedStop)break;if(checkOriginal&&!this.OriginalElementsAreEqual(originalStart,originalStart+change.originalLength))break;if(checkModified&&!this.ModifiedElementsAreEqual(modifiedStart,modifiedStart+change.modifiedLength))break;var score=this._boundaryScore(originalStart,change.originalLength,modifiedStart,change.modifiedLength);score>bestScore&&(bestScore=score,bestDelta=delta)}change.originalStart-=bestDelta,change.modifiedStart-=bestDelta}return changes},LcsDiff.prototype._OriginalIsBoundary=function(index){return index<=0||index>=this.OriginalSequence.getLength()-1||/^\s*$/.test(this.OriginalSequence.getElementHash(index))},LcsDiff.prototype._OriginalRegionIsBoundary=function(originalStart,originalLength){if(this._OriginalIsBoundary(originalStart)||this._OriginalIsBoundary(originalStart-1))return!0;if(originalLength>0){var originalEnd=originalStart+originalLength;if(this._OriginalIsBoundary(originalEnd-1)||this._OriginalIsBoundary(originalEnd))return!0}return!1},LcsDiff.prototype._ModifiedIsBoundary=function(index){return index<=0||index>=this.ModifiedSequence.getLength()-1||/^\s*$/.test(this.ModifiedSequence.getElementHash(index))},LcsDiff.prototype._ModifiedRegionIsBoundary=function(modifiedStart,modifiedLength){if(this._ModifiedIsBoundary(modifiedStart)||this._ModifiedIsBoundary(modifiedStart-1))return!0;if(modifiedLength>0){var modifiedEnd=modifiedStart+modifiedLength;if(this._ModifiedIsBoundary(modifiedEnd-1)||this._ModifiedIsBoundary(modifiedEnd))return!0}return!1},LcsDiff.prototype._boundaryScore=function(originalStart,originalLength,modifiedStart,modifiedLength){return(this._OriginalRegionIsBoundary(originalStart,originalLength)?1:0)+(this._ModifiedRegionIsBoundary(modifiedStart,modifiedLength)?1:0)},LcsDiff.prototype.ConcatenateChanges=function(left,right){var mergedChangeArr=[],result=null;return 0===left.length||0===right.length?right.length>0?right:left:this.ChangesOverlap(left[left.length-1],right[0],mergedChangeArr)?(result=new Array(left.length+right.length-1),MyArray.Copy(left,0,result,0,left.length-1),result[left.length-1]=mergedChangeArr[0],MyArray.Copy(right,1,result,left.length,right.length-1),result):(result=new Array(left.length+right.length),MyArray.Copy(left,0,result,0,left.length),MyArray.Copy(right,0,result,left.length,right.length),result)},LcsDiff.prototype.ChangesOverlap=function(left,right,mergedChangeArr){if(Debug.Assert(left.originalStart<=right.originalStart,"Left change is not less than or equal to right change"),Debug.Assert(left.modifiedStart<=right.modifiedStart,"Left change is not less than or equal to right change"),left.originalStart+left.originalLength>=right.originalStart||left.modifiedStart+left.modifiedLength>=right.modifiedStart){var originalStart=left.originalStart,originalLength=left.originalLength,modifiedStart=left.modifiedStart,modifiedLength=left.modifiedLength;return left.originalStart+left.originalLength>=right.originalStart&&(originalLength=right.originalStart+right.originalLength-left.originalStart),left.modifiedStart+left.modifiedLength>=right.modifiedStart&&(modifiedLength=right.modifiedStart+right.modifiedLength-left.modifiedStart),mergedChangeArr[0]=new DiffChange(originalStart,originalLength,modifiedStart,modifiedLength),!0}return mergedChangeArr[0]=null,!1},LcsDiff.prototype.ClipDiagonalBound=function(diagonal,numDifferences,diagonalBaseIndex,numDiagonals){if(diagonal>=0&&diagonal<numDiagonals)return diagonal;var diffEven=numDifferences%2==0;return diagonal<0?diffEven===(diagonalBaseIndex%2==0)?0:1:diffEven===((numDiagonals-diagonalBaseIndex-1)%2==0)?numDiagonals-1:numDiagonals-2},LcsDiff}(),map_extends=function(){var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();var Touch,StringIterator=function(){function StringIterator(){this._value="",this._pos=0}return StringIterator.prototype.reset=function(key){return this._value=key,this._pos=0,this},StringIterator.prototype.next=function(){return this._pos+=1,this},StringIterator.prototype.join=function(parts){return parts.join("")},StringIterator.prototype.hasNext=function(){return this._pos<this._value.length-1},StringIterator.prototype.cmp=function(a){return a.charCodeAt(0)-this._value.charCodeAt(this._pos)},StringIterator.prototype.value=function(){return this._value[this._pos]},StringIterator}(),PathIterator=function(){function PathIterator(){}return PathIterator.prototype.reset=function(key){return this._value=key.replace(/\\$|\/$/,""),this._from=0,this._to=0,this.next()},PathIterator.prototype.hasNext=function(){return this._to<this._value.length},PathIterator.prototype.join=function(parts){return parts.join("/")},PathIterator.prototype.next=function(){this._from=this._to;for(var justSeps=!0;this._to<this._value.length;this._to++){var ch=this._value.charCodeAt(this._to);if(ch===PathIterator._fwd||ch===PathIterator._bwd){if(!justSeps)break;this._from++}else justSeps=!1}return this},PathIterator.prototype.cmp=function(a){for(var aPos=0,aLen=a.length,thisPos=this._from;aPos<aLen&&thisPos<this._to;){var cmp=a.charCodeAt(aPos)-this._value.charCodeAt(thisPos);if(0!==cmp)return cmp;aPos+=1,thisPos+=1}return aLen===this._to-this._from?0:aPos<aLen?-1:1},PathIterator.prototype.value=function(){return this._value.substring(this._from,this._to)},PathIterator._fwd="/".charCodeAt(0),PathIterator._bwd="\\".charCodeAt(0),PathIterator}(),TernarySearchTreeNode=function(){function TernarySearchTreeNode(){}return TernarySearchTreeNode.prototype.isEmpty=function(){return!(this.left||this.mid||this.right||this.element)},TernarySearchTreeNode}();(function(){function TernarySearchTree(segments){this._iter=segments}TernarySearchTree.forPaths=function(){return new TernarySearchTree(new PathIterator)},TernarySearchTree.forStrings=function(){return new TernarySearchTree(new StringIterator)},TernarySearchTree.prototype.clear=function(){this._root=void 0},TernarySearchTree.prototype.set=function(key,element){var node,iter=this._iter.reset(key);for(this._root||(this._root=new TernarySearchTreeNode,this._root.str=iter.value()),node=this._root;;){var val=iter.cmp(node.str);if(val>0)node.left||(node.left=new TernarySearchTreeNode,node.left.str=iter.value()),node=node.left;else if(val<0)node.right||(node.right=new TernarySearchTreeNode,node.right.str=iter.value()),node=node.right;else{if(!iter.hasNext())break;iter.next(),node.mid||(node.mid=new TernarySearchTreeNode,node.mid.str=iter.value()),node=node.mid}}var oldElement=node.element;return node.element=element,oldElement},TernarySearchTree.prototype.get=function(key){for(var iter=this._iter.reset(key),node=this._root;node;){var val=iter.cmp(node.str);if(val>0)node=node.left;else if(val<0)node=node.right;else{if(!iter.hasNext())break;iter.next(),node=node.mid}}return node?node.element:void 0},TernarySearchTree.prototype.delete=function(key){for(var iter=this._iter.reset(key),stack=[],node=this._root;node;){var val=iter.cmp(node.str);if(val>0)stack.push([1,node]),node=node.left;else if(val<0)stack.push([-1,node]),node=node.right;else{if(!iter.hasNext()){for(node.element=void 0;stack.length>0&&node.isEmpty();){var _a=stack.pop(),dir=_a[0],parent_1=_a[1];switch(dir){case 1:parent_1.left=void 0;break;case 0:parent_1.mid=void 0;break;case-1:parent_1.right=void 0}node=parent_1}break}iter.next(),stack.push([0,node]),node=node.mid}}},TernarySearchTree.prototype.findSubstr=function(key){for(var candidate,iter=this._iter.reset(key),node=this._root;node;){var val=iter.cmp(node.str);if(val>0)node=node.left;else if(val<0)node=node.right;else{if(!iter.hasNext())break;iter.next(),candidate=node.element||candidate,node=node.mid}}return node&&node.element||candidate},TernarySearchTree.prototype.findSuperstr=function(key){for(var iter=this._iter.reset(key),node=this._root;node;){var val=iter.cmp(node.str);if(val>0)node=node.left;else if(val<0)node=node.right;else{if(!iter.hasNext()){if(!node.mid)return;var ret=new TernarySearchTree(this._iter);return ret._root=node.mid,ret}iter.next(),node=node.mid}}},TernarySearchTree.prototype.forEach=function(callback){this._forEach(this._root,[],callback)},TernarySearchTree.prototype._forEach=function(node,parts,callback){node&&(this._forEach(node.left,parts,callback),parts.push(node.str),node.element&&callback(node.element,this._iter.join(parts)),this._forEach(node.mid,parts,callback),parts.pop(),this._forEach(node.right,parts,callback))}})(),function(){function ResourceMap(){this.map=new Map,this.ignoreCase=!1}ResourceMap.prototype.set=function(resource,value){this.map.set(this.toKey(resource),value)},ResourceMap.prototype.get=function(resource){return this.map.get(this.toKey(resource))},ResourceMap.prototype.has=function(resource){return this.map.has(this.toKey(resource))},Object.defineProperty(ResourceMap.prototype,"size",{get:function(){return this.map.size},enumerable:!0,configurable:!0}),ResourceMap.prototype.clear=function(){this.map.clear()},ResourceMap.prototype.delete=function(resource){return this.map.delete(this.toKey(resource))},ResourceMap.prototype.forEach=function(clb){this.map.forEach(clb)},ResourceMap.prototype.values=function(){return function values(forEachable){var result=[];return forEachable.forEach((function(value){return result.push(value)})),result}(this.map)},ResourceMap.prototype.toKey=function(resource){var key=resource.toString();return this.ignoreCase&&(key=key.toLowerCase()),key},ResourceMap.prototype.keys=function(){return function keys(map){var result=[];return map.forEach((function(value,key){return result.push(key)})),result}(this.map).map(common_uri.parse)}}();!function(Touch){Touch[Touch.None=0]="None",Touch[Touch.AsOld=1]="AsOld",Touch[Touch.AsNew=2]="AsNew"}(Touch||(Touch={}));var LRUCache=function(_super){function LRUCache(limit,ratio){void 0===ratio&&(ratio=1);var _this=_super.call(this)||this;return _this._limit=limit,_this._ratio=Math.min(Math.max(0,ratio),1),_this}return map_extends(LRUCache,_super),Object.defineProperty(LRUCache.prototype,"limit",{get:function(){return this._limit},set:function(limit){this._limit=limit,this.checkTrim()},enumerable:!0,configurable:!0}),Object.defineProperty(LRUCache.prototype,"ratio",{get:function(){return this._ratio},set:function(ratio){this._ratio=Math.min(Math.max(0,ratio),1),this.checkTrim()},enumerable:!0,configurable:!0}),LRUCache.prototype.get=function(key){return _super.prototype.get.call(this,key,Touch.AsNew)},LRUCache.prototype.peek=function(key){return _super.prototype.get.call(this,key,Touch.None)},LRUCache.prototype.set=function(key,value){_super.prototype.set.call(this,key,value,Touch.AsNew),this.checkTrim()},LRUCache.prototype.checkTrim=function(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))},LRUCache}(function(){function LinkedMap(){this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0}return LinkedMap.prototype.clear=function(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0},LinkedMap.prototype.isEmpty=function(){return!this._head&&!this._tail},Object.defineProperty(LinkedMap.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),LinkedMap.prototype.has=function(key){return this._map.has(key)},LinkedMap.prototype.get=function(key,touch){void 0===touch&&(touch=Touch.None);var item=this._map.get(key);if(item)return touch!==Touch.None&&this.touch(item,touch),item.value},LinkedMap.prototype.set=function(key,value,touch){void 0===touch&&(touch=Touch.None);var item=this._map.get(key);if(item)item.value=value,touch!==Touch.None&&this.touch(item,touch);else{switch(item={key:key,value:value,next:void 0,previous:void 0},touch){case Touch.None:this.addItemLast(item);break;case Touch.AsOld:this.addItemFirst(item);break;case Touch.AsNew:default:this.addItemLast(item)}this._map.set(key,item),this._size++}},LinkedMap.prototype.delete=function(key){return!!this.remove(key)},LinkedMap.prototype.remove=function(key){var item=this._map.get(key);if(item)return this._map.delete(key),this.removeItem(item),this._size--,item.value},LinkedMap.prototype.shift=function(){if(this._head||this._tail){if(!this._head||!this._tail)throw new Error("Invalid list");var item=this._head;return this._map.delete(item.key),this.removeItem(item),this._size--,item.value}},LinkedMap.prototype.forEach=function(callbackfn,thisArg){for(var current=this._head;current;)thisArg?callbackfn.bind(thisArg)(current.value,current.key,this):callbackfn(current.value,current.key,this),current=current.next},LinkedMap.prototype.values=function(){for(var result=[],current=this._head;current;)result.push(current.value),current=current.next;return result},LinkedMap.prototype.keys=function(){for(var result=[],current=this._head;current;)result.push(current.key),current=current.next;return result},LinkedMap.prototype.trimOld=function(newSize){if(!(newSize>=this.size))if(0!==newSize){for(var current=this._head,currentSize=this.size;current&&currentSize>newSize;)this._map.delete(current.key),current=current.next,currentSize--;this._head=current,this._size=currentSize,current.previous=void 0}else this.clear()},LinkedMap.prototype.addItemFirst=function(item){if(this._head||this._tail){if(!this._head)throw new Error("Invalid list");item.next=this._head,this._head.previous=item}else this._tail=item;this._head=item},LinkedMap.prototype.addItemLast=function(item){if(this._head||this._tail){if(!this._tail)throw new Error("Invalid list");item.previous=this._tail,this._tail.next=item}else this._head=item;this._tail=item},LinkedMap.prototype.removeItem=function(item){if(item===this._head&&item===this._tail)this._head=void 0,this._tail=void 0;else if(item===this._head)this._head=item.next;else if(item===this._tail)this._tail=item.previous;else{var next=item.next,previous=item.previous;if(!next||!previous)throw new Error("Invalid list");next.previous=previous,previous.next=next}},LinkedMap.prototype.touch=function(item,touch){if(!this._head||!this._tail)throw new Error("Invalid list");if(touch===Touch.AsOld||touch===Touch.AsNew)if(touch===Touch.AsOld){if(item===this._head)return;var next=item.next,previous=item.previous;item===this._tail?(previous.next=void 0,this._tail=previous):(next.previous=previous,previous.next=next),item.previous=void 0,item.next=this._head,this._head.previous=item,this._head=item}else if(touch===Touch.AsNew){if(item===this._tail)return;next=item.next,previous=item.previous;item===this._head?(next.previous=void 0,this._head=next):(next.previous=previous,previous.next=next),item.next=void 0,item.previous=this._tail,this._tail.next=item,this._tail=item}},LinkedMap.prototype.toJSON=function(){var data=[];return this.forEach((function(value,key){data.push([key,value])})),data},LinkedMap.prototype.fromJSON=function(data){this.clear();for(var _i=0,data_1=data;_i<data_1.length;_i++){var _a=data_1[_i],key=_a[0],value=_a[1];this.set(key,value)}},LinkedMap}());new LRUCache(1e4);new LRUCache(1e4);String.fromCharCode(65279);var diffComputer_extends=function(){var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();function computeDiff(originalSequence,modifiedSequence,continueProcessingPredicate,pretty){return new diff_LcsDiff(originalSequence,modifiedSequence,continueProcessingPredicate).ComputeDiff(pretty)}var MarkerSequence=function(){function MarkerSequence(buffer,startMarkers,endMarkers){this.buffer=buffer,this.startMarkers=startMarkers,this.endMarkers=endMarkers}return MarkerSequence.prototype.getLength=function(){return this.startMarkers.length},MarkerSequence.prototype.getElementHash=function(i){return this.buffer.substring(this.startMarkers[i].offset,this.endMarkers[i].offset)},MarkerSequence.prototype.getStartLineNumber=function(i){return i===this.startMarkers.length?this.startMarkers[i-1].lineNumber+1:this.startMarkers[i].lineNumber},MarkerSequence.prototype.getStartColumn=function(i){return this.startMarkers[i].column},MarkerSequence.prototype.getEndLineNumber=function(i){return this.endMarkers[i].lineNumber},MarkerSequence.prototype.getEndColumn=function(i){return this.endMarkers[i].column},MarkerSequence}(),diffComputer_LineMarkerSequence=function(_super){function LineMarkerSequence(lines){for(var buffer="",startMarkers=[],endMarkers=[],pos=0,i=0,length_1=lines.length;i<length_1;i++){buffer+=lines[i];var startColumn=LineMarkerSequence._getFirstNonBlankColumn(lines[i],1),endColumn=LineMarkerSequence._getLastNonBlankColumn(lines[i],1);startMarkers.push({offset:pos+startColumn-1,lineNumber:i+1,column:startColumn}),endMarkers.push({offset:pos+endColumn-1,lineNumber:i+1,column:endColumn}),pos+=lines[i].length}return _super.call(this,buffer,startMarkers,endMarkers)||this}return diffComputer_extends(LineMarkerSequence,_super),LineMarkerSequence._getFirstNonBlankColumn=function(txt,defaultValue){var r=function firstNonWhitespaceIndex(str){for(var i=0,len=str.length;i<len;i++){var chCode=str.charCodeAt(i);if(32!==chCode&&9!==chCode)return i}return-1}(txt);return-1===r?defaultValue:r+1},LineMarkerSequence._getLastNonBlankColumn=function(txt,defaultValue){var r=function lastNonWhitespaceIndex(str,startIndex){void 0===startIndex&&(startIndex=str.length-1);for(var i=startIndex;i>=0;i--){var chCode=str.charCodeAt(i);if(32!==chCode&&9!==chCode)return i}return-1}(txt);return-1===r?defaultValue:r+2},LineMarkerSequence.prototype.getCharSequence=function(startIndex,endIndex){for(var startMarkers=[],endMarkers=[],index=startIndex;index<=endIndex;index++)for(var startMarker=this.startMarkers[index],endMarker=this.endMarkers[index],i=startMarker.offset;i<endMarker.offset;i++)startMarkers.push({offset:i,lineNumber:startMarker.lineNumber,column:startMarker.column+(i-startMarker.offset)}),endMarkers.push({offset:i+1,lineNumber:startMarker.lineNumber,column:startMarker.column+(i-startMarker.offset)+1});return new MarkerSequence(this.buffer,startMarkers,endMarkers)},LineMarkerSequence}(MarkerSequence),CharChange=function(){function CharChange(originalStartLineNumber,originalStartColumn,originalEndLineNumber,originalEndColumn,modifiedStartLineNumber,modifiedStartColumn,modifiedEndLineNumber,modifiedEndColumn){this.originalStartLineNumber=originalStartLineNumber,this.originalStartColumn=originalStartColumn,this.originalEndLineNumber=originalEndLineNumber,this.originalEndColumn=originalEndColumn,this.modifiedStartLineNumber=modifiedStartLineNumber,this.modifiedStartColumn=modifiedStartColumn,this.modifiedEndLineNumber=modifiedEndLineNumber,this.modifiedEndColumn=modifiedEndColumn}return CharChange.createFromDiffChange=function(diffChange,originalCharSequence,modifiedCharSequence){var originalStartLineNumber,originalStartColumn,originalEndLineNumber,originalEndColumn,modifiedStartLineNumber,modifiedStartColumn,modifiedEndLineNumber,modifiedEndColumn;return 0===diffChange.originalLength?(originalStartLineNumber=0,originalStartColumn=0,originalEndLineNumber=0,originalEndColumn=0):(originalStartLineNumber=originalCharSequence.getStartLineNumber(diffChange.originalStart),originalStartColumn=originalCharSequence.getStartColumn(diffChange.originalStart),originalEndLineNumber=originalCharSequence.getEndLineNumber(diffChange.originalStart+diffChange.originalLength-1),originalEndColumn=originalCharSequence.getEndColumn(diffChange.originalStart+diffChange.originalLength-1)),0===diffChange.modifiedLength?(modifiedStartLineNumber=0,modifiedStartColumn=0,modifiedEndLineNumber=0,modifiedEndColumn=0):(modifiedStartLineNumber=modifiedCharSequence.getStartLineNumber(diffChange.modifiedStart),modifiedStartColumn=modifiedCharSequence.getStartColumn(diffChange.modifiedStart),modifiedEndLineNumber=modifiedCharSequence.getEndLineNumber(diffChange.modifiedStart+diffChange.modifiedLength-1),modifiedEndColumn=modifiedCharSequence.getEndColumn(diffChange.modifiedStart+diffChange.modifiedLength-1)),new CharChange(originalStartLineNumber,originalStartColumn,originalEndLineNumber,originalEndColumn,modifiedStartLineNumber,modifiedStartColumn,modifiedEndLineNumber,modifiedEndColumn)},CharChange}();var LineChange=function(){function LineChange(originalStartLineNumber,originalEndLineNumber,modifiedStartLineNumber,modifiedEndLineNumber,charChanges){this.originalStartLineNumber=originalStartLineNumber,this.originalEndLineNumber=originalEndLineNumber,this.modifiedStartLineNumber=modifiedStartLineNumber,this.modifiedEndLineNumber=modifiedEndLineNumber,this.charChanges=charChanges}return LineChange.createFromDiffResult=function(diffChange,originalLineSequence,modifiedLineSequence,continueProcessingPredicate,shouldPostProcessCharChanges){var originalStartLineNumber,originalEndLineNumber,modifiedStartLineNumber,modifiedEndLineNumber,charChanges;if(0===diffChange.originalLength?(originalStartLineNumber=originalLineSequence.getStartLineNumber(diffChange.originalStart)-1,originalEndLineNumber=0):(originalStartLineNumber=originalLineSequence.getStartLineNumber(diffChange.originalStart),originalEndLineNumber=originalLineSequence.getEndLineNumber(diffChange.originalStart+diffChange.originalLength-1)),0===diffChange.modifiedLength?(modifiedStartLineNumber=modifiedLineSequence.getStartLineNumber(diffChange.modifiedStart)-1,modifiedEndLineNumber=0):(modifiedStartLineNumber=modifiedLineSequence.getStartLineNumber(diffChange.modifiedStart),modifiedEndLineNumber=modifiedLineSequence.getEndLineNumber(diffChange.modifiedStart+diffChange.modifiedLength-1)),0!==diffChange.originalLength&&0!==diffChange.modifiedLength&&continueProcessingPredicate()){var originalCharSequence=originalLineSequence.getCharSequence(diffChange.originalStart,diffChange.originalStart+diffChange.originalLength-1),modifiedCharSequence=modifiedLineSequence.getCharSequence(diffChange.modifiedStart,diffChange.modifiedStart+diffChange.modifiedLength-1),rawChanges=computeDiff(originalCharSequence,modifiedCharSequence,continueProcessingPredicate,!0);shouldPostProcessCharChanges&&(rawChanges=function postProcessCharChanges(rawChanges){if(rawChanges.length<=1)return rawChanges;for(var result=[rawChanges[0]],prevChange=result[0],i=1,len=rawChanges.length;i<len;i++){var currChange=rawChanges[i],originalMatchingLength=currChange.originalStart-(prevChange.originalStart+prevChange.originalLength),modifiedMatchingLength=currChange.modifiedStart-(prevChange.modifiedStart+prevChange.modifiedLength);Math.min(originalMatchingLength,modifiedMatchingLength)<3?(prevChange.originalLength=currChange.originalStart+currChange.originalLength-prevChange.originalStart,prevChange.modifiedLength=currChange.modifiedStart+currChange.modifiedLength-prevChange.modifiedStart):(result.push(currChange),prevChange=currChange)}return result}(rawChanges)),charChanges=[];for(var i=0,length_2=rawChanges.length;i<length_2;i++)charChanges.push(CharChange.createFromDiffChange(rawChanges[i],originalCharSequence,modifiedCharSequence))}return new LineChange(originalStartLineNumber,originalEndLineNumber,modifiedStartLineNumber,modifiedEndLineNumber,charChanges)},LineChange}(),DiffComputer=function(){function DiffComputer(originalLines,modifiedLines,opts){this.shouldPostProcessCharChanges=opts.shouldPostProcessCharChanges,this.shouldIgnoreTrimWhitespace=opts.shouldIgnoreTrimWhitespace,this.shouldMakePrettyDiff=opts.shouldMakePrettyDiff,this.maximumRunTimeMs=5e3,this.originalLines=originalLines,this.modifiedLines=modifiedLines,this.original=new diffComputer_LineMarkerSequence(originalLines),this.modified=new diffComputer_LineMarkerSequence(modifiedLines)}return DiffComputer.prototype.computeDiff=function(){if(1===this.original.getLength()&&0===this.original.getElementHash(0).length)return[{originalStartLineNumber:1,originalEndLineNumber:1,modifiedStartLineNumber:1,modifiedEndLineNumber:this.modified.getLength(),charChanges:[{modifiedEndColumn:0,modifiedEndLineNumber:0,modifiedStartColumn:0,modifiedStartLineNumber:0,originalEndColumn:0,originalEndLineNumber:0,originalStartColumn:0,originalStartLineNumber:0}]}];if(1===this.modified.getLength()&&0===this.modified.getElementHash(0).length)return[{originalStartLineNumber:1,originalEndLineNumber:this.original.getLength(),modifiedStartLineNumber:1,modifiedEndLineNumber:1,charChanges:[{modifiedEndColumn:0,modifiedEndLineNumber:0,modifiedStartColumn:0,modifiedStartLineNumber:0,originalEndColumn:0,originalEndLineNumber:0,originalStartColumn:0,originalStartLineNumber:0}]}];this.computationStartTime=(new Date).getTime();var rawChanges=computeDiff(this.original,this.modified,this._continueProcessingPredicate.bind(this),this.shouldMakePrettyDiff);if(this.shouldIgnoreTrimWhitespace){for(var lineChanges=[],i=0,length_3=rawChanges.length;i<length_3;i++)lineChanges.push(LineChange.createFromDiffResult(rawChanges[i],this.original,this.modified,this._continueProcessingPredicate.bind(this),this.shouldPostProcessCharChanges));return lineChanges}for(var result=[],originalLineIndex=0,modifiedLineIndex=0,len=(i=-1,rawChanges.length);i<len;i++){for(var nextChange=i+1<len?rawChanges[i+1]:null,originalStop=nextChange?nextChange.originalStart:this.originalLines.length,modifiedStop=nextChange?nextChange.modifiedStart:this.modifiedLines.length;originalLineIndex<originalStop&&modifiedLineIndex<modifiedStop;){var originalLine=this.originalLines[originalLineIndex],modifiedLine=this.modifiedLines[modifiedLineIndex];if(originalLine!==modifiedLine){for(var originalStartColumn=diffComputer_LineMarkerSequence._getFirstNonBlankColumn(originalLine,1),modifiedStartColumn=diffComputer_LineMarkerSequence._getFirstNonBlankColumn(modifiedLine,1);originalStartColumn>1&&modifiedStartColumn>1;){if(originalLine.charCodeAt(originalStartColumn-2)!==modifiedLine.charCodeAt(modifiedStartColumn-2))break;originalStartColumn--,modifiedStartColumn--}(originalStartColumn>1||modifiedStartColumn>1)&&this._pushTrimWhitespaceCharChange(result,originalLineIndex+1,1,originalStartColumn,modifiedLineIndex+1,1,modifiedStartColumn);for(var originalEndColumn=diffComputer_LineMarkerSequence._getLastNonBlankColumn(originalLine,1),modifiedEndColumn=diffComputer_LineMarkerSequence._getLastNonBlankColumn(modifiedLine,1),originalMaxColumn=originalLine.length+1,modifiedMaxColumn=modifiedLine.length+1;originalEndColumn<originalMaxColumn&&modifiedEndColumn<modifiedMaxColumn;){if(originalLine.charCodeAt(originalEndColumn-1)!==originalLine.charCodeAt(modifiedEndColumn-1))break;originalEndColumn++,modifiedEndColumn++}(originalEndColumn<originalMaxColumn||modifiedEndColumn<modifiedMaxColumn)&&this._pushTrimWhitespaceCharChange(result,originalLineIndex+1,originalEndColumn,originalMaxColumn,modifiedLineIndex+1,modifiedEndColumn,modifiedMaxColumn)}originalLineIndex++,modifiedLineIndex++}nextChange&&(result.push(LineChange.createFromDiffResult(nextChange,this.original,this.modified,this._continueProcessingPredicate.bind(this),this.shouldPostProcessCharChanges)),originalLineIndex+=nextChange.originalLength,modifiedLineIndex+=nextChange.modifiedLength)}return result},DiffComputer.prototype._pushTrimWhitespaceCharChange=function(result,originalLineNumber,originalStartColumn,originalEndColumn,modifiedLineNumber,modifiedStartColumn,modifiedEndColumn){this._mergeTrimWhitespaceCharChange(result,originalLineNumber,originalStartColumn,originalEndColumn,modifiedLineNumber,modifiedStartColumn,modifiedEndColumn)||result.push(new LineChange(originalLineNumber,originalLineNumber,modifiedLineNumber,modifiedLineNumber,[new CharChange(originalLineNumber,originalStartColumn,originalLineNumber,originalEndColumn,modifiedLineNumber,modifiedStartColumn,modifiedLineNumber,modifiedEndColumn)]))},DiffComputer.prototype._mergeTrimWhitespaceCharChange=function(result,originalLineNumber,originalStartColumn,originalEndColumn,modifiedLineNumber,modifiedStartColumn,modifiedEndColumn){var len=result.length;if(0===len)return!1;var prevChange=result[len-1];return 0!==prevChange.originalEndLineNumber&&0!==prevChange.modifiedEndLineNumber&&(prevChange.originalEndLineNumber+1===originalLineNumber&&prevChange.modifiedEndLineNumber+1===modifiedLineNumber&&(prevChange.originalEndLineNumber=originalLineNumber,prevChange.modifiedEndLineNumber=modifiedLineNumber,prevChange.charChanges.push(new CharChange(originalLineNumber,originalStartColumn,originalLineNumber,originalEndColumn,modifiedLineNumber,modifiedStartColumn,modifiedLineNumber,modifiedEndColumn)),!0))},DiffComputer.prototype._continueProcessingPredicate=function(){return 0===this.maximumRunTimeMs||(new Date).getTime()-this.computationStartTime<this.maximumRunTimeMs},DiffComputer}(),Uint8Matrix=function(){function Uint8Matrix(rows,cols,defaultValue){for(var data=new Uint8Array(rows*cols),i=0,len=rows*cols;i<len;i++)data[i]=defaultValue;this._data=data,this.rows=rows,this.cols=cols}return Uint8Matrix.prototype.get=function(row,col){return this._data[row*this.cols+col]},Uint8Matrix.prototype.set=function(row,col,value){this._data[row*this.cols+col]=value},Uint8Matrix}();function toUint8(v){return v<0?0:v>255?255:0|v}function toUint32(v){return v<0?0:v>4294967295?4294967295:0|v}var PrefixSumIndexOfResult=function PrefixSumIndexOfResult(index,remainder){this.index=index,this.remainder=remainder},prefixSumComputer_PrefixSumComputer=function(){function PrefixSumComputer(values){this.values=values,this.prefixSum=new Uint32Array(values.length),this.prefixSumValidIndex=new Int32Array(1),this.prefixSumValidIndex[0]=-1}return PrefixSumComputer.prototype.getCount=function(){return this.values.length},PrefixSumComputer.prototype.insertValues=function(insertIndex,insertValues){insertIndex=toUint32(insertIndex);var oldValues=this.values,oldPrefixSum=this.prefixSum,insertValuesLen=insertValues.length;return 0!==insertValuesLen&&(this.values=new Uint32Array(oldValues.length+insertValuesLen),this.values.set(oldValues.subarray(0,insertIndex),0),this.values.set(oldValues.subarray(insertIndex),insertIndex+insertValuesLen),this.values.set(insertValues,insertIndex),insertIndex-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=insertIndex-1),this.prefixSum=new Uint32Array(this.values.length),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(oldPrefixSum.subarray(0,this.prefixSumValidIndex[0]+1)),!0)},PrefixSumComputer.prototype.changeValue=function(index,value){return index=toUint32(index),value=toUint32(value),this.values[index]!==value&&(this.values[index]=value,index-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=index-1),!0)},PrefixSumComputer.prototype.removeValues=function(startIndex,cnt){startIndex=toUint32(startIndex),cnt=toUint32(cnt);var oldValues=this.values,oldPrefixSum=this.prefixSum;if(startIndex>=oldValues.length)return!1;var maxCnt=oldValues.length-startIndex;return cnt>=maxCnt&&(cnt=maxCnt),0!==cnt&&(this.values=new Uint32Array(oldValues.length-cnt),this.values.set(oldValues.subarray(0,startIndex),0),this.values.set(oldValues.subarray(startIndex+cnt),startIndex),this.prefixSum=new Uint32Array(this.values.length),startIndex-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=startIndex-1),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(oldPrefixSum.subarray(0,this.prefixSumValidIndex[0]+1)),!0)},PrefixSumComputer.prototype.getTotalValue=function(){return 0===this.values.length?0:this._getAccumulatedValue(this.values.length-1)},PrefixSumComputer.prototype.getAccumulatedValue=function(index){return index<0?0:(index=toUint32(index),this._getAccumulatedValue(index))},PrefixSumComputer.prototype._getAccumulatedValue=function(index){if(index<=this.prefixSumValidIndex[0])return this.prefixSum[index];var startIndex=this.prefixSumValidIndex[0]+1;0===startIndex&&(this.prefixSum[0]=this.values[0],startIndex++),index>=this.values.length&&(index=this.values.length-1);for(var i=startIndex;i<=index;i++)this.prefixSum[i]=this.prefixSum[i-1]+this.values[i];return this.prefixSumValidIndex[0]=Math.max(this.prefixSumValidIndex[0],index),this.prefixSum[index]},PrefixSumComputer.prototype.getIndexOf=function(accumulatedValue){accumulatedValue=Math.floor(accumulatedValue),this.getTotalValue();for(var mid,midStop,midStart,low=0,high=this.values.length-1;low<=high;)if(mid=low+(high-low)/2|0,accumulatedValue<(midStart=(midStop=this.prefixSum[mid])-this.values[mid]))high=mid-1;else{if(!(accumulatedValue>=midStop))break;low=mid+1}return new PrefixSumIndexOfResult(mid,accumulatedValue-midStart)},PrefixSumComputer}(),mirrorTextModel_MirrorTextModel=(function(){function PrefixSumComputerWithCache(values){this._cacheAccumulatedValueStart=0,this._cache=null,this._actual=new prefixSumComputer_PrefixSumComputer(values),this._bustCache()}PrefixSumComputerWithCache.prototype._bustCache=function(){this._cacheAccumulatedValueStart=0,this._cache=null},PrefixSumComputerWithCache.prototype.insertValues=function(insertIndex,insertValues){this._actual.insertValues(insertIndex,insertValues)&&this._bustCache()},PrefixSumComputerWithCache.prototype.changeValue=function(index,value){this._actual.changeValue(index,value)&&this._bustCache()},PrefixSumComputerWithCache.prototype.removeValues=function(startIndex,cnt){this._actual.removeValues(startIndex,cnt)&&this._bustCache()},PrefixSumComputerWithCache.prototype.getTotalValue=function(){return this._actual.getTotalValue()},PrefixSumComputerWithCache.prototype.getAccumulatedValue=function(index){return this._actual.getAccumulatedValue(index)},PrefixSumComputerWithCache.prototype.getIndexOf=function(accumulatedValue){if(accumulatedValue=Math.floor(accumulatedValue),null!==this._cache){var cacheIndex=accumulatedValue-this._cacheAccumulatedValueStart;if(cacheIndex>=0&&cacheIndex<this._cache.length)return this._cache[cacheIndex]}return this._actual.getIndexOf(accumulatedValue)},PrefixSumComputerWithCache.prototype.warmUpCache=function(accumulatedValueStart,accumulatedValueEnd){for(var newCache=[],accumulatedValue=accumulatedValueStart;accumulatedValue<=accumulatedValueEnd;accumulatedValue++)newCache[accumulatedValue-accumulatedValueStart]=this.getIndexOf(accumulatedValue);this._cache=newCache,this._cacheAccumulatedValueStart=accumulatedValueStart}}(),function(){function MirrorTextModel(uri,lines,eol,versionId){this._uri=uri,this._lines=lines,this._eol=eol,this._versionId=versionId}return MirrorTextModel.prototype.dispose=function(){this._lines.length=0},Object.defineProperty(MirrorTextModel.prototype,"version",{get:function(){return this._versionId},enumerable:!0,configurable:!0}),MirrorTextModel.prototype.getText=function(){return this._lines.join(this._eol)},MirrorTextModel.prototype.onEvents=function(e){e.eol&&e.eol!==this._eol&&(this._eol=e.eol,this._lineStarts=null);for(var changes=e.changes,i=0,len=changes.length;i<len;i++){var change=changes[i];this._acceptDeleteRange(change.range),this._acceptInsertText(new Position(change.range.startLineNumber,change.range.startColumn),change.text)}this._versionId=e.versionId},MirrorTextModel.prototype._ensureLineStarts=function(){if(!this._lineStarts){for(var eolLength=this._eol.length,linesLength=this._lines.length,lineStartValues=new Uint32Array(linesLength),i=0;i<linesLength;i++)lineStartValues[i]=this._lines[i].length+eolLength;this._lineStarts=new prefixSumComputer_PrefixSumComputer(lineStartValues)}},MirrorTextModel.prototype._setLineText=function(lineIndex,newValue){this._lines[lineIndex]=newValue,this._lineStarts&&this._lineStarts.changeValue(lineIndex,this._lines[lineIndex].length+this._eol.length)},MirrorTextModel.prototype._acceptDeleteRange=function(range){if(range.startLineNumber!==range.endLineNumber)this._setLineText(range.startLineNumber-1,this._lines[range.startLineNumber-1].substring(0,range.startColumn-1)+this._lines[range.endLineNumber-1].substring(range.endColumn-1)),this._lines.splice(range.startLineNumber,range.endLineNumber-range.startLineNumber),this._lineStarts&&this._lineStarts.removeValues(range.startLineNumber,range.endLineNumber-range.startLineNumber);else{if(range.startColumn===range.endColumn)return;this._setLineText(range.startLineNumber-1,this._lines[range.startLineNumber-1].substring(0,range.startColumn-1)+this._lines[range.startLineNumber-1].substring(range.endColumn-1))}},MirrorTextModel.prototype._acceptInsertText=function(position,insertText){if(0!==insertText.length){var insertLines=insertText.split(/\r\n|\r|\n/);if(1!==insertLines.length){insertLines[insertLines.length-1]+=this._lines[position.lineNumber-1].substring(position.column-1),this._setLineText(position.lineNumber-1,this._lines[position.lineNumber-1].substring(0,position.column-1)+insertLines[0]);for(var newLengths=new Uint32Array(insertLines.length-1),i=1;i<insertLines.length;i++)this._lines.splice(position.lineNumber+i-1,0,insertLines[i]),newLengths[i-1]=insertLines[i].length+this._eol.length;this._lineStarts&&this._lineStarts.insertValues(position.lineNumber,newLengths)}else this._setLineText(position.lineNumber-1,this._lines[position.lineNumber-1].substring(0,position.column-1)+insertLines[0]+this._lines[position.lineNumber-1].substring(position.column-1))}},MirrorTextModel}()),characterClassifier_CharacterClassifier=function(){function CharacterClassifier(_defaultValue){var defaultValue=toUint8(_defaultValue);this._defaultValue=defaultValue,this._asciiMap=CharacterClassifier._createAsciiMap(defaultValue),this._map=new Map}return CharacterClassifier._createAsciiMap=function(defaultValue){for(var asciiMap=new Uint8Array(256),i=0;i<256;i++)asciiMap[i]=defaultValue;return asciiMap},CharacterClassifier.prototype.set=function(charCode,_value){var value=toUint8(_value);charCode>=0&&charCode<256?this._asciiMap[charCode]=value:this._map.set(charCode,value)},CharacterClassifier.prototype.get=function(charCode){return charCode>=0&&charCode<256?this._asciiMap[charCode]:this._map.get(charCode)||this._defaultValue},CharacterClassifier}(),linkComputer_StateMachine=(function(){function CharacterSet(){this._actual=new characterClassifier_CharacterClassifier(0)}CharacterSet.prototype.add=function(charCode){this._actual.set(charCode,1)},CharacterSet.prototype.has=function(charCode){return 1===this._actual.get(charCode)}}(),function(){function StateMachine(edges){for(var maxCharCode=0,maxState=0,i=0,len=edges.length;i<len;i++){var _a=edges[i],from=_a[0];(chCode=_a[1])>maxCharCode&&(maxCharCode=chCode),from>maxState&&(maxState=from),(to=_a[2])>maxState&&(maxState=to)}maxCharCode++,maxState++;var states=new Uint8Matrix(maxState,maxCharCode,0);for(i=0,len=edges.length;i<len;i++){var _b=edges[i],chCode=(from=_b[0],_b[1]),to=_b[2];states.set(from,chCode,to)}this._states=states,this._maxCharCode=maxCharCode}return StateMachine.prototype.nextState=function(currentState,chCode){return chCode<0||chCode>=this._maxCharCode?0:this._states.get(currentState,chCode)},StateMachine}()),_stateMachine=null;var _classifier=null;var LinkComputer=function(){function LinkComputer(){}return LinkComputer._createLink=function(classifier,line,lineNumber,linkBeginIndex,linkEndIndex){var lastIncludedCharIndex=linkEndIndex-1;do{var chCode=line.charCodeAt(lastIncludedCharIndex);if(2!==classifier.get(chCode))break;lastIncludedCharIndex--}while(lastIncludedCharIndex>linkBeginIndex);if(linkBeginIndex>0){var charCodeBeforeLink=line.charCodeAt(linkBeginIndex-1),lastCharCodeInLink=line.charCodeAt(lastIncludedCharIndex);(40===charCodeBeforeLink&&41===lastCharCodeInLink||91===charCodeBeforeLink&&93===lastCharCodeInLink||123===charCodeBeforeLink&&125===lastCharCodeInLink)&&lastIncludedCharIndex--}return{range:{startLineNumber:lineNumber,startColumn:linkBeginIndex+1,endLineNumber:lineNumber,endColumn:lastIncludedCharIndex+2},url:line.substring(linkBeginIndex,lastIncludedCharIndex+1)}},LinkComputer.computeLinks=function(model){for(var stateMachine=function getStateMachine(){return null===_stateMachine&&(_stateMachine=new linkComputer_StateMachine([[1,104,2],[1,72,2],[1,102,6],[1,70,6],[2,116,3],[2,84,3],[3,116,4],[3,84,4],[4,112,5],[4,80,5],[5,115,9],[5,83,9],[5,58,10],[6,105,7],[6,73,7],[7,108,8],[7,76,8],[8,101,9],[8,69,9],[9,58,10],[10,47,11],[11,47,12]])),_stateMachine}(),classifier=function getClassifier(){if(null===_classifier){_classifier=new characterClassifier_CharacterClassifier(0);for(var i=0;i<" \t<>'\"、。｡､，．：；？！＠＃＄％＆＊‘“〈《「『【〔（［｛｢｣｝］）〕】』」》〉”’｀～…".length;i++)_classifier.set(" \t<>'\"、。｡､，．：；？！＠＃＄％＆＊‘“〈《「『【〔（［｛｢｣｝］）〕】』」》〉”’｀～…".charCodeAt(i),1);for(i=0;i<".,;".length;i++)_classifier.set(".,;".charCodeAt(i),2)}return _classifier}(),result=[],i=1,lineCount=model.getLineCount();i<=lineCount;i++){for(var line=model.getLineContent(i),len=line.length,j=0,linkBeginIndex=0,linkBeginChCode=0,state=1,hasOpenParens=!1,hasOpenSquareBracket=!1,hasOpenCurlyBracket=!1;j<len;){var resetStateMachine=!1,chCode=line.charCodeAt(j);if(13===state){var chClass=void 0;switch(chCode){case 40:hasOpenParens=!0,chClass=0;break;case 41:chClass=hasOpenParens?0:1;break;case 91:hasOpenSquareBracket=!0,chClass=0;break;case 93:chClass=hasOpenSquareBracket?0:1;break;case 123:hasOpenCurlyBracket=!0,chClass=0;break;case 125:chClass=hasOpenCurlyBracket?0:1;break;case 39:chClass=34===linkBeginChCode||96===linkBeginChCode?0:1;break;case 34:chClass=39===linkBeginChCode||96===linkBeginChCode?0:1;break;case 96:chClass=39===linkBeginChCode||34===linkBeginChCode?0:1;break;default:chClass=classifier.get(chCode)}1===chClass&&(result.push(LinkComputer._createLink(classifier,line,i,linkBeginIndex,j)),resetStateMachine=!0)}else if(12===state){1===(chClass=classifier.get(chCode))?resetStateMachine=!0:state=13}else 0===(state=stateMachine.nextState(state,chCode))&&(resetStateMachine=!0);resetStateMachine&&(state=1,hasOpenParens=!1,hasOpenSquareBracket=!1,hasOpenCurlyBracket=!1,linkBeginIndex=j+1,linkBeginChCode=chCode),j++}13===state&&result.push(LinkComputer._createLink(classifier,line,i,linkBeginIndex,len))}return result},LinkComputer}();var BasicInplaceReplace=function(){function BasicInplaceReplace(){this._defaultValueSet=[["true","false"],["True","False"],["Private","Public","Friend","ReadOnly","Partial","Protected","WriteOnly"],["public","protected","private"]]}return BasicInplaceReplace.prototype.navigateValueSet=function(range1,text1,range2,text2,up){var result;if(range1&&text1&&(result=this.doNavigateValueSet(text1,up)))return{range:range1,value:result};if(range2&&text2&&(result=this.doNavigateValueSet(text2,up)))return{range:range2,value:result};return null},BasicInplaceReplace.prototype.doNavigateValueSet=function(text,up){var numberResult=this.numberReplace(text,up);return null!==numberResult?numberResult:this.textReplace(text,up)},BasicInplaceReplace.prototype.numberReplace=function(value,up){var precision=Math.pow(10,value.length-(value.lastIndexOf(".")+1)),n1=Number(value),n2=parseFloat(value);return isNaN(n1)||isNaN(n2)||n1!==n2?null:0!==n1||up?(n1=Math.floor(n1*precision),n1+=up?precision:-precision,String(n1/precision)):null},BasicInplaceReplace.prototype.textReplace=function(value,up){return this.valueSetsReplace(this._defaultValueSet,value,up)},BasicInplaceReplace.prototype.valueSetsReplace=function(valueSets,value,up){for(var result=null,i=0,len=valueSets.length;null===result&&i<len;i++)result=this.valueSetReplace(valueSets[i],value,up);return result},BasicInplaceReplace.prototype.valueSetReplace=function(valueSet,value,up){var idx=valueSet.indexOf(value);return idx>=0?((idx+=up?1:-1)<0?idx=valueSet.length-1:idx%=valueSet.length,valueSet[idx]):null},BasicInplaceReplace.INSTANCE=new BasicInplaceReplace,BasicInplaceReplace}();var DEFAULT_WORD_REGEXP=function createWordRegExp(allowInWords){void 0===allowInWords&&(allowInWords="");for(var source="(-?\\d*\\.\\d\\w*)|([^",i=0;i<"`~!@#$%^&*()-=+[{]}\\|;:'\",.<>/?".length;i++)allowInWords.indexOf("`~!@#$%^&*()-=+[{]}\\|;:'\",.<>/?"[i])>=0||(source+="\\"+"`~!@#$%^&*()-=+[{]}\\|;:'\",.<>/?"[i]);return source+="\\s]+)",new RegExp(source,"g")}();function once(fn){var result,_this=this,didCall=!1;return function(){return didCall?result:(didCall=!0,result=fn.apply(_this,arguments))}}var lifecycle_empty=Object.freeze({dispose:function(){}});function lifecycle_dispose(first){for(var rest=[],_i=1;_i<arguments.length;_i++)rest[_i-1]=arguments[_i];return Array.isArray(first)?(first.forEach((function(d){return d&&d.dispose()})),[]):0===rest.length?first?(first.dispose(),first):void 0:(lifecycle_dispose(first),lifecycle_dispose(rest),[])}var Disposable=function(){function Disposable(){this._toDispose=[]}return Disposable.prototype.dispose=function(){this._toDispose=lifecycle_dispose(this._toDispose)},Disposable.prototype._register=function(t){return this._toDispose.push(t),t},Disposable}(),outstandingPromiseErrors=(function(){function ReferenceCollection(){this.references=Object.create(null)}ReferenceCollection.prototype.acquire=function(key){var _this=this,reference=this.references[key];reference||(reference=this.references[key]={counter:0,object:this.createReferencedObject(key)});var object=reference.object,dispose=once((function(){0==--reference.counter&&(_this.destroyReferencedObject(reference.object),delete _this.references[key])}));return reference.counter++,{object:object,dispose:dispose}}}(),function(){function ImmortalReference(object){this.object=object}ImmortalReference.prototype.dispose=function(){}}(),{});winjs_base.b.addEventListener("error",(function promiseErrorHandler(e){var details=e.detail,id=details.id;details.parent?details.handler&&outstandingPromiseErrors&&delete outstandingPromiseErrors[id]:(outstandingPromiseErrors[id]=details,1===Object.keys(outstandingPromiseErrors).length&&setTimeout((function(){var errors=outstandingPromiseErrors;outstandingPromiseErrors={},Object.keys(errors).forEach((function(errorId){var error=errors[errorId];error.exception?onUnexpectedError(error.exception):error.error&&onUnexpectedError(error.error),console.log("WARNING: Promise with no error callback:"+error.id),console.log(error),error.exception&&console.log(error.exception.stack)}))}),0))}));var errorHandler=new(function(){function ErrorHandler(){this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout((function(){if(e.stack)throw new Error(e.message+"\n\n"+e.stack);throw e}),0)}}return ErrorHandler.prototype.addListener=function(listener){var _this=this;return this.listeners.push(listener),function(){_this._removeListener(listener)}},ErrorHandler.prototype.emit=function(e){this.listeners.forEach((function(listener){listener(e)}))},ErrorHandler.prototype._removeListener=function(listener){this.listeners.splice(this.listeners.indexOf(listener),1)},ErrorHandler.prototype.setUnexpectedErrorHandler=function(newUnexpectedErrorHandler){this.unexpectedErrorHandler=newUnexpectedErrorHandler},ErrorHandler.prototype.getUnexpectedErrorHandler=function(){return this.unexpectedErrorHandler},ErrorHandler.prototype.onUnexpectedError=function(e){this.unexpectedErrorHandler(e),this.emit(e)},ErrorHandler.prototype.onUnexpectedExternalError=function(e){this.unexpectedErrorHandler(e)},ErrorHandler}());function onUnexpectedError(e){isPromiseCanceledError(e)||errorHandler.onUnexpectedError(e)}function transformErrorForSerialization(error){return error instanceof Error?{$isError:!0,name:error.name,message:error.message,stack:error.stacktrace||error.stack}:error}function isPromiseCanceledError(error){return error instanceof Error&&"Canceled"===error.name&&"Canceled"===error.message}var Event,Node=function Node(element){this.element=element},LinkedList=function(){function LinkedList(){}return LinkedList.prototype.isEmpty=function(){return!this._first},LinkedList.prototype.clear=function(){this._first=void 0,this._last=void 0},LinkedList.prototype.unshift=function(element){return this.insert(element,!1)},LinkedList.prototype.push=function(element){return this.insert(element,!0)},LinkedList.prototype.insert=function(element,atTheEnd){var _this=this,newNode=new Node(element);if(this._first)if(atTheEnd){var oldLast=this._last;this._last=newNode,newNode.prev=oldLast,oldLast.next=newNode}else{var oldFirst=this._first;this._first=newNode,newNode.next=oldFirst,oldFirst.prev=newNode}else this._first=newNode,this._last=newNode;return function(){for(var candidate=_this._first;candidate instanceof Node;candidate=candidate.next)if(candidate===newNode){if(candidate.prev&&candidate.next){var anchor=candidate.prev;anchor.next=candidate.next,candidate.next.prev=anchor}else candidate.prev||candidate.next?candidate.next?candidate.prev||(_this._first=_this._first.next,_this._first.prev=void 0):(_this._last=_this._last.prev,_this._last.next=void 0):(_this._first=void 0,_this._last=void 0);break}}},LinkedList.prototype.iterator=function(){var element={done:void 0,value:void 0},node=this._first;return{next:function(){return node?(element.done=!1,element.value=node.element,node=node.next):(element.done=!0,element.value=void 0),element}}},LinkedList.prototype.toArray=function(){for(var result=[],node=this._first;node instanceof Node;node=node.next)result.push(node.element);return result},LinkedList}();!function(Event){var _disposable={dispose:function(){}};Event.None=function(){return _disposable}}(Event||(Event={}));var event_Emitter=function(){function Emitter(_options){this._options=_options}return Object.defineProperty(Emitter.prototype,"event",{get:function(){var _this=this;return this._event||(this._event=function(listener,thisArgs,disposables){_this._listeners||(_this._listeners=new LinkedList);var firstListener=_this._listeners.isEmpty();firstListener&&_this._options&&_this._options.onFirstListenerAdd&&_this._options.onFirstListenerAdd(_this);var result,remove=_this._listeners.push(thisArgs?[listener,thisArgs]:listener);return firstListener&&_this._options&&_this._options.onFirstListenerDidAdd&&_this._options.onFirstListenerDidAdd(_this),_this._options&&_this._options.onListenerDidAdd&&_this._options.onListenerDidAdd(_this,listener,thisArgs),result={dispose:function(){result.dispose=Emitter._noop,_this._disposed||(remove(),_this._options&&_this._options.onLastListenerRemove&&_this._listeners.isEmpty()&&_this._options.onLastListenerRemove(_this))}},Array.isArray(disposables)&&disposables.push(result),result}),this._event},enumerable:!0,configurable:!0}),Emitter.prototype.fire=function(event){if(this._listeners){this._deliveryQueue||(this._deliveryQueue=[]);for(var iter=this._listeners.iterator(),e=iter.next();!e.done;e=iter.next())this._deliveryQueue.push([e.value,event]);for(;this._deliveryQueue.length>0;){var _a=this._deliveryQueue.shift(),listener=_a[0],event_1=_a[1];try{"function"==typeof listener?listener.call(void 0,event_1):listener[0].call(listener[1],event_1)}catch(e){onUnexpectedError(e)}}}},Emitter.prototype.dispose=function(){this._listeners&&(this._listeners=void 0),this._deliveryQueue&&(this._deliveryQueue.length=0),this._disposed=!0},Emitter._noop=function(){},Emitter}();!function(){function EventMultiplexer(){var _this=this;this.hasListeners=!1,this.events=[],this.emitter=new event_Emitter({onFirstListenerAdd:function(){return _this.onFirstListenerAdd()},onLastListenerRemove:function(){return _this.onLastListenerRemove()}})}Object.defineProperty(EventMultiplexer.prototype,"event",{get:function(){return this.emitter.event},enumerable:!0,configurable:!0}),EventMultiplexer.prototype.add=function(event){var _this=this,e={event:event,listener:null};this.events.push(e),this.hasListeners&&this.hook(e);return function toDisposable(){for(var fns=[],_i=0;_i<arguments.length;_i++)fns[_i]=arguments[_i];return{dispose:function(){for(var _i=0,fns_1=fns;_i<fns_1.length;_i++){(0,fns_1[_i])()}}}}(once((function(){_this.hasListeners&&_this.unhook(e);var idx=_this.events.indexOf(e);_this.events.splice(idx,1)})))},EventMultiplexer.prototype.onFirstListenerAdd=function(){var _this=this;this.hasListeners=!0,this.events.forEach((function(e){return _this.hook(e)}))},EventMultiplexer.prototype.onLastListenerRemove=function(){var _this=this;this.hasListeners=!1,this.events.forEach((function(e){return _this.unhook(e)}))},EventMultiplexer.prototype.hook=function(e){var _this=this;e.listener=e.event((function(r){return _this.emitter.fire(r)}))},EventMultiplexer.prototype.unhook=function(e){e.listener.dispose(),e.listener=null},EventMultiplexer.prototype.dispose=function(){this.emitter.dispose()}}();!function(){function EventBufferer(){this.buffers=[]}EventBufferer.prototype.wrapEvent=function(event){var _this=this;return function(listener,thisArgs,disposables){return event((function(i){var buffer=_this.buffers[_this.buffers.length-1];buffer?buffer.push((function(){return listener.call(thisArgs,i)})):listener.call(thisArgs,i)}),void 0,disposables)}},EventBufferer.prototype.bufferEvents=function(fn){var buffer=[];this.buffers.push(buffer),fn(),this.buffers.pop(),buffer.forEach((function(flush){return flush()}))}}();function mapEvent(event,map){return function(listener,thisArgs,disposables){return void 0===thisArgs&&(thisArgs=null),event((function(i){return listener.call(thisArgs,map(i))}),null,disposables)}}function filterEvent(event,filter){return function(listener,thisArgs,disposables){return void 0===thisArgs&&(thisArgs=null),event((function(e){return filter(e)&&listener.call(thisArgs,e)}),null,disposables)}}!function(){function ChainableEvent(_event){this._event=_event}Object.defineProperty(ChainableEvent.prototype,"event",{get:function(){return this._event},enumerable:!0,configurable:!0}),ChainableEvent.prototype.map=function(fn){return new ChainableEvent(mapEvent(this._event,fn))},ChainableEvent.prototype.forEach=function(fn){return new ChainableEvent(function forEach(event,each){return function(listener,thisArgs,disposables){return void 0===thisArgs&&(thisArgs=null),event((function(i){each(i),listener.call(thisArgs,i)}),null,disposables)}}(this._event,fn))},ChainableEvent.prototype.filter=function(fn){return new ChainableEvent(filterEvent(this._event,fn))},ChainableEvent.prototype.latch=function(){return new ChainableEvent(function latch(event){var cache,firstCall=!0;return filterEvent(event,(function(value){var shouldEmit=firstCall||value!==cache;return firstCall=!1,cache=value,shouldEmit}))}(this._event))},ChainableEvent.prototype.on=function(listener,thisArgs,disposables){return this._event(listener,thisArgs,disposables)}}();!function(){function Relay(){this.emitter=new event_Emitter,this.event=this.emitter.event,this.disposable=lifecycle_empty}Object.defineProperty(Relay.prototype,"input",{set:function(event){this.disposable.dispose(),this.disposable=event(this.emitter.fire,this.emitter)},enumerable:!0,configurable:!0}),Relay.prototype.dispose=function(){this.disposable.dispose(),this.emitter.dispose()}}();var KeyCodeUtils,KeyCodeStrMap=function(){function KeyCodeStrMap(){this._keyCodeToStr=[],this._strToKeyCode=Object.create(null)}return KeyCodeStrMap.prototype.define=function(keyCode,str){this._keyCodeToStr[keyCode]=str,this._strToKeyCode[str.toLowerCase()]=keyCode},KeyCodeStrMap.prototype.keyCodeToStr=function(keyCode){return this._keyCodeToStr[keyCode]},KeyCodeStrMap.prototype.strToKeyCode=function(str){return this._strToKeyCode[str.toLowerCase()]||0},KeyCodeStrMap}(),uiMap=new KeyCodeStrMap,userSettingsUSMap=new KeyCodeStrMap,userSettingsGeneralMap=new KeyCodeStrMap;!function(){function define(keyCode,uiLabel,usUserSettingsLabel,generalUserSettingsLabel){void 0===usUserSettingsLabel&&(usUserSettingsLabel=uiLabel),void 0===generalUserSettingsLabel&&(generalUserSettingsLabel=usUserSettingsLabel),uiMap.define(keyCode,uiLabel),userSettingsUSMap.define(keyCode,usUserSettingsLabel),userSettingsGeneralMap.define(keyCode,generalUserSettingsLabel)}define(0,"unknown"),define(1,"Backspace"),define(2,"Tab"),define(3,"Enter"),define(4,"Shift"),define(5,"Ctrl"),define(6,"Alt"),define(7,"PauseBreak"),define(8,"CapsLock"),define(9,"Escape"),define(10,"Space"),define(11,"PageUp"),define(12,"PageDown"),define(13,"End"),define(14,"Home"),define(15,"LeftArrow","Left"),define(16,"UpArrow","Up"),define(17,"RightArrow","Right"),define(18,"DownArrow","Down"),define(19,"Insert"),define(20,"Delete"),define(21,"0"),define(22,"1"),define(23,"2"),define(24,"3"),define(25,"4"),define(26,"5"),define(27,"6"),define(28,"7"),define(29,"8"),define(30,"9"),define(31,"A"),define(32,"B"),define(33,"C"),define(34,"D"),define(35,"E"),define(36,"F"),define(37,"G"),define(38,"H"),define(39,"I"),define(40,"J"),define(41,"K"),define(42,"L"),define(43,"M"),define(44,"N"),define(45,"O"),define(46,"P"),define(47,"Q"),define(48,"R"),define(49,"S"),define(50,"T"),define(51,"U"),define(52,"V"),define(53,"W"),define(54,"X"),define(55,"Y"),define(56,"Z"),define(57,"Meta"),define(58,"ContextMenu"),define(59,"F1"),define(60,"F2"),define(61,"F3"),define(62,"F4"),define(63,"F5"),define(64,"F6"),define(65,"F7"),define(66,"F8"),define(67,"F9"),define(68,"F10"),define(69,"F11"),define(70,"F12"),define(71,"F13"),define(72,"F14"),define(73,"F15"),define(74,"F16"),define(75,"F17"),define(76,"F18"),define(77,"F19"),define(78,"NumLock"),define(79,"ScrollLock"),define(80,";",";","OEM_1"),define(81,"=","=","OEM_PLUS"),define(82,",",",","OEM_COMMA"),define(83,"-","-","OEM_MINUS"),define(84,".",".","OEM_PERIOD"),define(85,"/","/","OEM_2"),define(86,"`","`","OEM_3"),define(110,"ABNT_C1"),define(111,"ABNT_C2"),define(87,"[","[","OEM_4"),define(88,"\\","\\","OEM_5"),define(89,"]","]","OEM_6"),define(90,"'","'","OEM_7"),define(91,"OEM_8"),define(92,"OEM_102"),define(93,"NumPad0"),define(94,"NumPad1"),define(95,"NumPad2"),define(96,"NumPad3"),define(97,"NumPad4"),define(98,"NumPad5"),define(99,"NumPad6"),define(100,"NumPad7"),define(101,"NumPad8"),define(102,"NumPad9"),define(103,"NumPad_Multiply"),define(104,"NumPad_Add"),define(105,"NumPad_Separator"),define(106,"NumPad_Subtract"),define(107,"NumPad_Decimal"),define(108,"NumPad_Divide")}(),function(KeyCodeUtils){KeyCodeUtils.toString=function toString(keyCode){return uiMap.keyCodeToStr(keyCode)},KeyCodeUtils.fromString=function fromString(key){return uiMap.strToKeyCode(key)},KeyCodeUtils.toUserSettingsUS=function toUserSettingsUS(keyCode){return userSettingsUSMap.keyCodeToStr(keyCode)},KeyCodeUtils.toUserSettingsGeneral=function toUserSettingsGeneral(keyCode){return userSettingsGeneralMap.keyCodeToStr(keyCode)},KeyCodeUtils.fromUserSettings=function fromUserSettings(key){return userSettingsUSMap.strToKeyCode(key)||userSettingsGeneralMap.strToKeyCode(key)}}(KeyCodeUtils||(KeyCodeUtils={}));(function(){function SimpleKeybinding(ctrlKey,shiftKey,altKey,metaKey,keyCode){this.type=1,this.ctrlKey=ctrlKey,this.shiftKey=shiftKey,this.altKey=altKey,this.metaKey=metaKey,this.keyCode=keyCode}SimpleKeybinding.prototype.equals=function(other){return 1===other.type&&(this.ctrlKey===other.ctrlKey&&this.shiftKey===other.shiftKey&&this.altKey===other.altKey&&this.metaKey===other.metaKey&&this.keyCode===other.keyCode)},SimpleKeybinding.prototype.getHashCode=function(){return""+(this.ctrlKey?"1":"0")+(this.shiftKey?"1":"0")+(this.altKey?"1":"0")+(this.metaKey?"1":"0")+this.keyCode},SimpleKeybinding.prototype.isModifierKey=function(){return 0===this.keyCode||5===this.keyCode||57===this.keyCode||6===this.keyCode||4===this.keyCode},SimpleKeybinding.prototype.isDuplicateModifierCase=function(){return this.ctrlKey&&5===this.keyCode||this.shiftKey&&4===this.keyCode||this.altKey&&6===this.keyCode||this.metaKey&&57===this.keyCode}})(),function(){function ChordKeybinding(firstPart,chordPart){this.type=2,this.firstPart=firstPart,this.chordPart=chordPart}ChordKeybinding.prototype.getHashCode=function(){return this.firstPart.getHashCode()+";"+this.chordPart.getHashCode()}}();var SelectionDirection,selection_extends=function(){var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();!function(SelectionDirection){SelectionDirection[SelectionDirection.LTR=0]="LTR",SelectionDirection[SelectionDirection.RTL=1]="RTL"}(SelectionDirection||(SelectionDirection={}));var cancellation_CancellationToken,CancellationToken,selection_Selection=function(_super){function Selection(selectionStartLineNumber,selectionStartColumn,positionLineNumber,positionColumn){var _this=_super.call(this,selectionStartLineNumber,selectionStartColumn,positionLineNumber,positionColumn)||this;return _this.selectionStartLineNumber=selectionStartLineNumber,_this.selectionStartColumn=selectionStartColumn,_this.positionLineNumber=positionLineNumber,_this.positionColumn=positionColumn,_this}return selection_extends(Selection,_super),Selection.prototype.clone=function(){return new Selection(this.selectionStartLineNumber,this.selectionStartColumn,this.positionLineNumber,this.positionColumn)},Selection.prototype.toString=function(){return"["+this.selectionStartLineNumber+","+this.selectionStartColumn+" -> "+this.positionLineNumber+","+this.positionColumn+"]"},Selection.prototype.equalsSelection=function(other){return Selection.selectionsEqual(this,other)},Selection.selectionsEqual=function(a,b){return a.selectionStartLineNumber===b.selectionStartLineNumber&&a.selectionStartColumn===b.selectionStartColumn&&a.positionLineNumber===b.positionLineNumber&&a.positionColumn===b.positionColumn},Selection.prototype.getDirection=function(){return this.selectionStartLineNumber===this.startLineNumber&&this.selectionStartColumn===this.startColumn?SelectionDirection.LTR:SelectionDirection.RTL},Selection.prototype.setEndPosition=function(endLineNumber,endColumn){return this.getDirection()===SelectionDirection.LTR?new Selection(this.startLineNumber,this.startColumn,endLineNumber,endColumn):new Selection(endLineNumber,endColumn,this.startLineNumber,this.startColumn)},Selection.prototype.getPosition=function(){return new Position(this.positionLineNumber,this.positionColumn)},Selection.prototype.setStartPosition=function(startLineNumber,startColumn){return this.getDirection()===SelectionDirection.LTR?new Selection(startLineNumber,startColumn,this.endLineNumber,this.endColumn):new Selection(this.endLineNumber,this.endColumn,startLineNumber,startColumn)},Selection.fromPositions=function(start,end){return void 0===end&&(end=start),new Selection(start.lineNumber,start.column,end.lineNumber,end.column)},Selection.liftSelection=function(sel){return new Selection(sel.selectionStartLineNumber,sel.selectionStartColumn,sel.positionLineNumber,sel.positionColumn)},Selection.selectionsArrEqual=function(a,b){if(a&&!b||!a&&b)return!1;if(!a&&!b)return!0;if(a.length!==b.length)return!1;for(var i=0,len=a.length;i<len;i++)if(!this.selectionsEqual(a[i],b[i]))return!1;return!0},Selection.isISelection=function(obj){return obj&&"number"==typeof obj.selectionStartLineNumber&&"number"==typeof obj.selectionStartColumn&&"number"==typeof obj.positionLineNumber&&"number"==typeof obj.positionColumn},Selection.createWithDirection=function(startLineNumber,startColumn,endLineNumber,endColumn,direction){return direction===SelectionDirection.LTR?new Selection(startLineNumber,startColumn,endLineNumber,endColumn):new Selection(endLineNumber,endColumn,startLineNumber,startColumn)},Selection}(range_Range),shortcutEvent=Object.freeze((function(callback,context){var handle=setTimeout(callback.bind(context),0);return{dispose:function(){clearTimeout(handle)}}}));(CancellationToken=cancellation_CancellationToken||(cancellation_CancellationToken={})).None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:Event.None}),CancellationToken.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:shortcutEvent});var Severity,MarkerSeverity,cancellation_MutableToken=function(){function MutableToken(){this._isCancelled=!1}return MutableToken.prototype.cancel=function(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))},Object.defineProperty(MutableToken.prototype,"isCancellationRequested",{get:function(){return this._isCancelled},enumerable:!0,configurable:!0}),Object.defineProperty(MutableToken.prototype,"onCancellationRequested",{get:function(){return this._isCancelled?shortcutEvent:(this._emitter||(this._emitter=new event_Emitter),this._emitter.event)},enumerable:!0,configurable:!0}),MutableToken.prototype.dispose=function(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)},MutableToken}(),CancellationTokenSource=function(){function CancellationTokenSource(){}return Object.defineProperty(CancellationTokenSource.prototype,"token",{get:function(){return this._token||(this._token=new cancellation_MutableToken),this._token},enumerable:!0,configurable:!0}),CancellationTokenSource.prototype.cancel=function(){this._token?this._token instanceof cancellation_MutableToken&&this._token.cancel():this._token=cancellation_CancellationToken.Cancelled},CancellationTokenSource.prototype.dispose=function(){this._token?this._token instanceof cancellation_MutableToken&&this._token.dispose():this._token=cancellation_CancellationToken.None},CancellationTokenSource}(),Token=function(){function Token(offset,type,language){this.offset=0|offset,this.type=type,this.language=language}return Token.prototype.toString=function(){return"("+this.offset+", "+this.type+")"},Token}();!function(Severity){Severity[Severity.Ignore=0]="Ignore",Severity[Severity.Info=1]="Info",Severity[Severity.Warning=2]="Warning",Severity[Severity.Error=3]="Error"}(Severity||(Severity={})),function(MarkerSeverity){MarkerSeverity[MarkerSeverity.Hint=1]="Hint",MarkerSeverity[MarkerSeverity.Info=2]="Info",MarkerSeverity[MarkerSeverity.Warning=4]="Warning",MarkerSeverity[MarkerSeverity.Error=8]="Error"}(MarkerSeverity||(MarkerSeverity={}));var KeyCode,standaloneBase_KeyMod=function(){function KeyMod(){}return KeyMod.chord=function(firstPart,secondPart){return function KeyChord(firstPart,secondPart){return(firstPart|(65535&secondPart)<<16>>>0)>>>0}(firstPart,secondPart)},KeyMod.CtrlCmd=2048,KeyMod.Shift=1024,KeyMod.Alt=512,KeyMod.WinCtrl=256,KeyMod}();!function(KeyCode){KeyCode[KeyCode.Unknown=0]="Unknown",KeyCode[KeyCode.Backspace=1]="Backspace",KeyCode[KeyCode.Tab=2]="Tab",KeyCode[KeyCode.Enter=3]="Enter",KeyCode[KeyCode.Shift=4]="Shift",KeyCode[KeyCode.Ctrl=5]="Ctrl",KeyCode[KeyCode.Alt=6]="Alt",KeyCode[KeyCode.PauseBreak=7]="PauseBreak",KeyCode[KeyCode.CapsLock=8]="CapsLock",KeyCode[KeyCode.Escape=9]="Escape",KeyCode[KeyCode.Space=10]="Space",KeyCode[KeyCode.PageUp=11]="PageUp",KeyCode[KeyCode.PageDown=12]="PageDown",KeyCode[KeyCode.End=13]="End",KeyCode[KeyCode.Home=14]="Home",KeyCode[KeyCode.LeftArrow=15]="LeftArrow",KeyCode[KeyCode.UpArrow=16]="UpArrow",KeyCode[KeyCode.RightArrow=17]="RightArrow",KeyCode[KeyCode.DownArrow=18]="DownArrow",KeyCode[KeyCode.Insert=19]="Insert",KeyCode[KeyCode.Delete=20]="Delete",KeyCode[KeyCode.KEY_0=21]="KEY_0",KeyCode[KeyCode.KEY_1=22]="KEY_1",KeyCode[KeyCode.KEY_2=23]="KEY_2",KeyCode[KeyCode.KEY_3=24]="KEY_3",KeyCode[KeyCode.KEY_4=25]="KEY_4",KeyCode[KeyCode.KEY_5=26]="KEY_5",KeyCode[KeyCode.KEY_6=27]="KEY_6",KeyCode[KeyCode.KEY_7=28]="KEY_7",KeyCode[KeyCode.KEY_8=29]="KEY_8",KeyCode[KeyCode.KEY_9=30]="KEY_9",KeyCode[KeyCode.KEY_A=31]="KEY_A",KeyCode[KeyCode.KEY_B=32]="KEY_B",KeyCode[KeyCode.KEY_C=33]="KEY_C",KeyCode[KeyCode.KEY_D=34]="KEY_D",KeyCode[KeyCode.KEY_E=35]="KEY_E",KeyCode[KeyCode.KEY_F=36]="KEY_F",KeyCode[KeyCode.KEY_G=37]="KEY_G",KeyCode[KeyCode.KEY_H=38]="KEY_H",KeyCode[KeyCode.KEY_I=39]="KEY_I",KeyCode[KeyCode.KEY_J=40]="KEY_J",KeyCode[KeyCode.KEY_K=41]="KEY_K",KeyCode[KeyCode.KEY_L=42]="KEY_L",KeyCode[KeyCode.KEY_M=43]="KEY_M",KeyCode[KeyCode.KEY_N=44]="KEY_N",KeyCode[KeyCode.KEY_O=45]="KEY_O",KeyCode[KeyCode.KEY_P=46]="KEY_P",KeyCode[KeyCode.KEY_Q=47]="KEY_Q",KeyCode[KeyCode.KEY_R=48]="KEY_R",KeyCode[KeyCode.KEY_S=49]="KEY_S",KeyCode[KeyCode.KEY_T=50]="KEY_T",KeyCode[KeyCode.KEY_U=51]="KEY_U",KeyCode[KeyCode.KEY_V=52]="KEY_V",KeyCode[KeyCode.KEY_W=53]="KEY_W",KeyCode[KeyCode.KEY_X=54]="KEY_X",KeyCode[KeyCode.KEY_Y=55]="KEY_Y",KeyCode[KeyCode.KEY_Z=56]="KEY_Z",KeyCode[KeyCode.Meta=57]="Meta",KeyCode[KeyCode.ContextMenu=58]="ContextMenu",KeyCode[KeyCode.F1=59]="F1",KeyCode[KeyCode.F2=60]="F2",KeyCode[KeyCode.F3=61]="F3",KeyCode[KeyCode.F4=62]="F4",KeyCode[KeyCode.F5=63]="F5",KeyCode[KeyCode.F6=64]="F6",KeyCode[KeyCode.F7=65]="F7",KeyCode[KeyCode.F8=66]="F8",KeyCode[KeyCode.F9=67]="F9",KeyCode[KeyCode.F10=68]="F10",KeyCode[KeyCode.F11=69]="F11",KeyCode[KeyCode.F12=70]="F12",KeyCode[KeyCode.F13=71]="F13",KeyCode[KeyCode.F14=72]="F14",KeyCode[KeyCode.F15=73]="F15",KeyCode[KeyCode.F16=74]="F16",KeyCode[KeyCode.F17=75]="F17",KeyCode[KeyCode.F18=76]="F18",KeyCode[KeyCode.F19=77]="F19",KeyCode[KeyCode.NumLock=78]="NumLock",KeyCode[KeyCode.ScrollLock=79]="ScrollLock",KeyCode[KeyCode.US_SEMICOLON=80]="US_SEMICOLON",KeyCode[KeyCode.US_EQUAL=81]="US_EQUAL",KeyCode[KeyCode.US_COMMA=82]="US_COMMA",KeyCode[KeyCode.US_MINUS=83]="US_MINUS",KeyCode[KeyCode.US_DOT=84]="US_DOT",KeyCode[KeyCode.US_SLASH=85]="US_SLASH",KeyCode[KeyCode.US_BACKTICK=86]="US_BACKTICK",KeyCode[KeyCode.US_OPEN_SQUARE_BRACKET=87]="US_OPEN_SQUARE_BRACKET",KeyCode[KeyCode.US_BACKSLASH=88]="US_BACKSLASH",KeyCode[KeyCode.US_CLOSE_SQUARE_BRACKET=89]="US_CLOSE_SQUARE_BRACKET",KeyCode[KeyCode.US_QUOTE=90]="US_QUOTE",KeyCode[KeyCode.OEM_8=91]="OEM_8",KeyCode[KeyCode.OEM_102=92]="OEM_102",KeyCode[KeyCode.NUMPAD_0=93]="NUMPAD_0",KeyCode[KeyCode.NUMPAD_1=94]="NUMPAD_1",KeyCode[KeyCode.NUMPAD_2=95]="NUMPAD_2",KeyCode[KeyCode.NUMPAD_3=96]="NUMPAD_3",KeyCode[KeyCode.NUMPAD_4=97]="NUMPAD_4",KeyCode[KeyCode.NUMPAD_5=98]="NUMPAD_5",KeyCode[KeyCode.NUMPAD_6=99]="NUMPAD_6",KeyCode[KeyCode.NUMPAD_7=100]="NUMPAD_7",KeyCode[KeyCode.NUMPAD_8=101]="NUMPAD_8",KeyCode[KeyCode.NUMPAD_9=102]="NUMPAD_9",KeyCode[KeyCode.NUMPAD_MULTIPLY=103]="NUMPAD_MULTIPLY",KeyCode[KeyCode.NUMPAD_ADD=104]="NUMPAD_ADD",KeyCode[KeyCode.NUMPAD_SEPARATOR=105]="NUMPAD_SEPARATOR",KeyCode[KeyCode.NUMPAD_SUBTRACT=106]="NUMPAD_SUBTRACT",KeyCode[KeyCode.NUMPAD_DECIMAL=107]="NUMPAD_DECIMAL",KeyCode[KeyCode.NUMPAD_DIVIDE=108]="NUMPAD_DIVIDE",KeyCode[KeyCode.KEY_IN_COMPOSITION=109]="KEY_IN_COMPOSITION",KeyCode[KeyCode.ABNT_C1=110]="ABNT_C1",KeyCode[KeyCode.ABNT_C2=111]="ABNT_C2",KeyCode[KeyCode.MAX_VALUE=112]="MAX_VALUE"}(KeyCode||(KeyCode={}));var editorSimpleWorker_extends=function(){var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),editorSimpleWorker_MirrorModel=function(_super){function MirrorModel(){return null!==_super&&_super.apply(this,arguments)||this}return editorSimpleWorker_extends(MirrorModel,_super),Object.defineProperty(MirrorModel.prototype,"uri",{get:function(){return this._uri},enumerable:!0,configurable:!0}),Object.defineProperty(MirrorModel.prototype,"version",{get:function(){return this._versionId},enumerable:!0,configurable:!0}),Object.defineProperty(MirrorModel.prototype,"eol",{get:function(){return this._eol},enumerable:!0,configurable:!0}),MirrorModel.prototype.getValue=function(){return this.getText()},MirrorModel.prototype.getLinesContent=function(){return this._lines.slice(0)},MirrorModel.prototype.getLineCount=function(){return this._lines.length},MirrorModel.prototype.getLineContent=function(lineNumber){return this._lines[lineNumber-1]},MirrorModel.prototype.getWordAtPosition=function(position,wordDefinition){var wordAtText=function getWordAtText(column,wordDefinition,text,textOffset){wordDefinition.lastIndex=0;var match=wordDefinition.exec(text);if(!match)return null;var ret=match[0].indexOf(" ")>=0?function getWordAtPosSlow(column,wordDefinition,text,textOffset){var match,pos=column-1-textOffset;for(wordDefinition.lastIndex=0;match=wordDefinition.exec(text);){if(match.index>pos)return null;if(wordDefinition.lastIndex>=pos)return{word:match[0],startColumn:textOffset+1+match.index,endColumn:textOffset+1+wordDefinition.lastIndex}}return null}(column,wordDefinition,text,textOffset):function getWordAtPosFast(column,wordDefinition,text,textOffset){var match,pos=column-1-textOffset,start=text.lastIndexOf(" ",pos-1)+1,end=text.indexOf(" ",pos);for(-1===end&&(end=text.length),wordDefinition.lastIndex=start;match=wordDefinition.exec(text);)if(match.index<=pos&&wordDefinition.lastIndex>=pos)return{word:match[0],startColumn:textOffset+1+match.index,endColumn:textOffset+1+wordDefinition.lastIndex};return null}(column,wordDefinition,text,textOffset);return wordDefinition.lastIndex=0,ret}(position.column,function ensureValidWordDefinition(wordDefinition){var result=DEFAULT_WORD_REGEXP;if(wordDefinition&&wordDefinition instanceof RegExp)if(wordDefinition.global)result=wordDefinition;else{var flags="g";wordDefinition.ignoreCase&&(flags+="i"),wordDefinition.multiline&&(flags+="m"),result=new RegExp(wordDefinition.source,flags)}return result.lastIndex=0,result}(wordDefinition),this._lines[position.lineNumber-1],0);return wordAtText?new range_Range(position.lineNumber,wordAtText.startColumn,position.lineNumber,wordAtText.endColumn):null},MirrorModel.prototype.getWordUntilPosition=function(position,wordDefinition){var wordAtPosition=this.getWordAtPosition(position,wordDefinition);return wordAtPosition?{word:this._lines[position.lineNumber-1].substring(wordAtPosition.startColumn-1,position.column-1),startColumn:wordAtPosition.startColumn,endColumn:position.column}:{word:"",startColumn:position.column,endColumn:position.column}},MirrorModel.prototype.createWordIterator=function(wordDefinition){var lineText,_this=this,obj={done:!1,value:""},lineNumber=0,wordRangesIdx=0,wordRanges=[],next=function(){if(wordRangesIdx<wordRanges.length)obj.done=!1,obj.value=lineText.substring(wordRanges[wordRangesIdx].start,wordRanges[wordRangesIdx].end),wordRangesIdx+=1;else{if(!(lineNumber>=_this._lines.length))return lineText=_this._lines[lineNumber],wordRanges=_this._wordenize(lineText,wordDefinition),wordRangesIdx=0,lineNumber+=1,next();obj.done=!0,obj.value=void 0}return obj};return{next:next}},MirrorModel.prototype._wordenize=function(content,wordDefinition){var match,result=[];for(wordDefinition.lastIndex=0;(match=wordDefinition.exec(content))&&0!==match[0].length;)result.push({start:match.index,end:match.index+match[0].length});return result},MirrorModel.prototype.getValueInRange=function(range){if((range=this._validateRange(range)).startLineNumber===range.endLineNumber)return this._lines[range.startLineNumber-1].substring(range.startColumn-1,range.endColumn-1);var lineEnding=this._eol,startLineIndex=range.startLineNumber-1,endLineIndex=range.endLineNumber-1,resultLines=[];resultLines.push(this._lines[startLineIndex].substring(range.startColumn-1));for(var i=startLineIndex+1;i<endLineIndex;i++)resultLines.push(this._lines[i]);return resultLines.push(this._lines[endLineIndex].substring(0,range.endColumn-1)),resultLines.join(lineEnding)},MirrorModel.prototype.offsetAt=function(position){return position=this._validatePosition(position),this._ensureLineStarts(),this._lineStarts.getAccumulatedValue(position.lineNumber-2)+(position.column-1)},MirrorModel.prototype.positionAt=function(offset){offset=Math.floor(offset),offset=Math.max(0,offset),this._ensureLineStarts();var out=this._lineStarts.getIndexOf(offset),lineLength=this._lines[out.index].length;return{lineNumber:1+out.index,column:1+Math.min(out.remainder,lineLength)}},MirrorModel.prototype._validateRange=function(range){var start=this._validatePosition({lineNumber:range.startLineNumber,column:range.startColumn}),end=this._validatePosition({lineNumber:range.endLineNumber,column:range.endColumn});return start.lineNumber!==range.startLineNumber||start.column!==range.startColumn||end.lineNumber!==range.endLineNumber||end.column!==range.endColumn?{startLineNumber:start.lineNumber,startColumn:start.column,endLineNumber:end.lineNumber,endColumn:end.column}:range},MirrorModel.prototype._validatePosition=function(position){if(!Position.isIPosition(position))throw new Error("bad position");var lineNumber=position.lineNumber,column=position.column,hasChanged=!1;if(lineNumber<1)lineNumber=1,column=1,hasChanged=!0;else if(lineNumber>this._lines.length)lineNumber=this._lines.length,column=this._lines[lineNumber-1].length+1,hasChanged=!0;else{var maxCharacter=this._lines[lineNumber-1].length+1;column<1?(column=1,hasChanged=!0):column>maxCharacter&&(column=maxCharacter,hasChanged=!0)}return hasChanged?{lineNumber:lineNumber,column:column}:position},MirrorModel}(mirrorTextModel_MirrorTextModel),editorSimpleWorker_EditorSimpleWorkerImpl=function(_super){function EditorSimpleWorkerImpl(foreignModuleFactory){var _this=_super.call(this,foreignModuleFactory)||this;return _this._models=Object.create(null),_this}return editorSimpleWorker_extends(EditorSimpleWorkerImpl,_super),EditorSimpleWorkerImpl.prototype.dispose=function(){this._models=Object.create(null)},EditorSimpleWorkerImpl.prototype._getModel=function(uri){return this._models[uri]},EditorSimpleWorkerImpl.prototype._getModels=function(){var _this=this,all=[];return Object.keys(this._models).forEach((function(key){return all.push(_this._models[key])})),all},EditorSimpleWorkerImpl.prototype.acceptNewModel=function(data){this._models[data.url]=new editorSimpleWorker_MirrorModel(common_uri.parse(data.url),data.lines,data.EOL,data.versionId)},EditorSimpleWorkerImpl.prototype.acceptModelChanged=function(strURL,e){this._models[strURL]&&this._models[strURL].onEvents(e)},EditorSimpleWorkerImpl.prototype.acceptRemovedModel=function(strURL){this._models[strURL]&&delete this._models[strURL]},EditorSimpleWorkerImpl}(function(){function BaseEditorSimpleWorker(foreignModuleFactory){this._foreignModuleFactory=foreignModuleFactory,this._foreignModule=null}return BaseEditorSimpleWorker.prototype.computeDiff=function(originalUrl,modifiedUrl,ignoreTrimWhitespace){var original=this._getModel(originalUrl),modified=this._getModel(modifiedUrl);if(!original||!modified)return null;var originalLines=original.getLinesContent(),modifiedLines=modified.getLinesContent(),diffComputer=new DiffComputer(originalLines,modifiedLines,{shouldPostProcessCharChanges:!0,shouldIgnoreTrimWhitespace:ignoreTrimWhitespace,shouldMakePrettyDiff:!0});return winjs_base.b.as(diffComputer.computeDiff())},BaseEditorSimpleWorker.prototype.computeDirtyDiff=function(originalUrl,modifiedUrl,ignoreTrimWhitespace){var original=this._getModel(originalUrl),modified=this._getModel(modifiedUrl);if(!original||!modified)return null;var originalLines=original.getLinesContent(),modifiedLines=modified.getLinesContent(),diffComputer=new DiffComputer(originalLines,modifiedLines,{shouldPostProcessCharChanges:!1,shouldIgnoreTrimWhitespace:ignoreTrimWhitespace,shouldMakePrettyDiff:!0});return winjs_base.b.as(diffComputer.computeDiff())},BaseEditorSimpleWorker.prototype.computeMoreMinimalEdits=function(modelUrl,edits){var model=this._getModel(modelUrl);if(!model)return winjs_base.b.as(edits);for(var lastEol,result=[],_i=0,edits_1=edits;_i<edits_1.length;_i++){var _a=edits_1[_i],range=_a.range,text=_a.text,eol=_a.eol;if("number"==typeof eol&&(lastEol=eol),range){var original=model.getValueInRange(range);if(original!==(text=text.replace(/\r\n|\n|\r/g,model.eol)))if(Math.max(text.length,original.length)>BaseEditorSimpleWorker._diffLimit)result.push({range:range,text:text});else for(var changes=stringDiff(original,text,!1),editOffset=model.offsetAt(range_Range.lift(range).getStartPosition()),_b=0,changes_1=changes;_b<changes_1.length;_b++){var change=changes_1[_b],start=model.positionAt(editOffset+change.originalStart),end=model.positionAt(editOffset+change.originalStart+change.originalLength),newEdit={text:text.substr(change.modifiedStart,change.modifiedLength),range:{startLineNumber:start.lineNumber,startColumn:start.column,endLineNumber:end.lineNumber,endColumn:end.column}};model.getValueInRange(newEdit.range)!==newEdit.text&&result.push(newEdit)}}}return"number"==typeof lastEol&&result.push({eol:lastEol,text:void 0,range:void 0}),winjs_base.b.as(result)},BaseEditorSimpleWorker.prototype.computeLinks=function(modelUrl){var model=this._getModel(modelUrl);return model?winjs_base.b.as(function computeLinks(model){return model&&"function"==typeof model.getLineCount&&"function"==typeof model.getLineContent?LinkComputer.computeLinks(model):[]}(model)):null},BaseEditorSimpleWorker.prototype.textualSuggest=function(modelUrl,position,wordDef,wordDefFlags){var model=this._getModel(modelUrl);if(model){var suggestions=[],wordDefRegExp=new RegExp(wordDef,wordDefFlags),currentWord=model.getWordUntilPosition(position,wordDefRegExp).word,seen=Object.create(null);seen[currentWord]=!0;for(var iter=model.createWordIterator(wordDefRegExp),e=iter.next();!e.done&&suggestions.length<=BaseEditorSimpleWorker._suggestionsLimit;e=iter.next()){var word=e.value;seen[word]||(seen[word]=!0,isNaN(Number(word))&&suggestions.push({type:"text",label:word,insertText:word,noAutoAccept:!0,overwriteBefore:currentWord.length}))}return winjs_base.b.as({suggestions:suggestions})}},BaseEditorSimpleWorker.prototype.navigateValueSet=function(modelUrl,range,up,wordDef,wordDefFlags){var model=this._getModel(modelUrl);if(!model)return null;var wordDefRegExp=new RegExp(wordDef,wordDefFlags);range.startColumn===range.endColumn&&(range={startLineNumber:range.startLineNumber,startColumn:range.startColumn,endLineNumber:range.endLineNumber,endColumn:range.endColumn+1});var selectionText=model.getValueInRange(range),wordRange=model.getWordAtPosition({lineNumber:range.startLineNumber,column:range.startColumn},wordDefRegExp),word=null;null!==wordRange&&(word=model.getValueInRange(wordRange));var result=BasicInplaceReplace.INSTANCE.navigateValueSet(range,selectionText,wordRange,word,up);return winjs_base.b.as(result)},BaseEditorSimpleWorker.prototype.loadForeignModule=function(moduleId,createData){var _this=this,ctx={getMirrorModels:function(){return _this._getModels()}};if(this._foreignModuleFactory){this._foreignModule=this._foreignModuleFactory(ctx,createData);var methods=[];for(var prop in this._foreignModule)"function"==typeof this._foreignModule[prop]&&methods.push(prop);return winjs_base.b.as(methods)}return new winjs_base.b((function(c,e){Promise.resolve().then((function(){var __WEBPACK_AMD_REQUIRE_ARRAY__=[__webpack_require__("smNY")(moduleId)];(function(foreignModule){_this._foreignModule=foreignModule.create(ctx,createData);var methods=[];for(var prop in _this._foreignModule)"function"==typeof _this._foreignModule[prop]&&methods.push(prop);c(methods)}).apply(null,__WEBPACK_AMD_REQUIRE_ARRAY__)})).catch(e.bind(this))}))},BaseEditorSimpleWorker.prototype.fmr=function(method,args){if(!this._foreignModule||"function"!=typeof this._foreignModule[method])return winjs_base.b.wrapError(new Error("Missing requestHandler or method: "+method));try{return winjs_base.b.as(this._foreignModule[method].apply(this._foreignModule,args))}catch(e){return winjs_base.b.wrapError(e)}},BaseEditorSimpleWorker._diffLimit=1e4,BaseEditorSimpleWorker._suggestionsLimit=1e4,BaseEditorSimpleWorker}());"function"==typeof importScripts&&(platform.a.monaco=function createMonacoBaseAPI(){return{editor:void 0,languages:void 0,CancellationTokenSource:CancellationTokenSource,Emitter:event_Emitter,KeyCode:KeyCode,KeyMod:standaloneBase_KeyMod,Position:Position,Range:range_Range,Selection:selection_Selection,SelectionDirection:SelectionDirection,Severity:Severity,MarkerSeverity:MarkerSeverity,Promise:winjs_base.b,Uri:common_uri,Token:Token}}());var async_extends=function(){var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();var async_Throttler=function(){function Throttler(){this.activePromise=null,this.queuedPromise=null,this.queuedPromiseFactory=null}return Throttler.prototype.queue=function(promiseFactory){var _this=this;if(this.activePromise){if(this.queuedPromiseFactory=promiseFactory,!this.queuedPromise){var onComplete_1=function(){_this.queuedPromise=null;var result=_this.queue(_this.queuedPromiseFactory);return _this.queuedPromiseFactory=null,result};this.queuedPromise=new winjs_base.b((function(c,e,p){_this.activePromise.then(onComplete_1,onComplete_1,p).done(c)}),(function(){_this.activePromise.cancel()}))}return new winjs_base.b((function(c,e,p){_this.queuedPromise.then(c,e,p)}),(function(){}))}return this.activePromise=promiseFactory(),new winjs_base.b((function(c,e,p){_this.activePromise.done((function(result){_this.activePromise=null,c(result)}),(function(err){_this.activePromise=null,e(err)}),p)}),(function(){_this.activePromise.cancel()}))},Throttler}(),async_ShallowCancelThenPromise=(function(){function SimpleThrottler(){this.current=winjs_base.b.wrap(null)}SimpleThrottler.prototype.queue=function(promiseTask){return this.current=this.current.then((function(){return promiseTask()}))}}(),function(_super){function ThrottledDelayer(defaultDelay){var _this=_super.call(this,defaultDelay)||this;return _this.throttler=new async_Throttler,_this}async_extends(ThrottledDelayer,_super),ThrottledDelayer.prototype.trigger=function(promiseFactory,delay){var _this=this;return _super.prototype.trigger.call(this,(function(){return _this.throttler.queue(promiseFactory)}),delay)}}(function(){function Delayer(defaultDelay){this.defaultDelay=defaultDelay,this.timeout=null,this.completionPromise=null,this.onSuccess=null,this.task=null}return Delayer.prototype.trigger=function(task,delay){var _this=this;return void 0===delay&&(delay=this.defaultDelay),this.task=task,this.cancelTimeout(),this.completionPromise||(this.completionPromise=new winjs_base.b((function(c){_this.onSuccess=c}),(function(){})).then((function(){_this.completionPromise=null,_this.onSuccess=null;var task=_this.task;return _this.task=null,task()}))),this.timeout=setTimeout((function(){_this.timeout=null,_this.onSuccess(null)}),delay),this.completionPromise},Delayer.prototype.isTriggered=function(){return null!==this.timeout},Delayer.prototype.cancel=function(){this.cancelTimeout(),this.completionPromise&&(this.completionPromise.cancel(),this.completionPromise=null)},Delayer.prototype.cancelTimeout=function(){null!==this.timeout&&(clearTimeout(this.timeout),this.timeout=null)},Delayer}()),function(){function Barrier(){var _this=this;this._isOpen=!1,this._promise=new winjs_base.b((function(c,e,p){_this._completePromise=c}),(function(){console.warn("You should really not try to cancel this ready promise!")}))}Barrier.prototype.isOpen=function(){return this._isOpen},Barrier.prototype.open=function(){this._isOpen=!0,this._completePromise(!0)},Barrier.prototype.wait=function(){return this._promise}}(),function(_super){function ShallowCancelThenPromise(outer){var _this,completeCallback,errorCallback,progressCallback;return _this=_super.call(this,(function(c,e,p){completeCallback=c,errorCallback=e,progressCallback=p}),(function(){errorCallback(function canceled(){var error=new Error("Canceled");return error.name=error.message,error}())}))||this,outer.then(completeCallback,errorCallback,progressCallback),_this}return async_extends(ShallowCancelThenPromise,_super),ShallowCancelThenPromise}(winjs_base.b));function always(winjsPromiseOrPromiseLike,f){return function isWinJSPromise(candidate){return winjs_base.b.is(candidate)&&"function"==typeof candidate.done}(winjsPromiseOrPromiseLike)?new winjs_base.b((function(c,e,p){winjsPromiseOrPromiseLike.done((function(result){try{f(result)}catch(e1){onUnexpectedError(e1)}c(result)}),(function(err){try{f(err)}catch(e1){onUnexpectedError(e1)}e(err)}),(function(progress){p(progress)}))}),(function(){winjsPromiseOrPromiseLike.cancel()})):(winjsPromiseOrPromiseLike.then((function(_){return f()}),(function(_){return f()})),winjsPromiseOrPromiseLike)}var Queue=function(_super){function Queue(){return _super.call(this,1)||this}return async_extends(Queue,_super),Queue}(function(){function Limiter(maxDegreeOfParalellism){this.maxDegreeOfParalellism=maxDegreeOfParalellism,this.outstandingPromises=[],this.runningPromises=0,this._onFinished=new event_Emitter}return Object.defineProperty(Limiter.prototype,"onFinished",{get:function(){return this._onFinished.event},enumerable:!0,configurable:!0}),Object.defineProperty(Limiter.prototype,"size",{get:function(){return this.runningPromises+this.outstandingPromises.length},enumerable:!0,configurable:!0}),Limiter.prototype.queue=function(promiseFactory){var _this=this;return new winjs_base.b((function(c,e,p){_this.outstandingPromises.push({factory:promiseFactory,c:c,e:e,p:p}),_this.consume()}))},Limiter.prototype.consume=function(){for(var _this=this;this.outstandingPromises.length&&this.runningPromises<this.maxDegreeOfParalellism;){var iLimitedTask=this.outstandingPromises.shift();this.runningPromises++;var promise=iLimitedTask.factory();promise.done(iLimitedTask.c,iLimitedTask.e,iLimitedTask.p),promise.done((function(){return _this.consumed()}),(function(){return _this.consumed()}))}},Limiter.prototype.consumed=function(){this.runningPromises--,this.outstandingPromises.length>0?this.consume():this._onFinished.fire()},Limiter.prototype.dispose=function(){this._onFinished.dispose()},Limiter}());!function(){function ResourceQueue(){this.queues=Object.create(null)}ResourceQueue.prototype.queueFor=function(resource){var _this=this,key=resource.toString();if(!this.queues[key]){var queue_1=new Queue;queue_1.onFinished((function(){queue_1.dispose(),delete _this.queues[key]})),this.queues[key]=queue_1}return this.queues[key]}}();(function(_super){function TimeoutTimer(){var _this=_super.call(this)||this;return _this._token=-1,_this}async_extends(TimeoutTimer,_super),TimeoutTimer.prototype.dispose=function(){this.cancel(),_super.prototype.dispose.call(this)},TimeoutTimer.prototype.cancel=function(){-1!==this._token&&(clearTimeout(this._token),this._token=-1)},TimeoutTimer.prototype.cancelAndSet=function(runner,timeout){var _this=this;this.cancel(),this._token=setTimeout((function(){_this._token=-1,runner()}),timeout)},TimeoutTimer.prototype.setIfNotSet=function(runner,timeout){var _this=this;-1===this._token&&(this._token=setTimeout((function(){_this._token=-1,runner()}),timeout))}})(Disposable),function(_super){function IntervalTimer(){var _this=_super.call(this)||this;return _this._token=-1,_this}async_extends(IntervalTimer,_super),IntervalTimer.prototype.dispose=function(){this.cancel(),_super.prototype.dispose.call(this)},IntervalTimer.prototype.cancel=function(){-1!==this._token&&(clearInterval(this._token),this._token=-1)},IntervalTimer.prototype.cancelAndSet=function(runner,interval){this.cancel(),this._token=setInterval((function(){runner()}),interval)}}(Disposable),function(){function RunOnceScheduler(runner,timeout){this.timeoutToken=-1,this.runner=runner,this.timeout=timeout,this.timeoutHandler=this.onTimeout.bind(this)}RunOnceScheduler.prototype.dispose=function(){this.cancel(),this.runner=null},RunOnceScheduler.prototype.cancel=function(){this.isScheduled()&&(clearTimeout(this.timeoutToken),this.timeoutToken=-1)},RunOnceScheduler.prototype.schedule=function(delay){void 0===delay&&(delay=this.timeout),this.cancel(),this.timeoutToken=setTimeout(this.timeoutHandler,delay)},RunOnceScheduler.prototype.isScheduled=function(){return-1!==this.timeoutToken},RunOnceScheduler.prototype.onTimeout=function(){this.timeoutToken=-1,this.runner&&this.runner()}}();!function(_super){function ThrottledEmitter(){return null!==_super&&_super.apply(this,arguments)||this}async_extends(ThrottledEmitter,_super),ThrottledEmitter.prototype.throttle=function(promise){var _this=this;return this.suspended=!0,always(promise,(function(){return _this.resume()}))},ThrottledEmitter.prototype.fire=function(event){return this.suspended?(this.lastEvent=event,void(this.hasLastEvent=!0)):_super.prototype.fire.call(this,event)},ThrottledEmitter.prototype.resume=function(){this.suspended=!1,this.hasLastEvent&&this.fire(this.lastEvent),this.hasLastEvent=!1,this.lastEvent=void 0}}(event_Emitter);var simpleWorker_extends=function(){var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();var simpleWorker_SimpleWorkerProtocol=function(){function SimpleWorkerProtocol(handler){this._workerId=-1,this._handler=handler,this._lastSentReq=0,this._pendingReplies=Object.create(null)}return SimpleWorkerProtocol.prototype.setWorkerId=function(workerId){this._workerId=workerId},SimpleWorkerProtocol.prototype.sendMessage=function(method,args){var req=String(++this._lastSentReq),reply={c:null,e:null},result=new winjs_base.b((function(c,e,p){reply.c=c,reply.e=e}),(function(){}));return this._pendingReplies[req]=reply,this._send({vsWorker:this._workerId,req:req,method:method,args:args}),result},SimpleWorkerProtocol.prototype.handleMessage=function(serializedMessage){var message;try{message=JSON.parse(serializedMessage)}catch(e){}message&&message.vsWorker&&(-1!==this._workerId&&message.vsWorker!==this._workerId||this._handleMessage(message))},SimpleWorkerProtocol.prototype._handleMessage=function(msg){var _this=this;if(msg.seq){var replyMessage=msg;if(!this._pendingReplies[replyMessage.seq])return void console.warn("Got reply to unknown seq");var reply=this._pendingReplies[replyMessage.seq];if(delete this._pendingReplies[replyMessage.seq],replyMessage.err){var err=replyMessage.err;return replyMessage.err.$isError&&((err=new Error).name=replyMessage.err.name,err.message=replyMessage.err.message,err.stack=replyMessage.err.stack),void reply.e(err)}reply.c(replyMessage.res)}else{var requestMessage=msg,req=requestMessage.req;this._handler.handleMessage(requestMessage.method,requestMessage.args).then((function(r){_this._send({vsWorker:_this._workerId,seq:req,res:r,err:void 0})}),(function(e){e.detail instanceof Error&&(e.detail=transformErrorForSerialization(e.detail)),_this._send({vsWorker:_this._workerId,seq:req,res:void 0,err:transformErrorForSerialization(e)})}))}},SimpleWorkerProtocol.prototype._send=function(msg){var strMsg=JSON.stringify(msg);this._handler.sendMessage(strMsg)},SimpleWorkerProtocol}(),simpleWorker_SimpleWorkerServer=(function(_super){function SimpleWorkerClient(workerFactory,moduleId){var _this=_super.call(this)||this,lazyProxyFulfill=null,lazyProxyReject=null;_this._worker=_this._register(workerFactory.create("vs/base/common/worker/simpleWorker",(function(msg){_this._protocol.handleMessage(msg)}),(function(err){lazyProxyReject(err)}))),_this._protocol=new simpleWorker_SimpleWorkerProtocol({sendMessage:function(msg){_this._worker.postMessage(msg)},handleMessage:function(method,args){return winjs_base.b.as(null)}}),_this._protocol.setWorkerId(_this._worker.getId());var loaderConfiguration=null;void 0!==self.require&&"function"==typeof self.require.getConfig?loaderConfiguration=self.require.getConfig():void 0!==self.requirejs&&(loaderConfiguration=self.requirejs.s.contexts._.config),_this._lazyProxy=new winjs_base.b((function(c,e,p){lazyProxyFulfill=c,lazyProxyReject=e}),(function(){})),_this._onModuleLoaded=_this._protocol.sendMessage("$initialize",[_this._worker.getId(),moduleId,loaderConfiguration]),_this._onModuleLoaded.then((function(availableMethods){for(var proxy={},i=0;i<availableMethods.length;i++)proxy[availableMethods[i]]=createProxyMethod(availableMethods[i],proxyMethodRequest);lazyProxyFulfill(proxy)}),(function(e){lazyProxyReject(e),_this._onError("Worker failed to load "+moduleId,e)}));var proxyMethodRequest=function(method,args){return _this._request(method,args)},createProxyMethod=function(method,proxyMethodRequest){return function(){var args=Array.prototype.slice.call(arguments,0);return proxyMethodRequest(method,args)}};return _this}simpleWorker_extends(SimpleWorkerClient,_super),SimpleWorkerClient.prototype.getProxyObject=function(){return new async_ShallowCancelThenPromise(this._lazyProxy)},SimpleWorkerClient.prototype._request=function(method,args){var _this=this;return new winjs_base.b((function(c,e,p){_this._onModuleLoaded.then((function(){_this._protocol.sendMessage(method,args).then(c,e)}),e)}),(function(){}))},SimpleWorkerClient.prototype._onError=function(message,error){console.error(message),console.info(error)}}(Disposable),function(){function SimpleWorkerServer(postSerializedMessage,requestHandler){var _this=this;this._requestHandler=requestHandler,this._protocol=new simpleWorker_SimpleWorkerProtocol({sendMessage:function(msg){postSerializedMessage(msg)},handleMessage:function(method,args){return _this._handleMessage(method,args)}})}return SimpleWorkerServer.prototype.onmessage=function(msg){this._protocol.handleMessage(msg)},SimpleWorkerServer.prototype._handleMessage=function(method,args){if("$initialize"===method)return this.initialize(args[0],args[1],args[2]);if(!this._requestHandler||"function"!=typeof this._requestHandler[method])return winjs_base.b.wrapError(new Error("Missing requestHandler or method: "+method));try{return winjs_base.b.as(this._requestHandler[method].apply(this._requestHandler,args))}catch(e){return winjs_base.b.wrapError(e)}},SimpleWorkerServer.prototype.initialize=function(workerId,moduleId,loaderConfig){var cc,ee,_this=this;if(this._protocol.setWorkerId(workerId),this._requestHandler){var methods=[];for(var prop in this._requestHandler)"function"==typeof this._requestHandler[prop]&&methods.push(prop);return winjs_base.b.as(methods)}loaderConfig&&(void 0!==loaderConfig.baseUrl&&delete loaderConfig.baseUrl,void 0!==loaderConfig.paths&&void 0!==loaderConfig.paths.vs&&delete loaderConfig.paths.vs,loaderConfig.catchError=!0,self.require.config(loaderConfig));var r=new winjs_base.b((function(c,e,p){cc=c,ee=e}));return self.require([moduleId],(function(){for(var result=[],_i=0;_i<arguments.length;_i++)result[_i]=arguments[_i];var handlerModule=result[0];_this._requestHandler=handlerModule.create();var methods=[];for(var prop in _this._requestHandler)"function"==typeof _this._requestHandler[prop]&&methods.push(prop);cc(methods)}),ee),r},SimpleWorkerServer}());var main_Position,main_Range,Range,Location,DiagnosticSeverity,Diagnostic,Command,TextEdit,TextDocumentEdit,initialized=!1;function initialize(foreignModule){if(!initialized){initialized=!0;var editorWorker=new editorSimpleWorker_EditorSimpleWorkerImpl(foreignModule),simpleWorker=new simpleWorker_SimpleWorkerServer((function(msg){self.postMessage(msg)}),editorWorker);self.onmessage=function(e){simpleWorker.onmessage(e.data)}}}self.onmessage=function(e){initialized||initialize(null)},function(Position){Position.create=function create(line,character){return{line:line,character:character}},Position.is=function is(value){var candidate=value;return Is.defined(candidate)&&Is.number(candidate.line)&&Is.number(candidate.character)}}(main_Position||(main_Position={})),(Range=main_Range||(main_Range={})).create=function create(one,two,three,four){if(Is.number(one)&&Is.number(two)&&Is.number(three)&&Is.number(four))return{start:main_Position.create(one,two),end:main_Position.create(three,four)};if(main_Position.is(one)&&main_Position.is(two))return{start:one,end:two};throw new Error("Range#create called with invalid arguments["+one+", "+two+", "+three+", "+four+"]")},Range.is=function is(value){var candidate=value;return Is.defined(candidate)&&main_Position.is(candidate.start)&&main_Position.is(candidate.end)},function(Location){Location.create=function create(uri,range){return{uri:uri,range:range}},Location.is=function is(value){var candidate=value;return Is.defined(candidate)&&main_Range.is(candidate.range)&&(Is.string(candidate.uri)||Is.undefined(candidate.uri))}}(Location||(Location={})),function(DiagnosticSeverity){DiagnosticSeverity.Error=1,DiagnosticSeverity.Warning=2,DiagnosticSeverity.Information=3,DiagnosticSeverity.Hint=4}(DiagnosticSeverity||(DiagnosticSeverity={})),function(Diagnostic){Diagnostic.create=function create(range,message,severity,code,source){var result={range:range,message:message};return Is.defined(severity)&&(result.severity=severity),Is.defined(code)&&(result.code=code),Is.defined(source)&&(result.source=source),result},Diagnostic.is=function is(value){var candidate=value;return Is.defined(candidate)&&main_Range.is(candidate.range)&&Is.string(candidate.message)&&(Is.number(candidate.severity)||Is.undefined(candidate.severity))&&(Is.number(candidate.code)||Is.string(candidate.code)||Is.undefined(candidate.code))&&(Is.string(candidate.source)||Is.undefined(candidate.source))}}(Diagnostic||(Diagnostic={})),function(Command){Command.create=function create(title,command){for(var args=[],_i=2;_i<arguments.length;_i++)args[_i-2]=arguments[_i];var result={title:title,command:command};return Is.defined(args)&&args.length>0&&(result.arguments=args),result},Command.is=function is(value){var candidate=value;return Is.defined(candidate)&&Is.string(candidate.title)&&Is.string(candidate.title)}}(Command||(Command={})),function(TextEdit){TextEdit.replace=function replace(range,newText){return{range:range,newText:newText}},TextEdit.insert=function insert(position,newText){return{range:{start:position,end:position},newText:newText}},TextEdit.del=function del(range){return{range:range,newText:""}}}(TextEdit||(TextEdit={})),function(TextDocumentEdit){TextDocumentEdit.create=function create(textDocument,edits){return{textDocument:textDocument,edits:edits}},TextDocumentEdit.is=function is(value){var candidate=value;return Is.defined(candidate)&&VersionedTextDocumentIdentifier.is(candidate.textDocument)&&Array.isArray(candidate.edits)}}(TextDocumentEdit||(TextDocumentEdit={}));var TextDocumentIdentifier,VersionedTextDocumentIdentifier,TextDocumentItem,MarkupKind,CompletionItemKind,InsertTextFormat,CompletionItem,CompletionList,MarkedString,ParameterInformation,SignatureInformation,DocumentHighlightKind,DocumentHighlight,SymbolKind,SymbolInformation,CodeActionContext,CodeLens,FormattingOptions,TextEditChangeImpl=function(){function TextEditChangeImpl(edits){this.edits=edits}return TextEditChangeImpl.prototype.insert=function(position,newText){this.edits.push(TextEdit.insert(position,newText))},TextEditChangeImpl.prototype.replace=function(range,newText){this.edits.push(TextEdit.replace(range,newText))},TextEditChangeImpl.prototype.delete=function(range){this.edits.push(TextEdit.del(range))},TextEditChangeImpl.prototype.add=function(edit){this.edits.push(edit)},TextEditChangeImpl.prototype.all=function(){return this.edits},TextEditChangeImpl.prototype.clear=function(){this.edits.splice(0,this.edits.length)},TextEditChangeImpl}();!function(){function WorkspaceChange(workspaceEdit){var _this=this;this._textEditChanges=Object.create(null),workspaceEdit&&(this._workspaceEdit=workspaceEdit,workspaceEdit.documentChanges?workspaceEdit.documentChanges.forEach((function(textDocumentEdit){var textEditChange=new TextEditChangeImpl(textDocumentEdit.edits);_this._textEditChanges[textDocumentEdit.textDocument.uri]=textEditChange})):workspaceEdit.changes&&Object.keys(workspaceEdit.changes).forEach((function(key){var textEditChange=new TextEditChangeImpl(workspaceEdit.changes[key]);_this._textEditChanges[key]=textEditChange})))}Object.defineProperty(WorkspaceChange.prototype,"edit",{get:function(){return this._workspaceEdit},enumerable:!0,configurable:!0}),WorkspaceChange.prototype.getTextEditChange=function(key){if(VersionedTextDocumentIdentifier.is(key)){if(this._workspaceEdit||(this._workspaceEdit={documentChanges:[]}),!this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for versioned document changes.");var textDocument=key;if(!(result=this._textEditChanges[textDocument.uri])){var textDocumentEdit={textDocument:textDocument,edits:edits=[]};this._workspaceEdit.documentChanges.push(textDocumentEdit),result=new TextEditChangeImpl(edits),this._textEditChanges[textDocument.uri]=result}return result}if(this._workspaceEdit||(this._workspaceEdit={changes:Object.create(null)}),!this._workspaceEdit.changes)throw new Error("Workspace edit is not configured for normal text edit changes.");var result;if(!(result=this._textEditChanges[key])){var edits=[];this._workspaceEdit.changes[key]=edits,result=new TextEditChangeImpl(edits),this._textEditChanges[key]=result}return result}}();!function(TextDocumentIdentifier){TextDocumentIdentifier.create=function create(uri){return{uri:uri}},TextDocumentIdentifier.is=function is(value){var candidate=value;return Is.defined(candidate)&&Is.string(candidate.uri)}}(TextDocumentIdentifier||(TextDocumentIdentifier={})),function(VersionedTextDocumentIdentifier){VersionedTextDocumentIdentifier.create=function create(uri,version){return{uri:uri,version:version}},VersionedTextDocumentIdentifier.is=function is(value){var candidate=value;return Is.defined(candidate)&&Is.string(candidate.uri)&&Is.number(candidate.version)}}(VersionedTextDocumentIdentifier||(VersionedTextDocumentIdentifier={})),function(TextDocumentItem){TextDocumentItem.create=function create(uri,languageId,version,text){return{uri:uri,languageId:languageId,version:version,text:text}},TextDocumentItem.is=function is(value){var candidate=value;return Is.defined(candidate)&&Is.string(candidate.uri)&&Is.string(candidate.languageId)&&Is.number(candidate.version)&&Is.string(candidate.text)}}(TextDocumentItem||(TextDocumentItem={})),function(MarkupKind){MarkupKind.PlainText="plaintext",MarkupKind.Markdown="markdown"}(MarkupKind||(MarkupKind={})),function(CompletionItemKind){CompletionItemKind.Text=1,CompletionItemKind.Method=2,CompletionItemKind.Function=3,CompletionItemKind.Constructor=4,CompletionItemKind.Field=5,CompletionItemKind.Variable=6,CompletionItemKind.Class=7,CompletionItemKind.Interface=8,CompletionItemKind.Module=9,CompletionItemKind.Property=10,CompletionItemKind.Unit=11,CompletionItemKind.Value=12,CompletionItemKind.Enum=13,CompletionItemKind.Keyword=14,CompletionItemKind.Snippet=15,CompletionItemKind.Color=16,CompletionItemKind.File=17,CompletionItemKind.Reference=18,CompletionItemKind.Folder=19,CompletionItemKind.EnumMember=20,CompletionItemKind.Constant=21,CompletionItemKind.Struct=22,CompletionItemKind.Event=23,CompletionItemKind.Operator=24,CompletionItemKind.TypeParameter=25}(CompletionItemKind||(CompletionItemKind={})),function(InsertTextFormat){InsertTextFormat.PlainText=1,InsertTextFormat.Snippet=2}(InsertTextFormat||(InsertTextFormat={})),function(CompletionItem){CompletionItem.create=function create(label){return{label:label}}}(CompletionItem||(CompletionItem={})),function(CompletionList){CompletionList.create=function create(items,isIncomplete){return{items:items||[],isIncomplete:!!isIncomplete}}}(CompletionList||(CompletionList={})),function(MarkedString){MarkedString.fromPlainText=function fromPlainText(plainText){return plainText.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}}(MarkedString||(MarkedString={})),function(ParameterInformation){ParameterInformation.create=function create(label,documentation){return documentation?{label:label,documentation:documentation}:{label:label}}}(ParameterInformation||(ParameterInformation={})),function(SignatureInformation){SignatureInformation.create=function create(label,documentation){for(var parameters=[],_i=2;_i<arguments.length;_i++)parameters[_i-2]=arguments[_i];var result={label:label};return Is.defined(documentation)&&(result.documentation=documentation),Is.defined(parameters)?result.parameters=parameters:result.parameters=[],result}}(SignatureInformation||(SignatureInformation={})),function(DocumentHighlightKind){DocumentHighlightKind.Text=1,DocumentHighlightKind.Read=2,DocumentHighlightKind.Write=3}(DocumentHighlightKind||(DocumentHighlightKind={})),function(DocumentHighlight){DocumentHighlight.create=function create(range,kind){var result={range:range};return Is.number(kind)&&(result.kind=kind),result}}(DocumentHighlight||(DocumentHighlight={})),function(SymbolKind){SymbolKind.File=1,SymbolKind.Module=2,SymbolKind.Namespace=3,SymbolKind.Package=4,SymbolKind.Class=5,SymbolKind.Method=6,SymbolKind.Property=7,SymbolKind.Field=8,SymbolKind.Constructor=9,SymbolKind.Enum=10,SymbolKind.Interface=11,SymbolKind.Function=12,SymbolKind.Variable=13,SymbolKind.Constant=14,SymbolKind.String=15,SymbolKind.Number=16,SymbolKind.Boolean=17,SymbolKind.Array=18,SymbolKind.Object=19,SymbolKind.Key=20,SymbolKind.Null=21,SymbolKind.EnumMember=22,SymbolKind.Struct=23,SymbolKind.Event=24,SymbolKind.Operator=25,SymbolKind.TypeParameter=26}(SymbolKind||(SymbolKind={})),function(SymbolInformation){SymbolInformation.create=function create(name,kind,range,uri,containerName){var result={name:name,kind:kind,location:{uri:uri,range:range}};return containerName&&(result.containerName=containerName),result}}(SymbolInformation||(SymbolInformation={})),function(CodeActionContext){CodeActionContext.create=function create(diagnostics){return{diagnostics:diagnostics}},CodeActionContext.is=function is(value){var candidate=value;return Is.defined(candidate)&&Is.typedArray(candidate.diagnostics,Diagnostic.is)}}(CodeActionContext||(CodeActionContext={})),function(CodeLens){CodeLens.create=function create(range,data){var result={range:range};return Is.defined(data)&&(result.data=data),result},CodeLens.is=function is(value){var candidate=value;return Is.defined(candidate)&&main_Range.is(candidate.range)&&(Is.undefined(candidate.command)||Command.is(candidate.command))}}(CodeLens||(CodeLens={})),function(FormattingOptions){FormattingOptions.create=function create(tabSize,insertSpaces){return{tabSize:tabSize,insertSpaces:insertSpaces}},FormattingOptions.is=function is(value){var candidate=value;return Is.defined(candidate)&&Is.number(candidate.tabSize)&&Is.boolean(candidate.insertSpaces)}}(FormattingOptions||(FormattingOptions={}));var DocumentLink=function DocumentLink(){};!function(DocumentLink){DocumentLink.create=function create(range,target){return{range:range,target:target}},DocumentLink.is=function is(value){var candidate=value;return Is.defined(candidate)&&main_Range.is(candidate.range)&&(Is.undefined(candidate.target)||Is.string(candidate.target))}}(DocumentLink||(DocumentLink={}));var TextDocument,TextDocumentSaveReason;!function(TextDocument){TextDocument.create=function create(uri,languageId,version,content){return new FullTextDocument(uri,languageId,version,content)},TextDocument.is=function is(value){var candidate=value;return!!(Is.defined(candidate)&&Is.string(candidate.uri)&&(Is.undefined(candidate.languageId)||Is.string(candidate.languageId))&&Is.number(candidate.lineCount)&&Is.func(candidate.getText)&&Is.func(candidate.positionAt)&&Is.func(candidate.offsetAt))},TextDocument.applyEdits=function applyEdits(document,edits){for(var text=document.getText(),sortedEdits=function mergeSort(data,compare){if(data.length<=1)return data;var p=data.length/2|0,left=data.slice(0,p),right=data.slice(p);mergeSort(left,compare),mergeSort(right,compare);var leftIdx=0,rightIdx=0,i=0;for(;leftIdx<left.length&&rightIdx<right.length;){var ret=compare(left[leftIdx],right[rightIdx]);data[i++]=ret<=0?left[leftIdx++]:right[rightIdx++]}for(;leftIdx<left.length;)data[i++]=left[leftIdx++];for(;rightIdx<right.length;)data[i++]=right[rightIdx++];return data}(edits,(function(a,b){return 0===a.range.start.line-b.range.start.line?a.range.start.character-b.range.start.character:0})),lastModifiedOffset=text.length,i=sortedEdits.length-1;i>=0;i--){var e=sortedEdits[i],startOffset=document.offsetAt(e.range.start),endOffset=document.offsetAt(e.range.end);if(!(endOffset<=lastModifiedOffset))throw new Error("Ovelapping edit");text=text.substring(0,startOffset)+e.newText+text.substring(endOffset,text.length),lastModifiedOffset=startOffset}return text}}(TextDocument||(TextDocument={})),function(TextDocumentSaveReason){TextDocumentSaveReason.Manual=1,TextDocumentSaveReason.AfterDelay=2,TextDocumentSaveReason.FocusOut=3}(TextDocumentSaveReason||(TextDocumentSaveReason={}));var Is,FullTextDocument=function(){function FullTextDocument(uri,languageId,version,content){this._uri=uri,this._languageId=languageId,this._version=version,this._content=content,this._lineOffsets=null}return Object.defineProperty(FullTextDocument.prototype,"uri",{get:function(){return this._uri},enumerable:!0,configurable:!0}),Object.defineProperty(FullTextDocument.prototype,"languageId",{get:function(){return this._languageId},enumerable:!0,configurable:!0}),Object.defineProperty(FullTextDocument.prototype,"version",{get:function(){return this._version},enumerable:!0,configurable:!0}),FullTextDocument.prototype.getText=function(range){if(range){var start=this.offsetAt(range.start),end=this.offsetAt(range.end);return this._content.substring(start,end)}return this._content},FullTextDocument.prototype.update=function(event,version){this._content=event.text,this._version=version,this._lineOffsets=null},FullTextDocument.prototype.getLineOffsets=function(){if(null===this._lineOffsets){for(var lineOffsets=[],text=this._content,isLineStart=!0,i=0;i<text.length;i++){isLineStart&&(lineOffsets.push(i),isLineStart=!1);var ch=text.charAt(i);isLineStart="\r"===ch||"\n"===ch,"\r"===ch&&i+1<text.length&&"\n"===text.charAt(i+1)&&i++}isLineStart&&text.length>0&&lineOffsets.push(text.length),this._lineOffsets=lineOffsets}return this._lineOffsets},FullTextDocument.prototype.positionAt=function(offset){offset=Math.max(Math.min(offset,this._content.length),0);var lineOffsets=this.getLineOffsets(),low=0,high=lineOffsets.length;if(0===high)return main_Position.create(0,offset);for(;low<high;){var mid=Math.floor((low+high)/2);lineOffsets[mid]>offset?high=mid:low=mid+1}var line=low-1;return main_Position.create(line,offset-lineOffsets[line])},FullTextDocument.prototype.offsetAt=function(position){var lineOffsets=this.getLineOffsets();if(position.line>=lineOffsets.length)return this._content.length;if(position.line<0)return 0;var lineOffset=lineOffsets[position.line],nextLineOffset=position.line+1<lineOffsets.length?lineOffsets[position.line+1]:this._content.length;return Math.max(Math.min(lineOffset+position.character,nextLineOffset),lineOffset)},Object.defineProperty(FullTextDocument.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!0,configurable:!0}),FullTextDocument}();function createScanner(text,ignoreTrivia){void 0===ignoreTrivia&&(ignoreTrivia=!1);var pos=0,len=text.length,value="",tokenOffset=0,token=16,scanError=0;function scanHexDigits(count,exact){for(var digits=0,value=0;digits<count||!exact;){var ch=text.charCodeAt(pos);if(ch>=48&&ch<=57)value=16*value+ch-48;else if(ch>=65&&ch<=70)value=16*value+ch-65+10;else{if(!(ch>=97&&ch<=102))break;value=16*value+ch-97+10}pos++,digits++}return digits<count&&(value=-1),value}function scanNext(){if(value="",scanError=0,tokenOffset=pos,pos>=len)return tokenOffset=len,token=17;var code=text.charCodeAt(pos);if(isWhiteSpace(code)){do{pos++,value+=String.fromCharCode(code),code=text.charCodeAt(pos)}while(isWhiteSpace(code));return token=15}if(isLineBreak(code))return pos++,value+=String.fromCharCode(code),13===code&&10===text.charCodeAt(pos)&&(pos++,value+="\n"),token=14;switch(code){case 123:return pos++,token=1;case 125:return pos++,token=2;case 91:return pos++,token=3;case 93:return pos++,token=4;case 58:return pos++,token=6;case 44:return pos++,token=5;case 34:return pos++,value=function scanString(){for(var result="",start=pos;;){if(pos>=len){result+=text.substring(start,pos),scanError=2;break}var ch=text.charCodeAt(pos);if(34===ch){result+=text.substring(start,pos),pos++;break}if(92!==ch){if(ch>=0&&ch<=31){if(isLineBreak(ch)){result+=text.substring(start,pos),scanError=2;break}scanError=6}pos++}else{if(result+=text.substring(start,pos),++pos>=len){scanError=2;break}switch(ch=text.charCodeAt(pos++)){case 34:result+='"';break;case 92:result+="\\";break;case 47:result+="/";break;case 98:result+="\b";break;case 102:result+="\f";break;case 110:result+="\n";break;case 114:result+="\r";break;case 116:result+="\t";break;case 117:var ch_1=scanHexDigits(4,!0);ch_1>=0?result+=String.fromCharCode(ch_1):scanError=4;break;default:scanError=5}start=pos}}return result}(),token=10;case 47:var start=pos-1;if(47===text.charCodeAt(pos+1)){for(pos+=2;pos<len&&!isLineBreak(text.charCodeAt(pos));)pos++;return value=text.substring(start,pos),token=12}if(42===text.charCodeAt(pos+1)){pos+=2;for(var commentClosed=!1;pos<len;){if(42===text.charCodeAt(pos)&&pos+1<len&&47===text.charCodeAt(pos+1)){pos+=2,commentClosed=!0;break}pos++}return commentClosed||(pos++,scanError=1),value=text.substring(start,pos),token=13}return value+=String.fromCharCode(code),pos++,token=16;case 45:if(value+=String.fromCharCode(code),++pos===len||!isDigit(text.charCodeAt(pos)))return token=16;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return value+=function scanNumber(){var start=pos;if(48===text.charCodeAt(pos))pos++;else for(pos++;pos<text.length&&isDigit(text.charCodeAt(pos));)pos++;if(pos<text.length&&46===text.charCodeAt(pos)){if(!(++pos<text.length&&isDigit(text.charCodeAt(pos))))return scanError=3,text.substring(start,pos);for(pos++;pos<text.length&&isDigit(text.charCodeAt(pos));)pos++}var end=pos;if(pos<text.length&&(69===text.charCodeAt(pos)||101===text.charCodeAt(pos)))if((++pos<text.length&&43===text.charCodeAt(pos)||45===text.charCodeAt(pos))&&pos++,pos<text.length&&isDigit(text.charCodeAt(pos))){for(pos++;pos<text.length&&isDigit(text.charCodeAt(pos));)pos++;end=pos}else scanError=3;return text.substring(start,end)}(),token=11;default:for(;pos<len&&isUnknownContentCharacter(code);)pos++,code=text.charCodeAt(pos);if(tokenOffset!==pos){switch(value=text.substring(tokenOffset,pos)){case"true":return token=8;case"false":return token=9;case"null":return token=7}return token=16}return value+=String.fromCharCode(code),pos++,token=16}}function isUnknownContentCharacter(code){if(isWhiteSpace(code)||isLineBreak(code))return!1;switch(code){case 125:case 93:case 123:case 91:case 34:case 58:case 44:return!1}return!0}return{setPosition:function setPosition(newPosition){pos=newPosition,value="",tokenOffset=0,token=16,scanError=0},getPosition:function(){return pos},scan:ignoreTrivia?function scanNextNonTrivia(){var result;do{result=scanNext()}while(result>=12&&result<=15);return result}:scanNext,getToken:function(){return token},getTokenValue:function(){return value},getTokenOffset:function(){return tokenOffset},getTokenLength:function(){return pos-tokenOffset},getTokenError:function(){return scanError}}}function isWhiteSpace(ch){return 32===ch||9===ch||11===ch||12===ch||160===ch||5760===ch||ch>=8192&&ch<=8203||8239===ch||8287===ch||12288===ch||65279===ch}function isLineBreak(ch){return 10===ch||13===ch||8232===ch||8233===ch}function isDigit(ch){return ch>=48&&ch<=57}function format_format(documentText,range,options){var initialIndentLevel,formatText,formatTextStart,rangeStart,rangeEnd;if(range){for(rangeStart=range.offset,rangeEnd=rangeStart+range.length,formatTextStart=rangeStart;formatTextStart>0&&!isEOL(documentText,formatTextStart-1);)formatTextStart--;for(var endOffset=rangeEnd;endOffset<documentText.length&&!isEOL(documentText,endOffset);)endOffset++;formatText=documentText.substring(formatTextStart,endOffset),initialIndentLevel=function computeIndentLevel(content,offset,options){var i=0,nChars=0,tabSize=options.tabSize||4;for(;i<content.length;){var ch=content.charAt(i);if(" "===ch)nChars++;else{if("\t"!==ch)break;nChars+=tabSize}i++}return Math.floor(nChars/tabSize)}(formatText,0,options)}else formatText=documentText,initialIndentLevel=0,formatTextStart=0,rangeStart=0,rangeEnd=documentText.length;var indentValue,eol=function getEOL(options,text){for(var i=0;i<text.length;i++){var ch=text.charAt(i);if("\r"===ch)return i+1<text.length&&"\n"===text.charAt(i+1)?"\r\n":"\r";if("\n"===ch)return"\n"}return options&&options.eol||"\n"}(options,documentText),lineBreak=!1,indentLevel=0;indentValue=options.insertSpaces?format_repeat(" ",options.tabSize||4):"\t";var scanner=createScanner(formatText,!1),hasError=!1;function newLineAndIndent(){return eol+format_repeat(indentValue,initialIndentLevel+indentLevel)}function scanNext(){var token=scanner.scan();for(lineBreak=!1;15===token||14===token;)lineBreak=lineBreak||14===token,token=scanner.scan();return hasError=16===token||0!==scanner.getTokenError(),token}var editOperations=[];function addEdit(text,startOffset,endOffset){!hasError&&startOffset<rangeEnd&&endOffset>rangeStart&&documentText.substring(startOffset,endOffset)!==text&&editOperations.push({offset:startOffset,length:endOffset-startOffset,content:text})}var firstToken=scanNext();if(17!==firstToken){var firstTokenStart=scanner.getTokenOffset()+formatTextStart;addEdit(format_repeat(indentValue,initialIndentLevel),formatTextStart,firstTokenStart)}for(;17!==firstToken;){for(var firstTokenEnd=scanner.getTokenOffset()+scanner.getTokenLength()+formatTextStart,secondToken=scanNext(),replaceContent="";!lineBreak&&(12===secondToken||13===secondToken);){addEdit(" ",firstTokenEnd,scanner.getTokenOffset()+formatTextStart),firstTokenEnd=scanner.getTokenOffset()+scanner.getTokenLength()+formatTextStart,replaceContent=12===secondToken?newLineAndIndent():"",secondToken=scanNext()}if(2===secondToken)1!==firstToken&&(indentLevel--,replaceContent=newLineAndIndent());else if(4===secondToken)3!==firstToken&&(indentLevel--,replaceContent=newLineAndIndent());else{switch(firstToken){case 3:case 1:indentLevel++,replaceContent=newLineAndIndent();break;case 5:case 12:replaceContent=newLineAndIndent();break;case 13:replaceContent=lineBreak?newLineAndIndent():" ";break;case 6:replaceContent=" ";break;case 10:if(6===secondToken){replaceContent="";break}case 7:case 8:case 9:case 11:case 2:case 4:12===secondToken||13===secondToken?replaceContent=" ":5!==secondToken&&17!==secondToken&&(hasError=!0);break;case 16:hasError=!0}!lineBreak||12!==secondToken&&13!==secondToken||(replaceContent=newLineAndIndent())}addEdit(replaceContent,firstTokenEnd,scanner.getTokenOffset()+formatTextStart),firstToken=secondToken}return editOperations}function format_repeat(s,count){for(var result="",i=0;i<count;i++)result+=s;return result}function isEOL(text,offset){return-1!=="\r\n".indexOf(text.charAt(offset))}function visit(text,visitor,options){var _scanner=createScanner(text,!1);function toNoArgVisit(visitFunction){return visitFunction?function(){return visitFunction(_scanner.getTokenOffset(),_scanner.getTokenLength())}:function(){return!0}}function toOneArgVisit(visitFunction){return visitFunction?function(arg){return visitFunction(arg,_scanner.getTokenOffset(),_scanner.getTokenLength())}:function(){return!0}}var onObjectBegin=toNoArgVisit(visitor.onObjectBegin),onObjectProperty=toOneArgVisit(visitor.onObjectProperty),onObjectEnd=toNoArgVisit(visitor.onObjectEnd),onArrayBegin=toNoArgVisit(visitor.onArrayBegin),onArrayEnd=toNoArgVisit(visitor.onArrayEnd),onLiteralValue=toOneArgVisit(visitor.onLiteralValue),onSeparator=toOneArgVisit(visitor.onSeparator),onComment=toNoArgVisit(visitor.onComment),onError=toOneArgVisit(visitor.onError),disallowComments=options&&options.disallowComments,allowTrailingComma=options&&options.allowTrailingComma;function scanNext(){for(;;){var token=_scanner.scan();switch(_scanner.getTokenError()){case 4:handleError(14);break;case 5:handleError(15);break;case 3:handleError(13);break;case 1:disallowComments||handleError(11);break;case 2:handleError(12);break;case 6:handleError(16)}switch(token){case 12:case 13:disallowComments?handleError(10):onComment();break;case 16:handleError(1);break;case 15:case 14:break;default:return token}}}function handleError(error,skipUntilAfter,skipUntil){if(void 0===skipUntilAfter&&(skipUntilAfter=[]),void 0===skipUntil&&(skipUntil=[]),onError(error),skipUntilAfter.length+skipUntil.length>0)for(var token=_scanner.getToken();17!==token;){if(-1!==skipUntilAfter.indexOf(token)){scanNext();break}if(-1!==skipUntil.indexOf(token))break;token=scanNext()}}function parseString(isValue){var value=_scanner.getTokenValue();return isValue?onLiteralValue(value):onObjectProperty(value),scanNext(),!0}function parseValue(){switch(_scanner.getToken()){case 3:return function parseArray(){onArrayBegin(),scanNext();for(var needsComma=!1;4!==_scanner.getToken()&&17!==_scanner.getToken();){if(5===_scanner.getToken()){if(needsComma||handleError(4,[],[]),onSeparator(","),scanNext(),4===_scanner.getToken()&&allowTrailingComma)break}else needsComma&&handleError(6,[],[]);parseValue()||handleError(4,[],[4,5]),needsComma=!0}return onArrayEnd(),4!==_scanner.getToken()?handleError(8,[4],[]):scanNext(),!0}();case 1:return function parseObject(){onObjectBegin(),scanNext();for(var needsComma=!1;2!==_scanner.getToken()&&17!==_scanner.getToken();){if(5===_scanner.getToken()){if(needsComma||handleError(4,[],[]),onSeparator(","),scanNext(),2===_scanner.getToken()&&allowTrailingComma)break}else needsComma&&handleError(6,[],[]);(10!==_scanner.getToken()?(handleError(3,[],[2,5]),0):(parseString(!1),6===_scanner.getToken()?(onSeparator(":"),scanNext(),parseValue()||handleError(4,[],[2,5])):handleError(5,[],[2,5]),1))||handleError(4,[],[2,5]),needsComma=!0}return onObjectEnd(),2!==_scanner.getToken()?handleError(7,[2],[]):scanNext(),!0}();case 10:return parseString(!0);default:return function parseLiteral(){switch(_scanner.getToken()){case 11:var value=0;try{"number"!=typeof(value=JSON.parse(_scanner.getTokenValue()))&&(handleError(2),value=0)}catch(e){handleError(2)}onLiteralValue(value);break;case 7:onLiteralValue(null);break;case 8:onLiteralValue(!0);break;case 9:onLiteralValue(!1);break;default:return!1}return scanNext(),!0}()}}return scanNext(),17===_scanner.getToken()||(parseValue()?(17!==_scanner.getToken()&&handleError(9,[],[]),!0):(handleError(4,[],[]),!1))}!function(Is){var toString=Object.prototype.toString;Is.defined=function defined(value){return void 0!==value},Is.undefined=function undefined(value){return void 0===value},Is.boolean=function boolean(value){return!0===value||!1===value},Is.string=function string(value){return"[object String]"===toString.call(value)},Is.number=function number(value){return"[object Number]"===toString.call(value)},Is.func=function func(value){return"[object Function]"===toString.call(value)},Is.typedArray=function typedArray(value,check){return Array.isArray(value)&&value.every(check)}}(Is||(Is={}));var main_createScanner=createScanner,main_parse=function parse(text,errors,options){void 0===errors&&(errors=[]);var currentProperty=null,currentParent=[],previousParents=[];function onValue(value){Array.isArray(currentParent)?currentParent.push(value):currentProperty&&(currentParent[currentProperty]=value)}return visit(text,{onObjectBegin:function(){var object={};onValue(object),previousParents.push(currentParent),currentParent=object,currentProperty=null},onObjectProperty:function(name){currentProperty=name},onObjectEnd:function(){currentParent=previousParents.pop()},onArrayBegin:function(){var array=[];onValue(array),previousParents.push(currentParent),currentParent=array,currentProperty=null},onArrayEnd:function(){currentParent=previousParents.pop()},onLiteralValue:onValue,onError:function(error,offset,length){errors.push({error:error,offset:offset,length:length})}},options),currentParent[0]};function equals(one,other){if(one===other)return!0;if(null==one||null==other)return!1;if(typeof one!=typeof other)return!1;if("object"!=typeof one)return!1;if(Array.isArray(one)!==Array.isArray(other))return!1;var i,key;if(Array.isArray(one)){if(one.length!==other.length)return!1;for(i=0;i<one.length;i++)if(!equals(one[i],other[i]))return!1}else{var oneKeys=[];for(key in one)oneKeys.push(key);oneKeys.sort();var otherKeys=[];for(key in other)otherKeys.push(key);if(otherKeys.sort(),!equals(oneKeys,otherKeys))return!1;for(i=0;i<oneKeys.length;i++)if(!equals(one[oneKeys[i]],other[oneKeys[i]]))return!1}return!0}function vscode_nls_format(message,args){return 0===args.length?message:message.replace(/\{(\d+)\}/g,(function(match,rest){var index=rest[0];return void 0!==args[index]?args[index]:match}))}function localize(key,message){for(var args=[],_i=2;_i<arguments.length;_i++)args[_i-2]=arguments[_i];return vscode_nls_format(message,args)}function loadMessageBundle(file){return localize}var ErrorCode,vscode_uri=__webpack_require__("xiP/"),jsonParser_extends=function(){var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),jsonParser_localize=loadMessageBundle();!function(ErrorCode){ErrorCode[ErrorCode.Undefined=0]="Undefined",ErrorCode[ErrorCode.EnumValueMismatch=1]="EnumValueMismatch",ErrorCode[ErrorCode.UnexpectedEndOfComment=257]="UnexpectedEndOfComment",ErrorCode[ErrorCode.UnexpectedEndOfString=258]="UnexpectedEndOfString",ErrorCode[ErrorCode.UnexpectedEndOfNumber=259]="UnexpectedEndOfNumber",ErrorCode[ErrorCode.InvalidUnicode=260]="InvalidUnicode",ErrorCode[ErrorCode.InvalidEscapeCharacter=261]="InvalidEscapeCharacter",ErrorCode[ErrorCode.InvalidCharacter=262]="InvalidCharacter",ErrorCode[ErrorCode.PropertyExpected=513]="PropertyExpected",ErrorCode[ErrorCode.CommaExpected=514]="CommaExpected",ErrorCode[ErrorCode.ColonExpected=515]="ColonExpected",ErrorCode[ErrorCode.ValueExpected=516]="ValueExpected",ErrorCode[ErrorCode.CommaOrCloseBacketExpected=517]="CommaOrCloseBacketExpected",ErrorCode[ErrorCode.CommaOrCloseBraceExpected=518]="CommaOrCloseBraceExpected",ErrorCode[ErrorCode.TrailingComma=519]="TrailingComma"}(ErrorCode||(ErrorCode={}));var ProblemSeverity,colorHexPattern=/^#([0-9A-Fa-f]{3,4}|([0-9A-Fa-f]{2}){3,4})$/,emailPattern=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;!function(ProblemSeverity){ProblemSeverity.Ignore="ignore",ProblemSeverity.Error="error",ProblemSeverity.Warning="warning"}(ProblemSeverity||(ProblemSeverity={}));var EnumMatch,ASTNodeImpl=function(){function ASTNodeImpl(parent,offset,length){this.offset=offset,this.length=length,this.parent=parent}return Object.defineProperty(ASTNodeImpl.prototype,"children",{get:function(){return[]},enumerable:!0,configurable:!0}),ASTNodeImpl.prototype.toString=function(){return"type: "+this.type+" ("+this.offset+"/"+this.length+")"+(this.parent?" parent: {"+this.parent.toString()+"}":"")},ASTNodeImpl}(),NullASTNodeImpl=function(_super){function NullASTNodeImpl(parent,offset){var _this=_super.call(this,parent,offset)||this;return _this.type="null",_this}return jsonParser_extends(NullASTNodeImpl,_super),NullASTNodeImpl}(ASTNodeImpl),BooleanASTNodeImpl=function(_super){function BooleanASTNodeImpl(parent,boolValue,offset){var _this=_super.call(this,parent,offset)||this;return _this.type="boolean",_this.value=boolValue,_this}return jsonParser_extends(BooleanASTNodeImpl,_super),BooleanASTNodeImpl}(ASTNodeImpl),ArrayASTNodeImpl=function(_super){function ArrayASTNodeImpl(parent,offset){var _this=_super.call(this,parent,offset)||this;return _this.type="array",_this.items=[],_this}return jsonParser_extends(ArrayASTNodeImpl,_super),Object.defineProperty(ArrayASTNodeImpl.prototype,"children",{get:function(){return this.items},enumerable:!0,configurable:!0}),ArrayASTNodeImpl}(ASTNodeImpl),NumberASTNodeImpl=function(_super){function NumberASTNodeImpl(parent,offset){var _this=_super.call(this,parent,offset)||this;return _this.type="number",_this.isInteger=!0,_this.value=Number.NaN,_this}return jsonParser_extends(NumberASTNodeImpl,_super),NumberASTNodeImpl}(ASTNodeImpl),StringASTNodeImpl=function(_super){function StringASTNodeImpl(parent,offset,length){var _this=_super.call(this,parent,offset,length)||this;return _this.type="string",_this.value="",_this}return jsonParser_extends(StringASTNodeImpl,_super),StringASTNodeImpl}(ASTNodeImpl),PropertyASTNodeImpl=function(_super){function PropertyASTNodeImpl(parent,offset){var _this=_super.call(this,parent,offset)||this;return _this.type="property",_this.colonOffset=-1,_this}return jsonParser_extends(PropertyASTNodeImpl,_super),Object.defineProperty(PropertyASTNodeImpl.prototype,"children",{get:function(){return this.valueNode?[this.keyNode,this.valueNode]:[this.keyNode]},enumerable:!0,configurable:!0}),PropertyASTNodeImpl}(ASTNodeImpl),ObjectASTNodeImpl=function(_super){function ObjectASTNodeImpl(parent,offset){var _this=_super.call(this,parent,offset)||this;return _this.type="object",_this.properties=[],_this}return jsonParser_extends(ObjectASTNodeImpl,_super),Object.defineProperty(ObjectASTNodeImpl.prototype,"children",{get:function(){return this.properties},enumerable:!0,configurable:!0}),ObjectASTNodeImpl}(ASTNodeImpl);function asSchema(schema){return"boolean"==typeof schema?schema?{}:{not:{}}:schema}!function(EnumMatch){EnumMatch[EnumMatch.Key=0]="Key",EnumMatch[EnumMatch.Enum=1]="Enum"}(EnumMatch||(EnumMatch={}));var SchemaCollector=function(){function SchemaCollector(focusOffset,exclude){void 0===focusOffset&&(focusOffset=-1),void 0===exclude&&(exclude=null),this.focusOffset=focusOffset,this.exclude=exclude,this.schemas=[]}return SchemaCollector.prototype.add=function(schema){this.schemas.push(schema)},SchemaCollector.prototype.merge=function(other){var _a;(_a=this.schemas).push.apply(_a,other.schemas)},SchemaCollector.prototype.include=function(node){return(-1===this.focusOffset||contains(node,this.focusOffset))&&node!==this.exclude},SchemaCollector.prototype.newSub=function(){return new SchemaCollector(-1,this.exclude)},SchemaCollector}(),NoOpSchemaCollector=function(){function NoOpSchemaCollector(){}return Object.defineProperty(NoOpSchemaCollector.prototype,"schemas",{get:function(){return[]},enumerable:!0,configurable:!0}),NoOpSchemaCollector.prototype.add=function(schema){},NoOpSchemaCollector.prototype.merge=function(other){},NoOpSchemaCollector.prototype.include=function(node){return!0},NoOpSchemaCollector.prototype.newSub=function(){return this},NoOpSchemaCollector.instance=new NoOpSchemaCollector,NoOpSchemaCollector}(),ValidationResult=function(){function ValidationResult(){this.problems=[],this.propertiesMatches=0,this.propertiesValueMatches=0,this.primaryValueMatches=0,this.enumValueMatch=!1,this.enumValues=null}return ValidationResult.prototype.hasProblems=function(){return!!this.problems.length},ValidationResult.prototype.mergeAll=function(validationResults){var _this=this;validationResults.forEach((function(validationResult){_this.merge(validationResult)}))},ValidationResult.prototype.merge=function(validationResult){this.problems=this.problems.concat(validationResult.problems)},ValidationResult.prototype.mergeEnumValues=function(validationResult){if(!this.enumValueMatch&&!validationResult.enumValueMatch&&this.enumValues&&validationResult.enumValues){this.enumValues=this.enumValues.concat(validationResult.enumValues);for(var _i=0,_a=this.problems;_i<_a.length;_i++){var error=_a[_i];error.code===ErrorCode.EnumValueMismatch&&(error.message=jsonParser_localize("enumWarning","Value is not accepted. Valid values: {0}.",this.enumValues.map((function(v){return JSON.stringify(v)})).join(", ")))}}},ValidationResult.prototype.mergePropertyMatch=function(propertyValidationResult){this.merge(propertyValidationResult),this.propertiesMatches++,(propertyValidationResult.enumValueMatch||!propertyValidationResult.hasProblems()&&propertyValidationResult.propertiesMatches)&&this.propertiesValueMatches++,propertyValidationResult.enumValueMatch&&propertyValidationResult.enumValues&&1===propertyValidationResult.enumValues.length&&this.primaryValueMatches++},ValidationResult.prototype.compare=function(other){var hasProblems=this.hasProblems();return hasProblems!==other.hasProblems()?hasProblems?-1:1:this.enumValueMatch!==other.enumValueMatch?other.enumValueMatch?-1:1:this.primaryValueMatches!==other.primaryValueMatches?this.primaryValueMatches-other.primaryValueMatches:this.propertiesValueMatches!==other.propertiesValueMatches?this.propertiesValueMatches-other.propertiesValueMatches:this.propertiesMatches-other.propertiesMatches},ValidationResult}();function jsonParser_getNodeValue(node){switch(node.type){case"array":return node.items.map(jsonParser_getNodeValue);case"object":for(var obj=Object.create(null),_i=0,_a=node.properties;_i<_a.length;_i++){var prop=_a[_i];obj[prop.keyNode.value]=jsonParser_getNodeValue(prop.valueNode)}return obj;case"string":case"number":case"boolean":return node.value}return null}function getNodePath(node){if(!node.parent)return[];var path=getNodePath(node.parent);if("property"===node.parent.type){var key=node.parent.keyNode.value;path.push(key)}else if("array"===node.parent.type){var index=node.parent.items.indexOf(node);-1!==index&&path.push(index)}return path}function contains(node,offset,includeRightBound){return void 0===includeRightBound&&(includeRightBound=!1),offset>=node.offset&&offset<node.offset+node.length||includeRightBound&&offset===node.offset+node.length}var JSONDocument=function(){function JSONDocument(root,syntaxErrors,comments,externalDiagnostic){void 0===syntaxErrors&&(syntaxErrors=[]),void 0===comments&&(comments=[]),void 0===externalDiagnostic&&(externalDiagnostic=[]),this.root=root,this.syntaxErrors=syntaxErrors,this.comments=comments,this.externalDiagnostic=externalDiagnostic}return JSONDocument.prototype.getNodeFromOffset=function(offset){var findNode=function(node){if(offset>=node.offset&&offset<node.offset+node.length){for(var children=node.children,i=0;i<children.length&&children[i].offset<=offset;i++){var item=findNode(children[i]);if(item)return item}return node}return null};return this.root&&findNode(this.root)},JSONDocument.prototype.getNodeFromOffsetEndInclusive=function(offset){var findNode=function(node){if(offset>=node.offset&&offset<=node.offset+node.length){for(var children=node.children,i=0;i<children.length&&children[i].offset<=offset;i++){var item=findNode(children[i]);if(item)return item}return node}return null};return this.root&&findNode(this.root)},JSONDocument.prototype.visit=function(visitor){if(this.root){var doVisit_1=function(node){for(var ctn=visitor(node),children=node.children,i=0;i<children.length&&ctn;i++)ctn=doVisit_1(children[i]);return ctn};doVisit_1(this.root)}},JSONDocument.prototype.validate=function(schema){if(this.root&&schema){var validationResult=new ValidationResult;return validate(this.root,schema,validationResult,NoOpSchemaCollector.instance),validationResult.problems}return null},JSONDocument.prototype.getMatchingSchemas=function(schema,focusOffset,exclude){void 0===focusOffset&&(focusOffset=-1),void 0===exclude&&(exclude=null);var matchingSchemas=new SchemaCollector(focusOffset,exclude);return this.root&&schema&&validate(this.root,schema,new ValidationResult,matchingSchemas),matchingSchemas.schemas},JSONDocument}();function validate(node,schema,validationResult,matchingSchemas){if(node&&matchingSchemas.include(node)){switch(node.type){case"object":!function _validateObjectNode(node,schema,validationResult,matchingSchemas){var seenKeys=Object.create(null),unprocessedProperties=[];node.properties.forEach((function(node){var key=node.keyNode.value;seenKeys[key]=node.valueNode,unprocessedProperties.push(key)})),Array.isArray(schema.required)&&schema.required.forEach((function(propertyName){if(!seenKeys[propertyName]){var keyNode=node.parent&&"property"===node.parent.type&&node.parent.keyNode,location=keyNode?{offset:keyNode.offset,length:keyNode.length}:{offset:node.offset,length:1};validationResult.problems.push({location:location,severity:ProblemSeverity.Warning,message:jsonParser_localize("MissingRequiredPropWarning",'Missing property "{0}".',propertyName)})}}));var propertyProcessed=function(prop){for(var index=unprocessedProperties.indexOf(prop);index>=0;)unprocessedProperties.splice(index,1),index=unprocessedProperties.indexOf(prop)};schema.properties&&Object.keys(schema.properties).forEach((function(propertyName){propertyProcessed(propertyName);var propertySchema=schema.properties[propertyName],child=seenKeys[propertyName];if(child)if("boolean"==typeof propertySchema)if(propertySchema)validationResult.propertiesMatches++,validationResult.propertiesValueMatches++;else{var propertyNode=child.parent;validationResult.problems.push({location:{offset:propertyNode.keyNode.offset,length:propertyNode.keyNode.length},severity:ProblemSeverity.Warning,message:schema.errorMessage||jsonParser_localize("DisallowedExtraPropWarning","Property {0} is not allowed.",propertyName)})}else{var propertyValidationResult=new ValidationResult;validate(child,propertySchema,propertyValidationResult,matchingSchemas),validationResult.mergePropertyMatch(propertyValidationResult)}}));schema.patternProperties&&Object.keys(schema.patternProperties).forEach((function(propertyPattern){var regex=new RegExp(propertyPattern);unprocessedProperties.slice(0).forEach((function(propertyName){if(regex.test(propertyName)){propertyProcessed(propertyName);var child=seenKeys[propertyName];if(child){var propertySchema=schema.patternProperties[propertyPattern];if("boolean"==typeof propertySchema)if(propertySchema)validationResult.propertiesMatches++,validationResult.propertiesValueMatches++;else{var propertyNode=child.parent;validationResult.problems.push({location:{offset:propertyNode.keyNode.offset,length:propertyNode.keyNode.length},severity:ProblemSeverity.Warning,message:schema.errorMessage||jsonParser_localize("DisallowedExtraPropWarning","Property {0} is not allowed.",propertyName)})}else{var propertyValidationResult=new ValidationResult;validate(child,propertySchema,propertyValidationResult,matchingSchemas),validationResult.mergePropertyMatch(propertyValidationResult)}}}}))}));"object"==typeof schema.additionalProperties?unprocessedProperties.forEach((function(propertyName){var child=seenKeys[propertyName];if(child){var propertyValidationResult=new ValidationResult;validate(child,schema.additionalProperties,propertyValidationResult,matchingSchemas),validationResult.mergePropertyMatch(propertyValidationResult)}})):!1===schema.additionalProperties&&unprocessedProperties.length>0&&unprocessedProperties.forEach((function(propertyName){var child=seenKeys[propertyName];if(child){var propertyNode=child.parent;validationResult.problems.push({location:{offset:propertyNode.keyNode.offset,length:propertyNode.keyNode.length},severity:ProblemSeverity.Warning,message:schema.errorMessage||jsonParser_localize("DisallowedExtraPropWarning","Property {0} is not allowed.",propertyName)})}}));schema.maxProperties&&node.properties.length>schema.maxProperties&&validationResult.problems.push({location:{offset:node.offset,length:node.length},severity:ProblemSeverity.Warning,message:jsonParser_localize("MaxPropWarning","Object has more properties than limit of {0}.",schema.maxProperties)});schema.minProperties&&node.properties.length<schema.minProperties&&validationResult.problems.push({location:{offset:node.offset,length:node.length},severity:ProblemSeverity.Warning,message:jsonParser_localize("MinPropWarning","Object has fewer properties than the required number of {0}",schema.minProperties)});schema.dependencies&&Object.keys(schema.dependencies).forEach((function(key){if(seenKeys[key]){var propertyDep=schema.dependencies[key];if(Array.isArray(propertyDep))propertyDep.forEach((function(requiredProp){seenKeys[requiredProp]?validationResult.propertiesValueMatches++:validationResult.problems.push({location:{offset:node.offset,length:node.length},severity:ProblemSeverity.Warning,message:jsonParser_localize("RequiredDependentPropWarning","Object is missing property {0} required by property {1}.",requiredProp,key)})}));else{var propertySchema=asSchema(propertyDep);if(propertySchema){var propertyValidationResult=new ValidationResult;validate(node,propertySchema,propertyValidationResult,matchingSchemas),validationResult.mergePropertyMatch(propertyValidationResult)}}}}));var propertyNames=asSchema(schema.propertyNames);propertyNames&&node.properties.forEach((function(f){var key=f.keyNode;key&&validate(key,propertyNames,validationResult,NoOpSchemaCollector.instance)}))}(node,schema,validationResult,matchingSchemas);break;case"array":!function _validateArrayNode(node,schema,validationResult,matchingSchemas){if(Array.isArray(schema.items)){var subSchemas_1=schema.items;if(subSchemas_1.forEach((function(subSchemaRef,index){var subSchema=asSchema(subSchemaRef),itemValidationResult=new ValidationResult,item=node.items[index];item?(validate(item,subSchema,itemValidationResult,matchingSchemas),validationResult.mergePropertyMatch(itemValidationResult)):node.items.length>=subSchemas_1.length&&validationResult.propertiesValueMatches++})),node.items.length>subSchemas_1.length)if("object"==typeof schema.additionalItems)for(var i=subSchemas_1.length;i<node.items.length;i++){var itemValidationResult=new ValidationResult;validate(node.items[i],schema.additionalItems,itemValidationResult,matchingSchemas),validationResult.mergePropertyMatch(itemValidationResult)}else!1===schema.additionalItems&&validationResult.problems.push({location:{offset:node.offset,length:node.length},severity:ProblemSeverity.Warning,message:jsonParser_localize("additionalItemsWarning","Array has too many items according to schema. Expected {0} or fewer.",subSchemas_1.length)})}else{var itemSchema_1=asSchema(schema.items);itemSchema_1&&node.items.forEach((function(item){var itemValidationResult=new ValidationResult;validate(item,itemSchema_1,itemValidationResult,matchingSchemas),validationResult.mergePropertyMatch(itemValidationResult)}))}var containsSchema=asSchema(schema.contains);if(containsSchema){node.items.some((function(item){var itemValidationResult=new ValidationResult;return validate(item,containsSchema,itemValidationResult,NoOpSchemaCollector.instance),!itemValidationResult.hasProblems()}))||validationResult.problems.push({location:{offset:node.offset,length:node.length},severity:ProblemSeverity.Warning,message:schema.errorMessage||jsonParser_localize("requiredItemMissingWarning","Array does not contain required item.",schema.minItems)})}schema.minItems&&node.items.length<schema.minItems&&validationResult.problems.push({location:{offset:node.offset,length:node.length},severity:ProblemSeverity.Warning,message:jsonParser_localize("minItemsWarning","Array has too few items. Expected {0} or more.",schema.minItems)});schema.maxItems&&node.items.length>schema.maxItems&&validationResult.problems.push({location:{offset:node.offset,length:node.length},severity:ProblemSeverity.Warning,message:jsonParser_localize("maxItemsWarning","Array has too many items. Expected {0} or fewer.",schema.minItems)});if(!0===schema.uniqueItems){var values_1=jsonParser_getNodeValue(node);values_1.some((function(value,index){return index!==values_1.lastIndexOf(value)}))&&validationResult.problems.push({location:{offset:node.offset,length:node.length},severity:ProblemSeverity.Warning,message:jsonParser_localize("uniqueItemsWarning","Array has duplicate items.")})}}(node,schema,validationResult,matchingSchemas);break;case"string":!function _validateStringNode(node,schema,validationResult,matchingSchemas){schema.minLength&&node.value.length<schema.minLength&&validationResult.problems.push({location:{offset:node.offset,length:node.length},severity:ProblemSeverity.Warning,message:jsonParser_localize("minLengthWarning","String is shorter than the minimum length of {0}.",schema.minLength)});schema.maxLength&&node.value.length>schema.maxLength&&validationResult.problems.push({location:{offset:node.offset,length:node.length},severity:ProblemSeverity.Warning,message:jsonParser_localize("maxLengthWarning","String is longer than the maximum length of {0}.",schema.maxLength)});if(schema.pattern){new RegExp(schema.pattern).test(node.value)||validationResult.problems.push({location:{offset:node.offset,length:node.length},severity:ProblemSeverity.Warning,message:schema.patternErrorMessage||schema.errorMessage||jsonParser_localize("patternWarning",'String does not match the pattern of "{0}".',schema.pattern)})}if(schema.format)switch(schema.format){case"uri":case"uri-reference":var errorMessage=void 0;if(node.value)try{vscode_uri.a.parse(node.value).scheme||"uri"!==schema.format||(errorMessage=jsonParser_localize("uriSchemeMissing","URI with a scheme is expected."))}catch(e){errorMessage=e.message}else errorMessage=jsonParser_localize("uriEmpty","URI expected.");errorMessage&&validationResult.problems.push({location:{offset:node.offset,length:node.length},severity:ProblemSeverity.Warning,message:schema.patternErrorMessage||schema.errorMessage||jsonParser_localize("uriFormatWarning","String is not a URI: {0}",errorMessage)});break;case"email":node.value.match(emailPattern)||validationResult.problems.push({location:{offset:node.offset,length:node.length},severity:ProblemSeverity.Warning,message:schema.patternErrorMessage||schema.errorMessage||jsonParser_localize("emailFormatWarning","String is not an e-mail address.")});break;case"color-hex":node.value.match(colorHexPattern)||validationResult.problems.push({location:{offset:node.offset,length:node.length},severity:ProblemSeverity.Warning,message:schema.patternErrorMessage||schema.errorMessage||jsonParser_localize("colorHexFormatWarning","Invalid color format. Use #RGB, #RGBA, #RRGGBB or #RRGGBBAA.")})}}(node,schema,validationResult);break;case"number":!function _validateNumberNode(node,schema,validationResult,matchingSchemas){var val=node.value;"number"==typeof schema.multipleOf&&val%schema.multipleOf!=0&&validationResult.problems.push({location:{offset:node.offset,length:node.length},severity:ProblemSeverity.Warning,message:jsonParser_localize("multipleOfWarning","Value is not divisible by {0}.",schema.multipleOf)});function getExclusiveLimit(limit,exclusive){return"number"==typeof exclusive?exclusive:"boolean"==typeof exclusive&&exclusive?limit:void 0}function getLimit(limit,exclusive){if("boolean"!=typeof exclusive||!exclusive)return limit}var exclusiveMinimum=getExclusiveLimit(schema.minimum,schema.exclusiveMinimum);"number"==typeof exclusiveMinimum&&val<=exclusiveMinimum&&validationResult.problems.push({location:{offset:node.offset,length:node.length},severity:ProblemSeverity.Warning,message:jsonParser_localize("exclusiveMinimumWarning","Value is below the exclusive minimum of {0}.",exclusiveMinimum)});var exclusiveMaximum=getExclusiveLimit(schema.maximum,schema.exclusiveMaximum);"number"==typeof exclusiveMaximum&&val>=exclusiveMaximum&&validationResult.problems.push({location:{offset:node.offset,length:node.length},severity:ProblemSeverity.Warning,message:jsonParser_localize("exclusiveMaximumWarning","Value is above the exclusive maximum of {0}.",exclusiveMaximum)});var minimum=getLimit(schema.minimum,schema.exclusiveMinimum);"number"==typeof minimum&&val<minimum&&validationResult.problems.push({location:{offset:node.offset,length:node.length},severity:ProblemSeverity.Warning,message:jsonParser_localize("minimumWarning","Value is below the minimum of {0}.",minimum)});var maximum=getLimit(schema.maximum,schema.exclusiveMaximum);"number"==typeof maximum&&val>maximum&&validationResult.problems.push({location:{offset:node.offset,length:node.length},severity:ProblemSeverity.Warning,message:jsonParser_localize("maximumWarning","Value is above the maximum of {0}.",maximum)})}(node,schema,validationResult);break;case"property":return validate(node.valueNode,schema,validationResult,matchingSchemas)}!function _validateNode(){function matchesType(type){return node.type===type||"integer"===type&&"number"===node.type&&node.isInteger}Array.isArray(schema.type)?schema.type.some(matchesType)||validationResult.problems.push({location:{offset:node.offset,length:node.length},severity:ProblemSeverity.Warning,message:schema.errorMessage||jsonParser_localize("typeArrayMismatchWarning","Incorrect type. Expected one of {0}.",schema.type.join(", "))}):schema.type&&(matchesType(schema.type)||validationResult.problems.push({location:{offset:node.offset,length:node.length},severity:ProblemSeverity.Warning,message:schema.errorMessage||jsonParser_localize("typeMismatchWarning",'Incorrect type. Expected "{0}".',schema.type)}));Array.isArray(schema.allOf)&&schema.allOf.forEach((function(subSchemaRef){validate(node,asSchema(subSchemaRef),validationResult,matchingSchemas)}));var notSchema=asSchema(schema.not);if(notSchema){var subValidationResult=new ValidationResult,subMatchingSchemas=matchingSchemas.newSub();validate(node,notSchema,subValidationResult,subMatchingSchemas),subValidationResult.hasProblems()||validationResult.problems.push({location:{offset:node.offset,length:node.length},severity:ProblemSeverity.Warning,message:jsonParser_localize("notSchemaWarning","Matches a schema that is not allowed.")}),subMatchingSchemas.schemas.forEach((function(ms){ms.inverted=!ms.inverted,matchingSchemas.add(ms)}))}var testAlternatives=function(alternatives,maxOneMatch){var matches=[],bestMatch=null;return alternatives.forEach((function(subSchemaRef){var subSchema=asSchema(subSchemaRef),subValidationResult=new ValidationResult,subMatchingSchemas=matchingSchemas.newSub();if(validate(node,subSchema,subValidationResult,subMatchingSchemas),subValidationResult.hasProblems()||matches.push(subSchema),bestMatch)if(maxOneMatch||subValidationResult.hasProblems()||bestMatch.validationResult.hasProblems()){var compareResult=subValidationResult.compare(bestMatch.validationResult);compareResult>0?bestMatch={schema:subSchema,validationResult:subValidationResult,matchingSchemas:subMatchingSchemas}:0===compareResult&&(bestMatch.matchingSchemas.merge(subMatchingSchemas),bestMatch.validationResult.mergeEnumValues(subValidationResult))}else bestMatch.matchingSchemas.merge(subMatchingSchemas),bestMatch.validationResult.propertiesMatches+=subValidationResult.propertiesMatches,bestMatch.validationResult.propertiesValueMatches+=subValidationResult.propertiesValueMatches;else bestMatch={schema:subSchema,validationResult:subValidationResult,matchingSchemas:subMatchingSchemas}})),matches.length>1&&maxOneMatch&&validationResult.problems.push({location:{offset:node.offset,length:1},severity:ProblemSeverity.Warning,message:jsonParser_localize("oneOfWarning","Matches multiple schemas when only one must validate.")}),null!==bestMatch&&(validationResult.merge(bestMatch.validationResult),validationResult.propertiesMatches+=bestMatch.validationResult.propertiesMatches,validationResult.propertiesValueMatches+=bestMatch.validationResult.propertiesValueMatches,matchingSchemas.merge(bestMatch.matchingSchemas)),matches.length};Array.isArray(schema.anyOf)&&testAlternatives(schema.anyOf,!1);Array.isArray(schema.oneOf)&&testAlternatives(schema.oneOf,!0);if(Array.isArray(schema.enum)){for(var val=jsonParser_getNodeValue(node),enumValueMatch=!1,_i=0,_a=schema.enum;_i<_a.length;_i++){var e=_a[_i];if(equals(val,e)){enumValueMatch=!0;break}}validationResult.enumValues=schema.enum,validationResult.enumValueMatch=enumValueMatch,enumValueMatch||validationResult.problems.push({location:{offset:node.offset,length:node.length},severity:ProblemSeverity.Warning,code:ErrorCode.EnumValueMismatch,message:schema.errorMessage||jsonParser_localize("enumWarning","Value is not accepted. Valid values: {0}.",schema.enum.map((function(v){return JSON.stringify(v)})).join(", "))})}if(schema.const){equals(val=jsonParser_getNodeValue(node),schema.const)?validationResult.enumValueMatch=!0:(validationResult.problems.push({location:{offset:node.offset,length:node.length},severity:ProblemSeverity.Warning,code:ErrorCode.EnumValueMismatch,message:schema.errorMessage||jsonParser_localize("constWarning","Value must be {0}.",JSON.stringify(schema.const))}),validationResult.enumValueMatch=!1),validationResult.enumValues=[schema.const]}schema.deprecationMessage&&node.parent&&validationResult.problems.push({location:{offset:node.parent.offset,length:node.parent.length},severity:ProblemSeverity.Warning,message:schema.deprecationMessage})}(),matchingSchemas.add({node:node,schema:schema})}}function jsonParser_parse(textDocument,config){var problems=[],text=textDocument.getText(),scanner=main_createScanner(text,!1),comments=config&&config.collectComments?[]:void 0;function _scanNext(){for(;;){var token_1=scanner.scan();switch(_checkScanError(),token_1){case 12:case 13:Array.isArray(comments)&&comments.push({offset:scanner.getTokenOffset(),length:scanner.getTokenLength()});break;case 15:case 14:break;default:return token_1}}}function _errorAtRange(message,code,location){0!==problems.length&&problems[problems.length-1].location.offset===location.offset||problems.push({message:message,location:location,code:code,severity:ProblemSeverity.Error})}function _error(message,code,node,skipUntilAfter,skipUntil){void 0===node&&(node=null),void 0===skipUntilAfter&&(skipUntilAfter=[]),void 0===skipUntil&&(skipUntil=[]);var start=scanner.getTokenOffset(),end=scanner.getTokenOffset()+scanner.getTokenLength();if(start===end&&start>0){for(start--;start>0&&/\s/.test(text.charAt(start));)start--;end=start+1}if(_errorAtRange(message,code,{offset:start,length:end-start}),node&&_finalize(node,!1),skipUntilAfter.length+skipUntil.length>0)for(var token_2=scanner.getToken();17!==token_2;){if(-1!==skipUntilAfter.indexOf(token_2)){_scanNext();break}if(-1!==skipUntil.indexOf(token_2))break;token_2=_scanNext()}return node}function _checkScanError(){switch(scanner.getTokenError()){case 4:return _error(jsonParser_localize("InvalidUnicode","Invalid unicode sequence in string."),ErrorCode.InvalidUnicode),!0;case 5:return _error(jsonParser_localize("InvalidEscapeCharacter","Invalid escape character in string."),ErrorCode.InvalidEscapeCharacter),!0;case 3:return _error(jsonParser_localize("UnexpectedEndOfNumber","Unexpected end of number."),ErrorCode.UnexpectedEndOfNumber),!0;case 1:return _error(jsonParser_localize("UnexpectedEndOfComment","Unexpected end of comment."),ErrorCode.UnexpectedEndOfComment),!0;case 2:return _error(jsonParser_localize("UnexpectedEndOfString","Unexpected end of string."),ErrorCode.UnexpectedEndOfString),!0;case 6:return _error(jsonParser_localize("InvalidCharacter","Invalid characters in string. Control characters must be escaped."),ErrorCode.InvalidCharacter),!0}return!1}function _finalize(node,scanNext){return node.length=scanner.getTokenOffset()+scanner.getTokenLength()-node.offset,scanNext&&_scanNext(),node}function _parseProperty(parent,keysSeen){var node=new PropertyASTNodeImpl(parent,scanner.getTokenOffset()),key=_parseString(node);if(!key){if(16!==scanner.getToken())return null;_error(jsonParser_localize("DoubleQuotesExpected","Property keys must be doublequoted"),ErrorCode.Undefined);var keyNode=new StringASTNodeImpl(node,scanner.getTokenOffset(),scanner.getTokenLength());keyNode.value=scanner.getTokenValue(),key=keyNode,_scanNext()}node.keyNode=key;var seen=keysSeen[key.value];if(seen?(problems.push({location:{offset:node.keyNode.offset,length:node.keyNode.length},message:jsonParser_localize("DuplicateKeyWarning","Duplicate object key"),code:ErrorCode.Undefined,severity:ProblemSeverity.Warning}),"object"==typeof seen&&problems.push({location:{offset:seen.keyNode.offset,length:seen.keyNode.length},message:jsonParser_localize("DuplicateKeyWarning","Duplicate object key"),code:ErrorCode.Undefined,severity:ProblemSeverity.Warning}),keysSeen[key.value]=!0):keysSeen[key.value]=node,6===scanner.getToken())node.colonOffset=scanner.getTokenOffset(),_scanNext();else if(_error(jsonParser_localize("ColonExpected","Colon expected"),ErrorCode.ColonExpected),10===scanner.getToken()&&textDocument.positionAt(key.offset+key.length).line<textDocument.positionAt(scanner.getTokenOffset()).line)return node.length=key.length,node;var value=_parseValue(node,key.value);return value?(node.valueNode=value,node.length=value.offset+value.length-node.offset,node):_error(jsonParser_localize("ValueExpected","Value expected"),ErrorCode.ValueExpected,node,[],[2,5])}function _parseString(parent){if(10!==scanner.getToken())return null;var node=new StringASTNodeImpl(parent,scanner.getTokenOffset());return node.value=scanner.getTokenValue(),_finalize(node,!0)}function _parseValue(parent,name){return function _parseArray(parent){if(3!==scanner.getToken())return null;var node=new ArrayASTNodeImpl(parent,scanner.getTokenOffset());_scanNext();for(var count=0,needsComma=!1;4!==scanner.getToken()&&17!==scanner.getToken();){if(5===scanner.getToken()){needsComma||_error(jsonParser_localize("ValueExpected","Value expected"),ErrorCode.ValueExpected);var commaOffset=scanner.getTokenOffset();if(_scanNext(),4===scanner.getToken()){needsComma&&_errorAtRange(jsonParser_localize("TrailingComma","Trailing comma"),ErrorCode.TrailingComma,{offset:commaOffset,length:1});continue}}else needsComma&&_error(jsonParser_localize("ExpectedComma","Expected comma"),ErrorCode.CommaExpected);var item=_parseValue(node,count++);item?node.items.push(item):_error(jsonParser_localize("PropertyExpected","Value expected"),ErrorCode.ValueExpected,null,[],[4,5]),needsComma=!0}return 4!==scanner.getToken()?_error(jsonParser_localize("ExpectedCloseBracket","Expected comma or closing bracket"),ErrorCode.CommaOrCloseBacketExpected,node):_finalize(node,!0)}(parent)||function _parseObject(parent){if(1!==scanner.getToken())return null;var node=new ObjectASTNodeImpl(parent,scanner.getTokenOffset()),keysSeen=Object.create(null);_scanNext();for(var needsComma=!1;2!==scanner.getToken()&&17!==scanner.getToken();){if(5===scanner.getToken()){needsComma||_error(jsonParser_localize("PropertyExpected","Property expected"),ErrorCode.PropertyExpected);var commaOffset=scanner.getTokenOffset();if(_scanNext(),2===scanner.getToken()){needsComma&&_errorAtRange(jsonParser_localize("TrailingComma","Trailing comma"),ErrorCode.TrailingComma,{offset:commaOffset,length:1});continue}}else needsComma&&_error(jsonParser_localize("ExpectedComma","Expected comma"),ErrorCode.CommaExpected);var property=_parseProperty(node,keysSeen);property?node.properties.push(property):_error(jsonParser_localize("PropertyExpected","Property expected"),ErrorCode.PropertyExpected,null,[],[2,5]),needsComma=!0}return 2!==scanner.getToken()?_error(jsonParser_localize("ExpectedCloseBrace","Expected comma or closing brace"),ErrorCode.CommaOrCloseBraceExpected,node):_finalize(node,!0)}(parent)||_parseString(parent)||function _parseNumber(parent){if(11!==scanner.getToken())return null;var node=new NumberASTNodeImpl(parent,scanner.getTokenOffset());if(0===scanner.getTokenError()){var tokenValue=scanner.getTokenValue();try{var numberValue=JSON.parse(tokenValue);if("number"!=typeof numberValue)return _error(jsonParser_localize("InvalidNumberFormat","Invalid number format."),ErrorCode.Undefined,node);node.value=numberValue}catch(e){return _error(jsonParser_localize("InvalidNumberFormat","Invalid number format."),ErrorCode.Undefined,node)}node.isInteger=-1===tokenValue.indexOf(".")}return _finalize(node,!0)}(parent)||function _parseLiteral(parent){switch(scanner.getToken()){case 7:return _finalize(new NullASTNodeImpl(parent,scanner.getTokenOffset()),!0);case 8:return _finalize(new BooleanASTNodeImpl(parent,!0,scanner.getTokenOffset()),!0);case 9:return _finalize(new BooleanASTNodeImpl(parent,!1,scanner.getTokenOffset()),!0);default:return null}}(parent)}var _root=null;return 17!==_scanNext()&&((_root=_parseValue(null))?17!==scanner.getToken()&&_error(jsonParser_localize("End of file expected","End of file expected."),ErrorCode.Undefined):_error(jsonParser_localize("Invalid symbol","Expected a JSON object, array or literal."),ErrorCode.Undefined)),new JSONDocument(_root,problems,comments)}function strings_endsWith(haystack,needle){var diff=haystack.length-needle.length;return diff>0?haystack.lastIndexOf(needle)===diff:0===diff&&haystack===needle}var jsonCompletion_localize=loadMessageBundle(),jsonCompletion_JSONCompletion=function(){function JSONCompletion(schemaService,contributions,promiseConstructor){void 0===contributions&&(contributions=[]),this.templateVarIdCounter=0,this.schemaService=schemaService,this.contributions=contributions,this.promise=promiseConstructor||Promise}return JSONCompletion.prototype.doResolve=function(item){for(var i=this.contributions.length-1;i>=0;i--)if(this.contributions[i].resolveCompletion){var resolver=this.contributions[i].resolveCompletion(item);if(resolver)return resolver}return this.promise.resolve(item)},JSONCompletion.prototype.doComplete=function(document,position,doc){var _this=this,result={items:[],isIncomplete:!1},offset=document.offsetAt(position),node=doc.getNodeFromOffsetEndInclusive(offset);if(this.isInComment(document,node?node.offset:0,offset))return Promise.resolve(result);var currentWord=this.getCurrentWord(document,offset),overwriteRange=null;if(!node||"string"!==node.type&&"number"!==node.type&&"boolean"!==node.type&&"null"!==node.type){var overwriteStart=offset-currentWord.length;overwriteStart>0&&'"'===document.getText()[overwriteStart-1]&&overwriteStart--,overwriteRange=main_Range.create(document.positionAt(overwriteStart),position)}else overwriteRange=main_Range.create(document.positionAt(node.offset),document.positionAt(node.offset+node.length));var proposed={},collector={add:function(suggestion){var existing=proposed[suggestion.label];existing?existing.documentation||(existing.documentation=suggestion.documentation):(proposed[suggestion.label]=suggestion,overwriteRange&&(suggestion.textEdit=TextEdit.replace(overwriteRange,suggestion.insertText)),result.items.push(suggestion))},setAsIncomplete:function(){result.isIncomplete=!0},error:function(message){console.error(message)},log:function(message){console.log(message)},getNumberOfProposals:function(){return result.items.length}};return this.schemaService.getSchemaForResource(document.uri,doc).then((function(schema){var collectionPromises=[],addValue=!0,currentKey="",currentProperty=null;if(node&&"string"===node.type){var parent=node.parent;parent&&"property"===parent.type&&parent.keyNode===node&&(addValue=!parent.valueNode,currentProperty=parent,currentKey=document.getText().substr(node.offset+1,node.length-2),parent&&(node=parent.parent))}if(node&&"object"===node.type){if(node.offset===offset)return result;node.properties.forEach((function(p){currentProperty&&currentProperty===p||(proposed[p.keyNode.value]=CompletionItem.create("__"))}));var separatorAfter_1="";addValue&&(separatorAfter_1=_this.evaluateSeparatorAfter(document,document.offsetAt(overwriteRange.end))),schema?_this.getPropertyCompletions(schema,doc,node,addValue,separatorAfter_1,collector):_this.getSchemaLessPropertyCompletions(doc,node,currentKey,collector);var location_1=getNodePath(node);_this.contributions.forEach((function(contribution){var collectPromise=contribution.collectPropertyCompletions(document.uri,location_1,currentWord,addValue,""===separatorAfter_1,collector);collectPromise&&collectionPromises.push(collectPromise)})),!schema&&currentWord.length>0&&'"'!==document.getText().charAt(offset-currentWord.length-1)&&collector.add({kind:CompletionItemKind.Property,label:_this.getLabelForValue(currentWord),insertText:_this.getInsertTextForProperty(currentWord,null,!1,separatorAfter_1),insertTextFormat:InsertTextFormat.Snippet,documentation:""})}var types={};return schema?_this.getValueCompletions(schema,doc,node,offset,document,collector,types):_this.getSchemaLessValueCompletions(doc,node,offset,document,collector),_this.contributions.length>0&&_this.getContributedValueCompletions(doc,node,offset,document,collector,collectionPromises),_this.promise.all(collectionPromises).then((function(){if(0===collector.getNumberOfProposals()){var offsetForSeparator=offset;!node||"string"!==node.type&&"number"!==node.type&&"boolean"!==node.type&&"null"!==node.type||(offsetForSeparator=node.offset+node.length);var separatorAfter=_this.evaluateSeparatorAfter(document,offsetForSeparator);_this.addFillerValueCompletions(types,separatorAfter,collector)}return result}))}))},JSONCompletion.prototype.getPropertyCompletions=function(schema,doc,node,addValue,separatorAfter,collector){var _this=this;doc.getMatchingSchemas(schema.schema,node.offset).forEach((function(s){if(s.node===node&&!s.inverted){var schemaProperties_1=s.schema.properties;schemaProperties_1&&Object.keys(schemaProperties_1).forEach((function(key){var propertySchema=schemaProperties_1[key];if("object"==typeof propertySchema&&!propertySchema.deprecationMessage&&!propertySchema.doNotSuggest){var proposal={kind:CompletionItemKind.Property,label:key,insertText:_this.getInsertTextForProperty(key,propertySchema,addValue,separatorAfter),insertTextFormat:InsertTextFormat.Snippet,filterText:_this.getFilterTextForValue(key),documentation:propertySchema.description||""};strings_endsWith(proposal.insertText,"$1"+separatorAfter)&&(proposal.command={title:"Suggest",command:"editor.action.triggerSuggest"}),collector.add(proposal)}}))}}))},JSONCompletion.prototype.getSchemaLessPropertyCompletions=function(doc,node,currentKey,collector){var _this=this,collectCompletionsForSimilarObject=function(obj){obj.properties.forEach((function(p){var key=p.keyNode.value;collector.add({kind:CompletionItemKind.Property,label:key,insertText:_this.getInsertTextForValue(key,""),insertTextFormat:InsertTextFormat.Snippet,filterText:_this.getFilterTextForValue(key),documentation:""})}))};if(node.parent)if("property"===node.parent.type){var parentKey_1=node.parent.keyNode.value;doc.visit((function(n){return"property"===n.type&&n!==node.parent&&n.keyNode.value===parentKey_1&&n.valueNode&&"object"===n.valueNode.type&&collectCompletionsForSimilarObject(n.valueNode),!0}))}else"array"===node.parent.type&&node.parent.items.forEach((function(n){"object"===n.type&&n!==node&&collectCompletionsForSimilarObject(n)}));else"object"===node.type&&collector.add({kind:CompletionItemKind.Property,label:"$schema",insertText:this.getInsertTextForProperty("$schema",null,!0,""),insertTextFormat:InsertTextFormat.Snippet,documentation:"",filterText:this.getFilterTextForValue("$schema")})},JSONCompletion.prototype.getSchemaLessValueCompletions=function(doc,node,offset,document,collector){var _this=this,offsetForSeparator=offset;if(!node||"string"!==node.type&&"number"!==node.type&&"boolean"!==node.type&&"null"!==node.type||(offsetForSeparator=node.offset+node.length,node=node.parent),!node)return collector.add({kind:this.getSuggestionKind("object"),label:"Empty object",insertText:this.getInsertTextForValue({},""),insertTextFormat:InsertTextFormat.Snippet,documentation:""}),void collector.add({kind:this.getSuggestionKind("array"),label:"Empty array",insertText:this.getInsertTextForValue([],""),insertTextFormat:InsertTextFormat.Snippet,documentation:""});var separatorAfter=this.evaluateSeparatorAfter(document,offsetForSeparator),collectSuggestionsForValues=function(value){contains(value.parent,offset,!0)||collector.add({kind:_this.getSuggestionKind(value.type),label:_this.getLabelTextForMatchingNode(value,document),insertText:_this.getInsertTextForMatchingNode(value,document,separatorAfter),insertTextFormat:InsertTextFormat.Snippet,documentation:""}),"boolean"===value.type&&_this.addBooleanValueCompletion(!value.value,separatorAfter,collector)};if("property"===node.type&&offset>node.colonOffset){var valueNode=node.valueNode;if(valueNode&&(offset>valueNode.offset+valueNode.length||"object"===valueNode.type||"array"===valueNode.type))return;var parentKey_2=node.keyNode.value;doc.visit((function(n){return"property"===n.type&&n.keyNode.value===parentKey_2&&n.valueNode&&collectSuggestionsForValues(n.valueNode),!0})),"$schema"===parentKey_2&&node.parent&&!node.parent.parent&&this.addDollarSchemaCompletions(separatorAfter,collector)}if("array"===node.type)if(node.parent&&"property"===node.parent.type){var parentKey_3=node.parent.keyNode.value;doc.visit((function(n){var p=n;return"property"===n.type&&p.keyNode.value===parentKey_3&&p.valueNode&&"array"===p.valueNode.type&&p.valueNode.items.forEach(collectSuggestionsForValues),!0}))}else node.items.forEach(collectSuggestionsForValues)},JSONCompletion.prototype.getValueCompletions=function(schema,doc,node,offset,document,collector,types){var _this=this,offsetForSeparator=offset,parentKey=null,valueNode=null;if(!node||"string"!==node.type&&"number"!==node.type&&"boolean"!==node.type&&"null"!==node.type||(offsetForSeparator=node.offset+node.length,valueNode=node,node=node.parent),node){if("property"===node.type&&offset>node.colonOffset){var valueNode_1=node.valueNode;if(valueNode_1&&offset>valueNode_1.offset+valueNode_1.length)return;parentKey=node.keyNode.value,node=node.parent}if(node&&(null!==parentKey||"array"===node.type)){var separatorAfter_2=this.evaluateSeparatorAfter(document,offsetForSeparator);doc.getMatchingSchemas(schema.schema,node.offset,valueNode).forEach((function(s){if(s.node===node&&!s.inverted&&s.schema){if("array"===node.type&&s.schema.items)if(Array.isArray(s.schema.items)){var index=_this.findItemAtOffset(node,document,offset);index<s.schema.items.length&&_this.addSchemaValueCompletions(s.schema.items[index],separatorAfter_2,collector,types)}else _this.addSchemaValueCompletions(s.schema.items,separatorAfter_2,collector,types);if(s.schema.properties){var propertySchema=s.schema.properties[parentKey];propertySchema&&_this.addSchemaValueCompletions(propertySchema,separatorAfter_2,collector,types)}}})),"$schema"!==parentKey||node.parent||this.addDollarSchemaCompletions(separatorAfter_2,collector),types.boolean&&(this.addBooleanValueCompletion(!0,separatorAfter_2,collector),this.addBooleanValueCompletion(!1,separatorAfter_2,collector)),types.null&&this.addNullValueCompletion(separatorAfter_2,collector)}}else this.addSchemaValueCompletions(schema.schema,"",collector,types)},JSONCompletion.prototype.getContributedValueCompletions=function(doc,node,offset,document,collector,collectionPromises){if(node){if("string"!==node.type&&"number"!==node.type&&"boolean"!==node.type&&"null"!==node.type||(node=node.parent),"property"===node.type&&offset>node.colonOffset){var parentKey_4=node.keyNode.value,valueNode=node.valueNode;if(!valueNode||offset<=valueNode.offset+valueNode.length){var location_2=getNodePath(node.parent);this.contributions.forEach((function(contribution){var collectPromise=contribution.collectValueCompletions(document.uri,location_2,parentKey_4,collector);collectPromise&&collectionPromises.push(collectPromise)}))}}}else this.contributions.forEach((function(contribution){var collectPromise=contribution.collectDefaultCompletions(document.uri,collector);collectPromise&&collectionPromises.push(collectPromise)}))},JSONCompletion.prototype.addSchemaValueCompletions=function(schema,separatorAfter,collector,types){var _this=this;"object"==typeof schema&&(this.addEnumValueCompletions(schema,separatorAfter,collector),this.addDefaultValueCompletions(schema,separatorAfter,collector),this.collectTypes(schema,types),Array.isArray(schema.allOf)&&schema.allOf.forEach((function(s){return _this.addSchemaValueCompletions(s,separatorAfter,collector,types)})),Array.isArray(schema.anyOf)&&schema.anyOf.forEach((function(s){return _this.addSchemaValueCompletions(s,separatorAfter,collector,types)})),Array.isArray(schema.oneOf)&&schema.oneOf.forEach((function(s){return _this.addSchemaValueCompletions(s,separatorAfter,collector,types)})))},JSONCompletion.prototype.addDefaultValueCompletions=function(schema,separatorAfter,collector,arrayDepth){var _this=this;void 0===arrayDepth&&(arrayDepth=0);var hasProposals=!1;if(schema.default){for(var type=schema.type,value=schema.default,i=arrayDepth;i>0;i--)value=[value],type="array";collector.add({kind:this.getSuggestionKind(type),label:this.getLabelForValue(value),insertText:this.getInsertTextForValue(value,separatorAfter),insertTextFormat:InsertTextFormat.Snippet,detail:jsonCompletion_localize("json.suggest.default","Default value")}),hasProposals=!0}Array.isArray(schema.defaultSnippets)&&schema.defaultSnippets.forEach((function(s){var insertText,filterText,type=schema.type,value=s.body,label=s.label;if(void 0!==value){schema.type;for(var i=arrayDepth;i>0;i--)value=[value],"array";insertText=_this.getInsertTextForSnippetValue(value,separatorAfter),filterText=_this.getFilterTextForSnippetValue(value),label=label||_this.getLabelForSnippetValue(value)}else if("string"==typeof s.bodyText){var prefix="",suffix="",indent="";for(i=arrayDepth;i>0;i--)prefix=prefix+indent+"[\n",suffix=suffix+"\n"+indent+"]",indent+="\t",type="array";insertText=prefix+indent+s.bodyText.split("\n").join("\n"+indent)+suffix+separatorAfter,label=label||insertText,filterText=insertText.replace(/[\n]/g,"")}collector.add({kind:_this.getSuggestionKind(type),label:label,documentation:s.description,insertText:insertText,insertTextFormat:InsertTextFormat.Snippet,filterText:filterText}),hasProposals=!0})),hasProposals||"object"!=typeof schema.items||Array.isArray(schema.items)||this.addDefaultValueCompletions(schema.items,separatorAfter,collector,arrayDepth+1)},JSONCompletion.prototype.addEnumValueCompletions=function(schema,separatorAfter,collector){if(Array.isArray(schema.enum))for(var i=0,length=schema.enum.length;i<length;i++){var enm=schema.enum[i],documentation=schema.description;schema.enumDescriptions&&i<schema.enumDescriptions.length&&(documentation=schema.enumDescriptions[i]),collector.add({kind:this.getSuggestionKind(schema.type),label:this.getLabelForValue(enm),insertText:this.getInsertTextForValue(enm,separatorAfter),insertTextFormat:InsertTextFormat.Snippet,documentation:documentation})}},JSONCompletion.prototype.collectTypes=function(schema,types){if(!Array.isArray(schema.enum)){var type=schema.type;Array.isArray(type)?type.forEach((function(t){return types[t]=!0})):types[type]=!0}},JSONCompletion.prototype.addFillerValueCompletions=function(types,separatorAfter,collector){types.object&&collector.add({kind:this.getSuggestionKind("object"),label:"{}",insertText:this.getInsertTextForGuessedValue({},separatorAfter),insertTextFormat:InsertTextFormat.Snippet,detail:jsonCompletion_localize("defaults.object","New object"),documentation:""}),types.array&&collector.add({kind:this.getSuggestionKind("array"),label:"[]",insertText:this.getInsertTextForGuessedValue([],separatorAfter),insertTextFormat:InsertTextFormat.Snippet,detail:jsonCompletion_localize("defaults.array","New array"),documentation:""})},JSONCompletion.prototype.addBooleanValueCompletion=function(value,separatorAfter,collector){collector.add({kind:this.getSuggestionKind("boolean"),label:value?"true":"false",insertText:this.getInsertTextForValue(value,separatorAfter),insertTextFormat:InsertTextFormat.Snippet,documentation:""})},JSONCompletion.prototype.addNullValueCompletion=function(separatorAfter,collector){collector.add({kind:this.getSuggestionKind("null"),label:"null",insertText:"null"+separatorAfter,insertTextFormat:InsertTextFormat.Snippet,documentation:""})},JSONCompletion.prototype.addDollarSchemaCompletions=function(separatorAfter,collector){var _this=this;this.schemaService.getRegisteredSchemaIds((function(schema){return"http"===schema||"https"===schema})).forEach((function(schemaId){return collector.add({kind:CompletionItemKind.Module,label:_this.getLabelForValue(schemaId),filterText:_this.getFilterTextForValue(schemaId),insertText:_this.getInsertTextForValue(schemaId,separatorAfter),insertTextFormat:InsertTextFormat.Snippet,documentation:""})}))},JSONCompletion.prototype.getLabelForValue=function(value){var label=JSON.stringify(value);return label.length>57?label.substr(0,57).trim()+"...":label},JSONCompletion.prototype.getFilterTextForValue=function(value){return JSON.stringify(value)},JSONCompletion.prototype.getFilterTextForSnippetValue=function(value){return JSON.stringify(value).replace(/\$\{\d+:([^}]+)\}|\$\d+/g,"$1")},JSONCompletion.prototype.getLabelForSnippetValue=function(value){var label=JSON.stringify(value);return(label=label.replace(/\$\{\d+:([^}]+)\}|\$\d+/g,"$1")).length>57?label.substr(0,57).trim()+"...":label},JSONCompletion.prototype.getInsertTextForPlainText=function(text){return text.replace(/[\\\$\}]/g,"\\$&")},JSONCompletion.prototype.getInsertTextForValue=function(value,separatorAfter){var text=JSON.stringify(value,null,"\t");return"{}"===text?"{\n\t$1\n}"+separatorAfter:"[]"===text?"[\n\t$1\n]"+separatorAfter:this.getInsertTextForPlainText(text+separatorAfter)},JSONCompletion.prototype.getInsertTextForSnippetValue=function(value,separatorAfter){return function stringifyObject(obj,indent,stringifyLiteral){if(null!==obj&&"object"==typeof obj){var newIndent=indent+"\t";if(Array.isArray(obj)){if(0===obj.length)return"[]";for(var result="[\n",i=0;i<obj.length;i++)result+=newIndent+stringifyObject(obj[i],newIndent,stringifyLiteral),i<obj.length-1&&(result+=","),result+="\n";return result+=indent+"]"}var keys=Object.keys(obj);if(0===keys.length)return"{}";for(result="{\n",i=0;i<keys.length;i++){var key=keys[i];result+=newIndent+JSON.stringify(key)+": "+stringifyObject(obj[key],newIndent,stringifyLiteral),i<keys.length-1&&(result+=","),result+="\n"}return result+=indent+"}"}return stringifyLiteral(obj)}(value,"",(function(value){return"string"==typeof value&&"^"===value[0]?value.substr(1):JSON.stringify(value)}))+separatorAfter},JSONCompletion.prototype.getInsertTextForGuessedValue=function(value,separatorAfter){switch(typeof value){case"object":return null===value?"${1:null}"+separatorAfter:this.getInsertTextForValue(value,separatorAfter);case"string":var snippetValue=JSON.stringify(value);return snippetValue=snippetValue.substr(1,snippetValue.length-2),'"${1:'+(snippetValue=this.getInsertTextForPlainText(snippetValue))+'}"'+separatorAfter;case"number":case"boolean":return"${1:"+JSON.stringify(value)+"}"+separatorAfter}return this.getInsertTextForValue(value,separatorAfter)},JSONCompletion.prototype.getSuggestionKind=function(type){if(Array.isArray(type)){var array=type;type=array.length>0?array[0]:null}if(!type)return CompletionItemKind.Value;switch(type){case"string":return CompletionItemKind.Value;case"object":return CompletionItemKind.Module;case"property":return CompletionItemKind.Property;default:return CompletionItemKind.Value}},JSONCompletion.prototype.getLabelTextForMatchingNode=function(node,document){switch(node.type){case"array":return"[]";case"object":return"{}";default:return document.getText().substr(node.offset,node.length)}},JSONCompletion.prototype.getInsertTextForMatchingNode=function(node,document,separatorAfter){switch(node.type){case"array":return this.getInsertTextForValue([],separatorAfter);case"object":return this.getInsertTextForValue({},separatorAfter);default:var content=document.getText().substr(node.offset,node.length)+separatorAfter;return this.getInsertTextForPlainText(content)}},JSONCompletion.prototype.getInsertTextForProperty=function(key,propertySchema,addValue,separatorAfter){var propertyText=this.getInsertTextForValue(key,"");if(!addValue)return propertyText;var value,resultText=propertyText+": ",nValueProposals=0;if(propertySchema){if(Array.isArray(propertySchema.defaultSnippets)){if(1===propertySchema.defaultSnippets.length){var body=propertySchema.defaultSnippets[0].body;void 0!==body&&(value=this.getInsertTextForSnippetValue(body,""))}nValueProposals+=propertySchema.defaultSnippets.length}if(propertySchema.enum&&(value||1!==propertySchema.enum.length||(value=this.getInsertTextForGuessedValue(propertySchema.enum[0],"")),nValueProposals+=propertySchema.enum.length),void 0!==propertySchema.default&&(value||(value=this.getInsertTextForGuessedValue(propertySchema.default,"")),nValueProposals++),0===nValueProposals){var type=Array.isArray(propertySchema.type)?propertySchema.type[0]:propertySchema.type;switch(type||(propertySchema.properties?type="object":propertySchema.items&&(type="array")),type){case"boolean":value="$1";break;case"string":value='"$1"';break;case"object":value="{\n\t$1\n}";break;case"array":value="[\n\t$1\n]";break;case"number":case"integer":value="${1:0}";break;case"null":value="${1:null}";break;default:return propertyText}}}return(!value||nValueProposals>1)&&(value="$1"),resultText+value+separatorAfter},JSONCompletion.prototype.getCurrentWord=function(document,offset){for(var i=offset-1,text=document.getText();i>=0&&-1===' \t\n\r\v":{[,]}'.indexOf(text.charAt(i));)i--;return text.substring(i+1,offset)},JSONCompletion.prototype.evaluateSeparatorAfter=function(document,offset){var scanner=main_createScanner(document.getText(),!0);switch(scanner.setPosition(offset),scanner.scan()){case 5:case 2:case 4:case 17:return"";default:return","}},JSONCompletion.prototype.findItemAtOffset=function(node,document,offset){for(var scanner=main_createScanner(document.getText(),!0),children=node.items,i=children.length-1;i>=0;i--){var child=children[i];if(offset>child.offset+child.length)return scanner.setPosition(child.offset+child.length),5===scanner.scan()&&offset>=scanner.getTokenOffset()+scanner.getTokenLength()?i+1:i;if(offset>=child.offset)return i}return 0},JSONCompletion.prototype.isInComment=function(document,start,offset){var scanner=main_createScanner(document.getText(),!1);scanner.setPosition(start);for(var token=scanner.scan();17!==token&&scanner.getTokenOffset()+scanner.getTokenLength()<offset;)token=scanner.scan();return(12===token||13===token)&&scanner.getTokenOffset()<=offset},JSONCompletion}(),jsonHover_JSONHover=function(){function JSONHover(schemaService,contributions,promiseConstructor){void 0===contributions&&(contributions=[]),this.schemaService=schemaService,this.contributions=contributions,this.promise=promiseConstructor||Promise}return JSONHover.prototype.doHover=function(document,position,doc){var offset=document.offsetAt(position),node=doc.getNodeFromOffset(offset);if(!node||("object"===node.type||"array"===node.type)&&offset>node.offset+1&&offset<node.offset+node.length-1)return this.promise.resolve(null);var hoverRangeNode=node;if("string"===node.type){var parent=node.parent;if("property"===parent.type&&parent.keyNode===node&&!(node=parent.valueNode))return this.promise.resolve(null)}for(var hoverRange=main_Range.create(document.positionAt(hoverRangeNode.offset),document.positionAt(hoverRangeNode.offset+hoverRangeNode.length)),createHover=function(contents){return{contents:contents,range:hoverRange}},location=getNodePath(node),i=this.contributions.length-1;i>=0;i--){var promise=this.contributions[i].getInfoContribution(document.uri,location);if(promise)return promise.then((function(htmlContent){return createHover(htmlContent)}))}return this.schemaService.getSchemaForResource(document.uri,doc).then((function(schema){if(schema){var matchingSchemas=doc.getMatchingSchemas(schema.schema,node.offset),title_1=null,markdownDescription_1=null,markdownEnumValueDescription_1=null,enumValue_1=null;matchingSchemas.every((function(s){if(s.node===node&&!s.inverted&&s.schema&&(title_1=title_1||s.schema.title,markdownDescription_1=markdownDescription_1||s.schema.markdownDescription||toMarkdown(s.schema.description),s.schema.enum)){var idx=s.schema.enum.indexOf(jsonParser_getNodeValue(node));s.schema.markdownEnumDescriptions?markdownEnumValueDescription_1=s.schema.markdownEnumDescriptions[idx]:s.schema.enumDescriptions&&(markdownEnumValueDescription_1=toMarkdown(s.schema.enumDescriptions[idx])),markdownEnumValueDescription_1&&"string"!=typeof(enumValue_1=s.schema.enum[idx])&&(enumValue_1=JSON.stringify(enumValue_1))}return!0}));var result="";return title_1&&(result=toMarkdown(title_1)),markdownDescription_1&&(result.length>0&&(result+="\n\n"),result+=markdownDescription_1),markdownEnumValueDescription_1&&(result.length>0&&(result+="\n\n"),result+="`"+toMarkdown(enumValue_1)+"`: "+markdownEnumValueDescription_1),createHover([result])}return null}))},JSONHover}();function toMarkdown(plain){if(plain)return plain.replace(/([^\n\r])(\r?\n)([^\n\r])/gm,"$1\n\n$3").replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}var jsonValidation_localize=loadMessageBundle(),jsonValidation_JSONValidation=function(){function JSONValidation(jsonSchemaService,promiseConstructor){this.jsonSchemaService=jsonSchemaService,this.promise=promiseConstructor,this.validationEnabled=!0}return JSONValidation.prototype.configure=function(raw){raw&&(this.validationEnabled=raw.validate,this.commentSeverity=raw.allowComments?ProblemSeverity.Ignore:ProblemSeverity.Error)},JSONValidation.prototype.doValidation=function(textDocument,jsonDocument,documentSettings){var _this=this;if(!this.validationEnabled)return this.promise.resolve([]);var diagnostics=[],added={},addProblem=function(problem){if(problem.severity!==ProblemSeverity.Ignore){var signature=problem.location.offset+" "+problem.location.length+" "+problem.message;if(!added[signature]){added[signature]=!0;var range={start:textDocument.positionAt(problem.location.offset),end:textDocument.positionAt(problem.location.offset+problem.location.length)},severity=problem.severity===ProblemSeverity.Error?DiagnosticSeverity.Error:DiagnosticSeverity.Warning;diagnostics.push({severity:severity,range:range,message:problem.message})}}};return this.jsonSchemaService.getSchemaForResource(textDocument.uri,jsonDocument).then((function(schema){var trailingCommaSeverity=documentSettings?documentSettings.trailingCommas:ProblemSeverity.Error,commentSeverity=documentSettings?documentSettings.comments:_this.commentSeverity;if(schema){if(schema.errors.length&&jsonDocument.root){var astRoot=jsonDocument.root,property="object"===astRoot.type?astRoot.properties[0]:null;if(property&&"$schema"===property.keyNode.value){var node=property.valueNode||property;addProblem({location:{offset:node.offset,length:node.length},message:schema.errors[0],severity:ProblemSeverity.Warning})}else addProblem({location:{offset:astRoot.offset,length:1},message:schema.errors[0],severity:ProblemSeverity.Warning})}else{var semanticErrors=jsonDocument.validate(schema.schema);semanticErrors&&semanticErrors.forEach(addProblem)}schemaAllowsComments(schema.schema)&&(trailingCommaSeverity=commentSeverity=ProblemSeverity.Ignore)}if(jsonDocument.syntaxErrors.forEach((function(p){p.code===ErrorCode.TrailingComma&&(p.severity=trailingCommaSeverity),addProblem(p)})),diagnostics.push.apply(diagnostics,jsonDocument.externalDiagnostic),commentSeverity!==ProblemSeverity.Ignore){var message_1=jsonValidation_localize("InvalidCommentToken","Comments are not permitted in JSON.");jsonDocument.comments.forEach((function(c){addProblem({location:c,severity:commentSeverity,message:message_1})}))}return diagnostics}))},JSONValidation}();function schemaAllowsComments(schemaRef){if(schemaRef&&"object"==typeof schemaRef){if(schemaRef.allowComments)return!0;if(schemaRef.allOf)return schemaRef.allOf.some(schemaAllowsComments)}return!1}function hexDigit(charCode){return charCode<48?0:charCode<=57?charCode-48:(charCode<97&&(charCode+=32),charCode>=97&&charCode<=102?charCode-97+10:0)}function colorFromHex(text){if("#"!==text[0])return null;switch(text.length){case 4:return{red:17*hexDigit(text.charCodeAt(1))/255,green:17*hexDigit(text.charCodeAt(2))/255,blue:17*hexDigit(text.charCodeAt(3))/255,alpha:1};case 5:return{red:17*hexDigit(text.charCodeAt(1))/255,green:17*hexDigit(text.charCodeAt(2))/255,blue:17*hexDigit(text.charCodeAt(3))/255,alpha:17*hexDigit(text.charCodeAt(4))/255};case 7:return{red:(16*hexDigit(text.charCodeAt(1))+hexDigit(text.charCodeAt(2)))/255,green:(16*hexDigit(text.charCodeAt(3))+hexDigit(text.charCodeAt(4)))/255,blue:(16*hexDigit(text.charCodeAt(5))+hexDigit(text.charCodeAt(6)))/255,alpha:1};case 9:return{red:(16*hexDigit(text.charCodeAt(1))+hexDigit(text.charCodeAt(2)))/255,green:(16*hexDigit(text.charCodeAt(3))+hexDigit(text.charCodeAt(4)))/255,blue:(16*hexDigit(text.charCodeAt(5))+hexDigit(text.charCodeAt(6)))/255,alpha:(16*hexDigit(text.charCodeAt(7))+hexDigit(text.charCodeAt(8)))/255}}return null}var jsonDocumentSymbols_JSONDocumentSymbols=function(){function JSONDocumentSymbols(schemaService){this.schemaService=schemaService}return JSONDocumentSymbols.prototype.findDocumentSymbols=function(document,doc){var _this=this,root=doc.root;if(!root)return null;var resourceString=document.uri;if(("vscode://defaultsettings/keybindings.json"===resourceString||strings_endsWith(resourceString.toLowerCase(),"/user/keybindings.json"))&&"array"===root.type){var result_1=[];return root.items.forEach((function(item){if("object"===item.type)for(var _i=0,_a=item.properties;_i<_a.length;_i++){var property=_a[_i];if("key"===property.keyNode.value){if(property.valueNode){var location=Location.create(document.uri,main_Range.create(document.positionAt(item.offset),document.positionAt(item.offset+item.length)));result_1.push({name:jsonParser_getNodeValue(property.valueNode),kind:SymbolKind.Function,location:location})}return}}})),result_1}var collectOutlineEntries=function(result,node,containerName){return"array"===node.type?node.items.forEach((function(node){return collectOutlineEntries(result,node,containerName)})):"object"===node.type&&node.properties.forEach((function(property){var location=Location.create(document.uri,main_Range.create(document.positionAt(property.offset),document.positionAt(property.offset+property.length))),valueNode=property.valueNode;if(valueNode){var childContainerName=containerName?containerName+"."+property.keyNode.value:property.keyNode.value;result.push({name:property.keyNode.value,kind:_this.getSymbolKind(valueNode.type),location:location,containerName:containerName}),collectOutlineEntries(result,valueNode,childContainerName)}})),result};return collectOutlineEntries([],root,void 0)},JSONDocumentSymbols.prototype.getSymbolKind=function(nodeType){switch(nodeType){case"object":return SymbolKind.Module;case"string":return SymbolKind.String;case"number":return SymbolKind.Number;case"array":return SymbolKind.Array;case"boolean":return SymbolKind.Boolean;default:return SymbolKind.Variable}},JSONDocumentSymbols.prototype.findDocumentColors=function(document,doc){return this.schemaService.getSchemaForResource(document.uri,doc).then((function(schema){var result=[];if(schema)for(var visitedNode={},_i=0,matchingSchemas_1=doc.getMatchingSchemas(schema.schema);_i<matchingSchemas_1.length;_i++){var s=matchingSchemas_1[_i];if(!s.inverted&&s.schema&&("color"===s.schema.format||"color-hex"===s.schema.format)&&s.node&&"string"===s.node.type){var nodeId=String(s.node.offset);if(!visitedNode[nodeId]){var color=colorFromHex(jsonParser_getNodeValue(s.node));if(color){var range=main_Range.create(document.positionAt(s.node.offset),document.positionAt(s.node.offset+s.node.length));result.push({color:color,range:range})}visitedNode[nodeId]=!0}}}return result}))},JSONDocumentSymbols.prototype.getColorPresentations=function(document,doc,color,range){var label,result=[],red256=Math.round(255*color.red),green256=Math.round(255*color.green),blue256=Math.round(255*color.blue);function toTwoDigitHex(n){var r=n.toString(16);return 2!==r.length?"0"+r:r}return label=1===color.alpha?"#"+toTwoDigitHex(red256)+toTwoDigitHex(green256)+toTwoDigitHex(blue256):"#"+toTwoDigitHex(red256)+toTwoDigitHex(green256)+toTwoDigitHex(blue256)+toTwoDigitHex(Math.round(255*color.alpha)),result.push({label:label,textEdit:TextEdit.replace(range,JSON.stringify(label))}),result},JSONDocumentSymbols}(),configuration_localize=loadMessageBundle(),schemaContributions={schemaAssociations:{},schemas:{"http://json-schema.org/draft-04/schema#":{title:configuration_localize("schema.json","Describes a JSON file using a schema. See json-schema.org for more info."),$schema:"http://json-schema.org/draft-04/schema#",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},positiveInteger:{type:"integer",minimum:0},positiveIntegerDefault0:{allOf:[{$ref:"#/definitions/positiveInteger"},{default:0}]},simpleTypes:{type:"string",enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},minItems:1,uniqueItems:!0}},type:"object",properties:{id:{type:"string",format:"uri",description:configuration_localize("schema.json.id","A unique identifier for the schema.")},$schema:{type:"string",format:"uri",description:configuration_localize("schema.json.$schema","The schema to verify this document against ")},title:{type:"string",description:configuration_localize("schema.json.title","A descriptive title of the element")},description:{type:"string",description:configuration_localize("schema.json.description","A long description of the element. Used in hover menus and suggestions.")},default:{description:configuration_localize("schema.json.default","A default value. Used by suggestions.")},multipleOf:{type:"number",minimum:0,exclusiveMinimum:!0,description:configuration_localize("schema.json.multipleOf","A number that should cleanly divide the current value (i.e. have no remainder)")},maximum:{type:"number",description:configuration_localize("schema.json.maximum","The maximum numerical value, inclusive by default.")},exclusiveMaximum:{type:"boolean",default:!1,description:configuration_localize("schema.json.exclusiveMaximum","Makes the maximum property exclusive.")},minimum:{type:"number",description:configuration_localize("schema.json.minimum","The minimum numerical value, inclusive by default.")},exclusiveMinimum:{type:"boolean",default:!1,description:configuration_localize("schema.json.exclusiveMininum","Makes the minimum property exclusive.")},maxLength:{allOf:[{$ref:"#/definitions/positiveInteger"}],description:configuration_localize("schema.json.maxLength","The maximum length of a string.")},minLength:{allOf:[{$ref:"#/definitions/positiveIntegerDefault0"}],description:configuration_localize("schema.json.minLength","The minimum length of a string.")},pattern:{type:"string",format:"regex",description:configuration_localize("schema.json.pattern","A regular expression to match the string against. It is not implicitly anchored.")},additionalItems:{anyOf:[{type:"boolean"},{$ref:"#"}],default:{},description:configuration_localize("schema.json.additionalItems","For arrays, only when items is set as an array. If it is a schema, then this schema validates items after the ones specified by the items array. If it is false, then additional items will cause validation to fail.")},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:{},description:configuration_localize("schema.json.items","For arrays. Can either be a schema to validate every element against or an array of schemas to validate each item against in order (the first schema will validate the first element, the second schema will validate the second element, and so on.")},maxItems:{allOf:[{$ref:"#/definitions/positiveInteger"}],description:configuration_localize("schema.json.maxItems","The maximum number of items that can be inside an array. Inclusive.")},minItems:{allOf:[{$ref:"#/definitions/positiveIntegerDefault0"}],description:configuration_localize("schema.json.minItems","The minimum number of items that can be inside an array. Inclusive.")},uniqueItems:{type:"boolean",default:!1,description:configuration_localize("schema.json.uniqueItems","If all of the items in the array must be unique. Defaults to false.")},maxProperties:{allOf:[{$ref:"#/definitions/positiveInteger"}],description:configuration_localize("schema.json.maxProperties","The maximum number of properties an object can have. Inclusive.")},minProperties:{allOf:[{$ref:"#/definitions/positiveIntegerDefault0"}],description:configuration_localize("schema.json.minProperties","The minimum number of properties an object can have. Inclusive.")},required:{allOf:[{$ref:"#/definitions/stringArray"}],description:configuration_localize("schema.json.required","An array of strings that lists the names of all properties required on this object.")},additionalProperties:{anyOf:[{type:"boolean"},{$ref:"#"}],default:{},description:configuration_localize("schema.json.additionalProperties","Either a schema or a boolean. If a schema, then used to validate all properties not matched by 'properties' or 'patternProperties'. If false, then any properties not matched by either will cause this schema to fail.")},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{},description:configuration_localize("schema.json.definitions","Not used for validation. Place subschemas here that you wish to reference inline with $ref")},properties:{type:"object",additionalProperties:{$ref:"#"},default:{},description:configuration_localize("schema.json.properties","A map of property names to schemas for each property.")},patternProperties:{type:"object",additionalProperties:{$ref:"#"},default:{},description:configuration_localize("schema.json.patternProperties","A map of regular expressions on property names to schemas for matching properties.")},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]},description:configuration_localize("schema.json.dependencies","A map of property names to either an array of property names or a schema. An array of property names means the property named in the key depends on the properties in the array being present in the object in order to be valid. If the value is a schema, then the schema is only applied to the object if the property in the key exists on the object.")},enum:{type:"array",minItems:1,uniqueItems:!0,description:configuration_localize("schema.json.enum","The set of literal values that are valid")},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}],description:configuration_localize("schema.json.type","Either a string of one of the basic schema types (number, integer, null, array, object, boolean, string) or an array of strings specifying a subset of those types.")},format:{anyOf:[{type:"string",description:configuration_localize("schema.json.format","Describes the format expected for the value."),enum:["date-time","uri","email","hostname","ipv4","ipv6","regex"]},{type:"string"}]},allOf:{allOf:[{$ref:"#/definitions/schemaArray"}],description:configuration_localize("schema.json.allOf","An array of schemas, all of which must match.")},anyOf:{allOf:[{$ref:"#/definitions/schemaArray"}],description:configuration_localize("schema.json.anyOf","An array of schemas, where at least one must match.")},oneOf:{allOf:[{$ref:"#/definitions/schemaArray"}],description:configuration_localize("schema.json.oneOf","An array of schemas, exactly one of which must match.")},not:{allOf:[{$ref:"#"}],description:configuration_localize("schema.json.not","A schema which must not match.")}},dependencies:{exclusiveMaximum:["maximum"],exclusiveMinimum:["minimum"]},default:{}}}},jsonSchemaService_localize=loadMessageBundle(),jsonSchemaService_FilePatternAssociation=function(){function FilePatternAssociation(pattern){try{this.patternRegExp=new RegExp(function strings_convertSimple2RegExpPattern(pattern){return pattern.replace(/[\-\\\{\}\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&").replace(/[\*]/g,".*")}(pattern)+"$")}catch(e){this.patternRegExp=null}this.schemas=[]}return FilePatternAssociation.prototype.addSchema=function(id){this.schemas.push(id)},FilePatternAssociation.prototype.matchesPattern=function(fileName){return this.patternRegExp&&this.patternRegExp.test(fileName)},FilePatternAssociation.prototype.getSchemas=function(){return this.schemas},FilePatternAssociation}(),SchemaHandle=function(){function SchemaHandle(service,url,unresolvedSchemaContent){this.service=service,this.url=url,unresolvedSchemaContent&&(this.unresolvedSchema=this.service.promise.resolve(new UnresolvedSchema(unresolvedSchemaContent)))}return SchemaHandle.prototype.getUnresolvedSchema=function(){return this.unresolvedSchema||(this.unresolvedSchema=this.service.loadSchema(this.url)),this.unresolvedSchema},SchemaHandle.prototype.getResolvedSchema=function(){var _this=this;return this.resolvedSchema||(this.resolvedSchema=this.getUnresolvedSchema().then((function(unresolved){return _this.service.resolveSchemaContent(unresolved,_this.url)}))),this.resolvedSchema},SchemaHandle.prototype.clearSchema=function(){this.resolvedSchema=null,this.unresolvedSchema=null},SchemaHandle}(),UnresolvedSchema=function UnresolvedSchema(schema,errors){void 0===errors&&(errors=[]),this.schema=schema,this.errors=errors},jsonSchemaService_ResolvedSchema=function(){function ResolvedSchema(schema,errors){void 0===errors&&(errors=[]),this.schema=schema,this.errors=errors}return ResolvedSchema.prototype.getSection=function(path){return asSchema(this.getSectionRecursive(path,this.schema))},ResolvedSchema.prototype.getSectionRecursive=function(path,schema){var _this=this;if(!schema||"boolean"==typeof schema||0===path.length)return schema;var next=path.shift();if(schema.properties&&(schema.properties[next],1))return this.getSectionRecursive(path,schema.properties[next]);if(schema.patternProperties)Object.keys(schema.patternProperties).forEach((function(pattern){if(new RegExp(pattern).test(next))return _this.getSectionRecursive(path,schema.patternProperties[pattern])}));else{if("object"==typeof schema.additionalProperties)return this.getSectionRecursive(path,schema.additionalProperties);if(next.match("[0-9]+"))if(Array.isArray(schema.items)){var index=parseInt(next,10);if(!isNaN(index)&&schema.items[index])return this.getSectionRecursive(path,schema.items[index])}else if(schema.items)return this.getSectionRecursive(path,schema.items)}return null},ResolvedSchema}(),jsonSchemaService_JSONSchemaService=function(){function JSONSchemaService(requestService,contextService,promiseConstructor){this.contextService=contextService,this.requestService=requestService,this.promiseConstructor=promiseConstructor||Promise,this.callOnDispose=[],this.contributionSchemas={},this.contributionAssociations={},this.schemasById={},this.filePatternAssociations=[],this.filePatternAssociationById={},this.registeredSchemasIds={}}return JSONSchemaService.prototype.getRegisteredSchemaIds=function(filter){return Object.keys(this.registeredSchemasIds).filter((function(id){var scheme=vscode_uri.a.parse(id).scheme;return"schemaservice"!==scheme&&(!filter||filter(scheme))}))},Object.defineProperty(JSONSchemaService.prototype,"promise",{get:function(){return this.promiseConstructor},enumerable:!0,configurable:!0}),JSONSchemaService.prototype.dispose=function(){for(;this.callOnDispose.length>0;)this.callOnDispose.pop()()},JSONSchemaService.prototype.onResourceChange=function(uri){uri=this.normalizeId(uri);var schemaFile=this.schemasById[uri];return!!schemaFile&&(schemaFile.clearSchema(),!0)},JSONSchemaService.prototype.normalizeId=function(id){return vscode_uri.a.parse(id).toString()},JSONSchemaService.prototype.setSchemaContributions=function(schemaContributions){var _this=this;if(schemaContributions.schemas){var schemas=schemaContributions.schemas;for(var id in schemas){var normalizedId=this.normalizeId(id);this.contributionSchemas[normalizedId]=this.addSchemaHandle(normalizedId,schemas[id])}}if(schemaContributions.schemaAssociations){var schemaAssociations=schemaContributions.schemaAssociations;for(var pattern in schemaAssociations){var associations=schemaAssociations[pattern];this.contributionAssociations[pattern]=associations;var fpa=this.getOrAddFilePatternAssociation(pattern);associations.forEach((function(schemaId){var id=_this.normalizeId(schemaId);fpa.addSchema(id)}))}}},JSONSchemaService.prototype.addSchemaHandle=function(id,unresolvedSchemaContent){var schemaHandle=new SchemaHandle(this,id,unresolvedSchemaContent);return this.schemasById[id]=schemaHandle,schemaHandle},JSONSchemaService.prototype.getOrAddSchemaHandle=function(id,unresolvedSchemaContent){return this.schemasById[id]||this.addSchemaHandle(id,unresolvedSchemaContent)},JSONSchemaService.prototype.getOrAddFilePatternAssociation=function(pattern){var fpa=this.filePatternAssociationById[pattern];return fpa||(fpa=new jsonSchemaService_FilePatternAssociation(pattern),this.filePatternAssociationById[pattern]=fpa,this.filePatternAssociations.push(fpa)),fpa},JSONSchemaService.prototype.registerExternalSchema=function(uri,filePatterns,unresolvedSchemaContent){var _this=this;void 0===filePatterns&&(filePatterns=null);var id=this.normalizeId(uri);return this.registeredSchemasIds[id]=!0,filePatterns&&filePatterns.forEach((function(pattern){_this.getOrAddFilePatternAssociation(pattern).addSchema(id)})),unresolvedSchemaContent?this.addSchemaHandle(id,unresolvedSchemaContent):this.getOrAddSchemaHandle(id)},JSONSchemaService.prototype.clearExternalSchemas=function(){var _this=this;for(var id in this.schemasById={},this.filePatternAssociations=[],this.filePatternAssociationById={},this.registeredSchemasIds={},this.contributionSchemas)this.schemasById[id]=this.contributionSchemas[id],this.registeredSchemasIds[id]=!0;for(var pattern in this.contributionAssociations){var fpa=this.getOrAddFilePatternAssociation(pattern);this.contributionAssociations[pattern].forEach((function(schemaId){var id=_this.normalizeId(schemaId);fpa.addSchema(id)}))}},JSONSchemaService.prototype.getResolvedSchema=function(schemaId){var id=this.normalizeId(schemaId),schemaHandle=this.schemasById[id];return schemaHandle?schemaHandle.getResolvedSchema():this.promise.resolve(null)},JSONSchemaService.prototype.loadSchema=function(url){if(!this.requestService){var errorMessage=jsonSchemaService_localize("json.schema.norequestservice","Unable to load schema from '{0}'. No schema request service available",toDisplayString(url));return this.promise.resolve(new UnresolvedSchema({},[errorMessage]))}return this.requestService(url).then((function(content){if(!content){var errorMessage=jsonSchemaService_localize("json.schema.nocontent","Unable to load schema from '{0}': No content.",toDisplayString(url));return new UnresolvedSchema({},[errorMessage])}var schemaContent,jsonErrors=[];schemaContent=main_parse(content,jsonErrors);var errors=jsonErrors.length?[jsonSchemaService_localize("json.schema.invalidFormat","Unable to parse content from '{0}': Parse error at offset {1}.",toDisplayString(url),jsonErrors[0].offset)]:[];return new UnresolvedSchema(schemaContent,errors)}),(function(error){var errorMessage=jsonSchemaService_localize("json.schema.unabletoload","Unable to load schema from '{0}': {1}",toDisplayString(url),error.toString());return new UnresolvedSchema({},[errorMessage])}))},JSONSchemaService.prototype.resolveSchemaContent=function(schemaToResolve,schemaURL){var _this=this,resolveErrors=schemaToResolve.errors.slice(0),schema=schemaToResolve.schema,contextService=this.contextService,merge=function(target,sourceRoot,sourceURI,path){var section=function(schema,path){if(!path)return schema;var current=schema;return"/"===path[0]&&(path=path.substr(1)),path.split("/").some((function(part){return!(current=current[part])})),current}(sourceRoot,path);if(section)for(var key in section)section.hasOwnProperty(key)&&!target.hasOwnProperty(key)&&(target[key]=section[key]);else resolveErrors.push(jsonSchemaService_localize("json.schema.invalidref","$ref '{0}' in '{1}' can not be resolved.",path,sourceURI))},resolveExternalLink=function(node,uri,linkPath,parentSchemaURL){return contextService&&!/^\w+:\/\/.*/.test(uri)&&(uri=contextService.resolveRelativePath(uri,parentSchemaURL)),uri=_this.normalizeId(uri),_this.getOrAddSchemaHandle(uri).getUnresolvedSchema().then((function(unresolvedSchema){if(unresolvedSchema.errors.length){var loc=linkPath?uri+"#"+linkPath:uri;resolveErrors.push(jsonSchemaService_localize("json.schema.problemloadingref","Problems loading reference '{0}': {1}",loc,unresolvedSchema.errors[0]))}return merge(node,unresolvedSchema.schema,uri,linkPath),resolveRefs(node,unresolvedSchema.schema,uri)}))},resolveRefs=function(node,parentSchema,parentSchemaURL){if(!node||"object"!=typeof node)return Promise.resolve(null);for(var toWalk=[node],seen=[],openPromises=[],handleRef=function(next){for(;next.$ref;){var segments=next.$ref.split("#",2);if(delete next.$ref,segments[0].length>0)return void openPromises.push(resolveExternalLink(next,segments[0],segments[1],parentSchemaURL));merge(next,parentSchema,parentSchemaURL,segments[1])}!function(){for(var entries=[],_i=0;_i<arguments.length;_i++)entries[_i]=arguments[_i];for(var _a=0,entries_1=entries;_a<entries_1.length;_a++){var entry=entries_1[_a];"object"==typeof entry&&toWalk.push(entry)}}(next.items,next.additionalProperties,next.not,next.contains,next.propertyNames),function(){for(var maps=[],_i=0;_i<arguments.length;_i++)maps[_i]=arguments[_i];for(var _a=0,maps_1=maps;_a<maps_1.length;_a++){var map=maps_1[_a];if("object"==typeof map)for(var key in map){var entry=map[key];"object"==typeof entry&&toWalk.push(entry)}}}(next.definitions,next.properties,next.patternProperties,next.dependencies),function(){for(var arrays=[],_i=0;_i<arguments.length;_i++)arrays[_i]=arguments[_i];for(var _a=0,arrays_1=arrays;_a<arrays_1.length;_a++){var array=arrays_1[_a];if(Array.isArray(array))for(var _b=0,array_1=array;_b<array_1.length;_b++){var entry=array_1[_b];"object"==typeof entry&&toWalk.push(entry)}}}(next.anyOf,next.allOf,next.oneOf,next.items)};toWalk.length;){var next=toWalk.pop();seen.indexOf(next)>=0||(seen.push(next),handleRef(next))}return _this.promise.all(openPromises)};return resolveRefs(schema,schema,schemaURL).then((function(_){return new jsonSchemaService_ResolvedSchema(schema,resolveErrors)}))},JSONSchemaService.prototype.getSchemaForResource=function(resource,document){if(document&&document.root&&"object"===document.root.type){var schemaProperties=document.root.properties.filter((function(p){return"$schema"===p.keyNode.value&&p.valueNode&&"string"===p.valueNode.type}));if(schemaProperties.length>0){var schemeId=jsonParser_getNodeValue(schemaProperties[0].valueNode);if(schemeId&&function strings_startsWith(haystack,needle){if(haystack.length<needle.length)return!1;for(var i=0;i<needle.length;i++)if(haystack[i]!==needle[i])return!1;return!0}(schemeId,".")&&this.contextService&&(schemeId=this.contextService.resolveRelativePath(schemeId,resource)),schemeId){var id=this.normalizeId(schemeId);return this.getOrAddSchemaHandle(id).getResolvedSchema()}}}for(var seen=Object.create(null),schemas=[],_i=0,_a=this.filePatternAssociations;_i<_a.length;_i++){var entry=_a[_i];if(entry.matchesPattern(resource))for(var _b=0,_c=entry.getSchemas();_b<_c.length;_b++){var schemaId=_c[_b];seen[schemaId]||(schemas.push(schemaId),seen[schemaId]=!0)}}return schemas.length>0?this.createCombinedSchema(resource,schemas).getResolvedSchema():this.promise.resolve(null)},JSONSchemaService.prototype.createCombinedSchema=function(resource,schemaIds){if(1===schemaIds.length)return this.getOrAddSchemaHandle(schemaIds[0]);var combinedSchemaId="schemaservice://combinedSchema/"+encodeURIComponent(resource),combinedSchema={allOf:schemaIds.map((function(schemaId){return{$ref:schemaId}}))};return this.addSchemaHandle(combinedSchemaId,combinedSchema)},JSONSchemaService}();function toDisplayString(url){try{var uri=vscode_uri.a.parse(url);if("file"===uri.scheme)return uri.fsPath}catch(e){}return url}function getLanguageService(params){var promise=params.promiseConstructor||Promise,jsonSchemaService=new jsonSchemaService_JSONSchemaService(params.schemaRequestService,params.workspaceContext,promise);jsonSchemaService.setSchemaContributions(schemaContributions);var jsonCompletion=new jsonCompletion_JSONCompletion(jsonSchemaService,params.contributions,promise),jsonHover=new jsonHover_JSONHover(jsonSchemaService,params.contributions,promise),jsonDocumentSymbols=new jsonDocumentSymbols_JSONDocumentSymbols(jsonSchemaService),jsonValidation=new jsonValidation_JSONValidation(jsonSchemaService,promise);return{configure:function(settings){jsonSchemaService.clearExternalSchemas(),settings.schemas&&settings.schemas.forEach((function(settings){jsonSchemaService.registerExternalSchema(settings.uri,settings.fileMatch,settings.schema)})),jsonValidation.configure(settings)},resetSchema:function(uri){return jsonSchemaService.onResourceChange(uri)},doValidation:jsonValidation.doValidation.bind(jsonValidation),parseJSONDocument:function(document){return jsonParser_parse(document,{collectComments:!0})},newJSONDocument:function(root,diagnostics){return function newJSONDocument(root,diagnostics){return void 0===diagnostics&&(diagnostics=[]),new JSONDocument(root,[],[],diagnostics)}(root,diagnostics)},doResolve:jsonCompletion.doResolve.bind(jsonCompletion),doComplete:jsonCompletion.doComplete.bind(jsonCompletion),findDocumentSymbols:jsonDocumentSymbols.findDocumentSymbols.bind(jsonDocumentSymbols),findColorSymbols:function(d,s){return jsonDocumentSymbols.findDocumentColors(d,s).then((function(s){return s.map((function(s){return s.range}))}))},findDocumentColors:jsonDocumentSymbols.findDocumentColors.bind(jsonDocumentSymbols),getColorPresentations:jsonDocumentSymbols.getColorPresentations.bind(jsonDocumentSymbols),doHover:jsonHover.doHover.bind(jsonHover),format:function(d,r,o){var range=void 0;if(r){var offset=d.offsetAt(r.start);range={offset:offset,length:d.offsetAt(r.end)-offset}}var options={tabSize:o?o.tabSize:4,insertSpaces:!o||o.insertSpaces,eol:"\n"};return function main_format(documentText,range,options){return format_format(documentText,range,options)}(d.getText(),range,options).map((function(e){return TextEdit.replace(main_Range.create(d.positionAt(e.offset),d.positionAt(e.offset+e.length)),e.content)}))}}}var jsonWorker_Promise=monaco.Promise,PromiseAdapter=function(){function PromiseAdapter(executor){this.wrapped=new monaco.Promise(executor)}return PromiseAdapter.prototype.then=function(onfulfilled,onrejected){return this.wrapped.then(onfulfilled,onrejected)},PromiseAdapter.prototype.getWrapped=function(){return this.wrapped},PromiseAdapter.prototype.cancel=function(){this.wrapped.cancel()},PromiseAdapter.resolve=function(v){return monaco.Promise.as(v)},PromiseAdapter.reject=function(v){return monaco.Promise.wrapError(v)},PromiseAdapter.all=function(values){return monaco.Promise.join(values)},PromiseAdapter}(),jsonWorker_JSONWorker=function(){function JSONWorker(ctx,createData){this._ctx=ctx,this._languageSettings=createData.languageSettings,this._languageId=createData.languageId,this._languageService=getLanguageService({promiseConstructor:PromiseAdapter}),this._languageService.configure(this._languageSettings)}return JSONWorker.prototype.doValidation=function(uri){var document=this._getTextDocument(uri);if(document){var jsonDocument=this._languageService.parseJSONDocument(document);return this._languageService.doValidation(document,jsonDocument)}return jsonWorker_Promise.as([])},JSONWorker.prototype.doComplete=function(uri,position){var document=this._getTextDocument(uri),jsonDocument=this._languageService.parseJSONDocument(document);return this._languageService.doComplete(document,position,jsonDocument)},JSONWorker.prototype.doResolve=function(item){return this._languageService.doResolve(item)},JSONWorker.prototype.doHover=function(uri,position){var document=this._getTextDocument(uri),jsonDocument=this._languageService.parseJSONDocument(document);return this._languageService.doHover(document,position,jsonDocument)},JSONWorker.prototype.format=function(uri,range,options){var document=this._getTextDocument(uri),textEdits=this._languageService.format(document,range,options);return jsonWorker_Promise.as(textEdits)},JSONWorker.prototype.resetSchema=function(uri){return jsonWorker_Promise.as(this._languageService.resetSchema(uri))},JSONWorker.prototype.findDocumentSymbols=function(uri){var document=this._getTextDocument(uri),jsonDocument=this._languageService.parseJSONDocument(document),symbols=this._languageService.findDocumentSymbols(document,jsonDocument);return jsonWorker_Promise.as(symbols)},JSONWorker.prototype.findDocumentColors=function(uri){var document=this._getTextDocument(uri),stylesheet=this._languageService.parseJSONDocument(document),colorSymbols=this._languageService.findDocumentColors(document,stylesheet);return jsonWorker_Promise.as(colorSymbols)},JSONWorker.prototype.getColorPresentations=function(uri,color,range){var document=this._getTextDocument(uri),stylesheet=this._languageService.parseJSONDocument(document),colorPresentations=this._languageService.getColorPresentations(document,stylesheet,color,range);return jsonWorker_Promise.as(colorPresentations)},JSONWorker.prototype._getTextDocument=function(uri){for(var _i=0,models_1=this._ctx.getMirrorModels();_i<models_1.length;_i++){var model=models_1[_i];if(model.uri.toString()===uri)return TextDocument.create(uri,this._languageId,model.version,model.getValue())}return null},JSONWorker}();self.onmessage=function(){initialize((function(ctx,createData){return new jsonWorker_JSONWorker(ctx,createData)}))}},"8oxB":function(module,exports){var cachedSetTimeout,cachedClearTimeout,process=module.exports={};function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(fun){if(cachedSetTimeout===setTimeout)return setTimeout(fun,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(fun,0);try{return cachedSetTimeout(fun,0)}catch(e){try{return cachedSetTimeout.call(null,fun,0)}catch(e){return cachedSetTimeout.call(this,fun,0)}}}!function(){try{cachedSetTimeout="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){cachedSetTimeout=defaultSetTimout}try{cachedClearTimeout="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){cachedClearTimeout=defaultClearTimeout}}();var currentQueue,queue=[],draining=!1,queueIndex=-1;function cleanUpNextTick(){draining&&currentQueue&&(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var timeout=runTimeout(cleanUpNextTick);draining=!0;for(var len=queue.length;len;){for(currentQueue=queue,queue=[];++queueIndex<len;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,len=queue.length}currentQueue=null,draining=!1,function runClearTimeout(marker){if(cachedClearTimeout===clearTimeout)return clearTimeout(marker);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(marker);try{return cachedClearTimeout(marker)}catch(e){try{return cachedClearTimeout.call(null,marker)}catch(e){return cachedClearTimeout.call(this,marker)}}}(timeout)}}function Item(fun,array){this.fun=fun,this.array=array}function noop(){}process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)args[i-1]=arguments[i];queue.push(new Item(fun,args)),1!==queue.length||draining||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={},process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.prependListener=noop,process.prependOnceListener=noop,process.listeners=function(name){return[]},process.binding=function(name){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(dir){throw new Error("process.chdir is not supported")},process.umask=function(){return 0}},MNsG:function(module,__webpack_exports__,__webpack_require__){"use strict";(function(process,global){__webpack_require__.d(__webpack_exports__,"c",(function(){return isWindows})),__webpack_require__.d(__webpack_exports__,"b",(function(){return isWeb})),__webpack_require__.d(__webpack_exports__,"a",(function(){return globals}));var Platform,_isWindows=!1,_isMacintosh=!1,_isLinux=!1,_isNative=!1,_isWeb=!1;if("object"==typeof process&&"function"==typeof process.nextTick&&"string"==typeof process.platform){_isWindows="win32"===process.platform,_isMacintosh="darwin"===process.platform,_isLinux="linux"===process.platform;var rawNlsConfig=Object({NODE_ENV:"production",NODE_PATH:"",PUBLIC_URL:"."}).VSCODE_NLS_CONFIG;if(rawNlsConfig)try{var nlsConfig=JSON.parse(rawNlsConfig),resolved=nlsConfig.availableLanguages["*"];nlsConfig.locale,resolved||"en",nlsConfig._translationsConfigFile}catch(e){}_isNative=!0}else if("object"==typeof navigator){var userAgent=navigator.userAgent;_isWindows=userAgent.indexOf("Windows")>=0,_isMacintosh=userAgent.indexOf("Macintosh")>=0,_isLinux=userAgent.indexOf("Linux")>=0,_isWeb=!0,navigator.language}!function(Platform){Platform[Platform.Web=0]="Web",Platform[Platform.Mac=1]="Mac",Platform[Platform.Linux=2]="Linux",Platform[Platform.Windows=3]="Windows"}(Platform||(Platform={}));Platform.Web;_isNative&&(_isMacintosh?Platform.Mac:_isWindows?Platform.Windows:_isLinux&&Platform.Linux);var isWindows=_isWindows,isWeb=_isWeb;var globals="object"==typeof self?self:"object"==typeof global?global:{}}).call(this,__webpack_require__("8oxB"),__webpack_require__("yLpj"))},VMIq:function(module,__webpack_exports__,__webpack_require__){"use strict";(function(global,process){var __winjs_exports;__webpack_require__.d(__webpack_exports__,"a",(function(){return Promise})),__webpack_require__.d(__webpack_exports__,"b",(function(){return TPromise})),function(){var _modules=Object.create(null);_modules["WinJS/Core/_WinJS"]={};var _winjs=function(moduleId,deps,factory){var exports={},exportsPassedIn=!1,depsValues=deps.map((function(dep){return"exports"===dep?(exportsPassedIn=!0,exports):_modules[dep]})),result=factory.apply({},depsValues);_modules[moduleId]=exportsPassedIn?exports:result};_winjs("WinJS/Core/_Global",[],(function(){return"undefined"!=typeof window?window:"undefined"!=typeof self?self:void 0!==global?global:{}})),_winjs("WinJS/Core/_BaseCoreUtils",["WinJS/Core/_Global"],(function baseCoreUtilsInit(_Global){var hasWinRT=!!_Global.Windows;var actualSetImmediate=null;return{hasWinRT:hasWinRT,markSupportedForProcessing:function markSupportedForProcessing(func){return func.supportedForProcessing=!0,func},_setImmediate:function(callback){null===actualSetImmediate&&(actualSetImmediate=_Global.setImmediate?_Global.setImmediate.bind(_Global):void 0!==process&&"function"==typeof process.nextTick?process.nextTick.bind(process):_Global.setTimeout.bind(_Global)),actualSetImmediate(callback)}}})),_winjs("WinJS/Core/_WriteProfilerMark",["WinJS/Core/_Global"],(function profilerInit(_Global){return _Global.msWriteProfilerMark||function(){}})),_winjs("WinJS/Core/_Base",["WinJS/Core/_WinJS","WinJS/Core/_Global","WinJS/Core/_BaseCoreUtils","WinJS/Core/_WriteProfilerMark"],(function baseInit(_WinJS,_Global,_BaseCoreUtils,_WriteProfilerMark){function initializeProperties(target,members,prefix){var properties,i,len,keys=Object.keys(members),isArray=Array.isArray(target);for(i=0,len=keys.length;i<len;i++){var key=keys[i],enumerable=95!==key.charCodeAt(0),member=members[key];!member||"object"!=typeof member||void 0===member.value&&"function"!=typeof member.get&&"function"!=typeof member.set?enumerable?isArray?target.forEach((function(target){target[key]=member})):target[key]=member:(properties=properties||{})[key]={value:member,enumerable:enumerable,configurable:!0,writable:!0}:(void 0===member.enumerable&&(member.enumerable=enumerable),prefix&&member.setName&&"function"==typeof member.setName&&member.setName(prefix+"."+key),(properties=properties||{})[key]=member)}properties&&(isArray?target.forEach((function(target){Object.defineProperties(target,properties)})):Object.defineProperties(target,properties))}return function(){var _rootNamespace=_WinJS;function createNamespace(parentNamespace,name){var currentNamespace=parentNamespace||{};if(name){var namespaceFragments=name.split(".");currentNamespace===_Global&&"WinJS"===namespaceFragments[0]&&(currentNamespace=_WinJS,namespaceFragments.splice(0,1));for(var i=0,len=namespaceFragments.length;i<len;i++){var namespaceName=namespaceFragments[i];currentNamespace[namespaceName]||Object.defineProperty(currentNamespace,namespaceName,{value:{},writable:!1,enumerable:!0,configurable:!0}),currentNamespace=currentNamespace[namespaceName]}}return currentNamespace}function defineWithParent(parentNamespace,name,members){var currentNamespace=createNamespace(parentNamespace,name);return members&&initializeProperties(currentNamespace,members,name||"<ANONYMOUS>"),currentNamespace}_rootNamespace.Namespace||(_rootNamespace.Namespace=Object.create(Object.prototype));var LazyStates_uninitialized=1,LazyStates_working=2,LazyStates_initialized=3;Object.defineProperties(_rootNamespace.Namespace,{defineWithParent:{value:defineWithParent,writable:!0,enumerable:!0,configurable:!0},define:{value:function define(name,members){return defineWithParent(_Global,name,members)},writable:!0,enumerable:!0,configurable:!0},_lazy:{value:function lazy(f){var name,result,state=LazyStates_uninitialized;return{setName:function(value){name=value},get:function(){switch(state){case LazyStates_initialized:return result;case LazyStates_uninitialized:state=LazyStates_working;try{_WriteProfilerMark("WinJS.Namespace._lazy:"+name+",StartTM"),result=f()}finally{_WriteProfilerMark("WinJS.Namespace._lazy:"+name+",StopTM"),state=LazyStates_uninitialized}return f=null,state=LazyStates_initialized,result;case LazyStates_working:throw"Illegal: reentrancy on initialization";default:throw"Illegal"}},set:function(value){switch(state){case LazyStates_working:throw"Illegal: reentrancy on initialization";default:state=LazyStates_initialized,result=value}},enumerable:!0,configurable:!0}},writable:!0,enumerable:!0,configurable:!0},_moduleDefine:{value:function moduleDefine(exports,name,members){var target=[exports],publicNS=null;return name&&(publicNS=createNamespace(_Global,name),target.push(publicNS)),initializeProperties(target,members,name||"<ANONYMOUS>"),publicNS},writable:!0,enumerable:!0,configurable:!0}})}(),function(){function define(constructor,instanceMembers,staticMembers){return constructor=constructor||function(){},_BaseCoreUtils.markSupportedForProcessing(constructor),instanceMembers&&initializeProperties(constructor.prototype,instanceMembers),staticMembers&&initializeProperties(constructor,staticMembers),constructor}_WinJS.Namespace.define("WinJS.Class",{define:define,derive:function derive(baseClass,constructor,instanceMembers,staticMembers){if(baseClass){constructor=constructor||function(){};var basePrototype=baseClass.prototype;return constructor.prototype=Object.create(basePrototype),_BaseCoreUtils.markSupportedForProcessing(constructor),Object.defineProperty(constructor.prototype,"constructor",{value:constructor,writable:!0,configurable:!0,enumerable:!0}),instanceMembers&&initializeProperties(constructor.prototype,instanceMembers),staticMembers&&initializeProperties(constructor,staticMembers),constructor}return define(constructor,instanceMembers,staticMembers)},mix:function mix(constructor){var i,len;for(constructor=constructor||function(){},i=1,len=arguments.length;i<len;i++)initializeProperties(constructor.prototype,arguments[i]);return constructor}})}(),{Namespace:_WinJS.Namespace,Class:_WinJS.Class}})),_winjs("WinJS/Core/_ErrorFromName",["WinJS/Core/_Base"],(function errorsInit(_Base){var ErrorFromName=_Base.Class.derive(Error,(function(name,message){this.name=name,this.message=message||name}),{},{supportedForProcessing:!1});return _Base.Namespace.define("WinJS",{ErrorFromName:ErrorFromName}),ErrorFromName})),_winjs("WinJS/Core/_Events",["exports","WinJS/Core/_Base"],(function eventsInit(exports,_Base){function createEventProperty(name){var eventPropStateName="_on"+name+"state";return{get:function(){var state=this[eventPropStateName];return state&&state.userHandler},set:function(handler){var state=this[eventPropStateName];handler?(state||(state={wrapper:function(evt){return state.userHandler(evt)},userHandler:handler},Object.defineProperty(this,eventPropStateName,{value:state,enumerable:!1,writable:!0,configurable:!0}),this.addEventListener(name,state.wrapper,!1)),state.userHandler=handler):state&&(this.removeEventListener(name,state.wrapper,!1),this[eventPropStateName]=null)},enumerable:!0}}var EventMixinEvent=_Base.Class.define((function EventMixinEvent_ctor(type,detail,target){this.detail=detail,this.target=target,this.timeStamp=Date.now(),this.type=type}),{bubbles:{value:!1,writable:!1},cancelable:{value:!1,writable:!1},currentTarget:{get:function(){return this.target}},defaultPrevented:{get:function(){return this._preventDefaultCalled}},trusted:{value:!1,writable:!1},eventPhase:{value:0,writable:!1},target:null,timeStamp:null,type:null,preventDefault:function(){this._preventDefaultCalled=!0},stopImmediatePropagation:function(){this._stopImmediatePropagationCalled=!0},stopPropagation:function(){}},{supportedForProcessing:!1}),eventMixin={_listeners:null,addEventListener:function(type,listener,useCapture){useCapture=useCapture||!1,this._listeners=this._listeners||{};for(var eventListeners=this._listeners[type]=this._listeners[type]||[],i=0,len=eventListeners.length;i<len;i++){var l=eventListeners[i];if(l.useCapture===useCapture&&l.listener===listener)return}eventListeners.push({listener:listener,useCapture:useCapture})},dispatchEvent:function(type,details){var listeners=this._listeners&&this._listeners[type];if(listeners){for(var eventValue=new EventMixinEvent(type,details,this),i=0,len=(listeners=listeners.slice(0,listeners.length)).length;i<len&&!eventValue._stopImmediatePropagationCalled;i++)listeners[i].listener(eventValue);return eventValue.defaultPrevented||!1}return!1},removeEventListener:function(type,listener,useCapture){useCapture=useCapture||!1;var listeners=this._listeners&&this._listeners[type];if(listeners)for(var i=0,len=listeners.length;i<len;i++){var l=listeners[i];if(l.listener===listener&&l.useCapture===useCapture){listeners.splice(i,1),0===listeners.length&&delete this._listeners[type];break}}}};_Base.Namespace._moduleDefine(exports,"WinJS.Utilities",{_createEventProperty:createEventProperty,createEventProperties:function createEventProperties(){for(var props={},i=0,len=arguments.length;i<len;i++){var name=arguments[i];props["on"+name]=createEventProperty(name)}return props},eventMixin:eventMixin})})),_winjs("WinJS/Core/_Trace",["WinJS/Core/_Global"],(function traceInit(_Global){function nop(v){return v}return{_traceAsyncOperationStarting:_Global.Debug&&_Global.Debug.msTraceAsyncOperationStarting&&_Global.Debug.msTraceAsyncOperationStarting.bind(_Global.Debug)||nop,_traceAsyncOperationCompleted:_Global.Debug&&_Global.Debug.msTraceAsyncOperationCompleted&&_Global.Debug.msTraceAsyncOperationCompleted.bind(_Global.Debug)||nop,_traceAsyncCallbackStarting:_Global.Debug&&_Global.Debug.msTraceAsyncCallbackStarting&&_Global.Debug.msTraceAsyncCallbackStarting.bind(_Global.Debug)||nop,_traceAsyncCallbackCompleted:_Global.Debug&&_Global.Debug.msTraceAsyncCallbackCompleted&&_Global.Debug.msTraceAsyncCallbackCompleted.bind(_Global.Debug)||nop}})),_winjs("WinJS/Promise/_StateMachine",["WinJS/Core/_Global","WinJS/Core/_BaseCoreUtils","WinJS/Core/_Base","WinJS/Core/_ErrorFromName","WinJS/Core/_Events","WinJS/Core/_Trace"],(function promiseStateMachineInit(_Global,_BaseCoreUtils,_Base,_ErrorFromName,_Events,_Trace){_Global.Debug&&(_Global.Debug.setNonUserCodeExceptions=!0);var promiseEventListeners=new(_Base.Class.mix(_Base.Class.define(null,{},{supportedForProcessing:!1}),_Events.eventMixin));promiseEventListeners._listeners={};var tagWithStack=!1,tag={promise:1,thenPromise:2,errorPromise:4,exceptionPromise:8,completePromise:16};tag.all=tag.promise|tag.thenPromise|tag.errorPromise|tag.exceptionPromise|tag.completePromise;var state_created,state_working,state_waiting,state_waiting_canceled,state_canceled,state_canceling,state_success_notify,state_success,state_error_notify,state_error,error_number=1;function _(){}state_created={name:"created",enter:function(promise){promise._setState(state_working)},cancel:_,done:_,then:_,_completed:_,_error:_,_notify:_,_progress:_,_setCompleteValue:_,_setErrorValue:_},state_working={name:"working",enter:_,cancel:function(promise){promise._setState(state_canceled)},done:done,then:then,_completed:completed,_error:error,_notify:_,_progress:progress,_setCompleteValue:setCompleteValue,_setErrorValue:setErrorValue},state_waiting={name:"waiting",enter:function(promise){var waitedUpon=promise._value;if(waitedUpon instanceof ThenPromise&&waitedUpon._state!==state_error&&waitedUpon._state!==state_success)pushListener(waitedUpon,{promise:promise});else{var error=function(value){waitedUpon._errorId?promise._chainedError(value,waitedUpon):(callonerror(promise,value,detailsForHandledError,waitedUpon,error),promise._error(value))};error.handlesOnError=!0,waitedUpon.then(promise._completed.bind(promise),error,promise._progress.bind(promise))}},cancel:function(promise){promise._setState(state_waiting_canceled)},done:done,then:then,_completed:completed,_error:error,_notify:_,_progress:progress,_setCompleteValue:setCompleteValue,_setErrorValue:setErrorValue},state_waiting_canceled={name:"waiting_canceled",enter:function(promise){promise._setState(state_canceling);var waitedUpon=promise._value;waitedUpon.cancel&&waitedUpon.cancel()},cancel:_,done:done,then:then,_completed:completed,_error:error,_notify:_,_progress:progress,_setCompleteValue:setCompleteValue,_setErrorValue:setErrorValue},state_canceled={name:"canceled",enter:function(promise){promise._setState(state_canceling),promise._cancelAction()},cancel:_,done:done,then:then,_completed:completed,_error:error,_notify:_,_progress:progress,_setCompleteValue:setCompleteValue,_setErrorValue:setErrorValue},state_canceling={name:"canceling",enter:function(promise){var error=new Error("Canceled");error.name=error.message,promise._value=error,promise._setState(state_error_notify)},cancel:_,done:_,then:_,_completed:_,_error:_,_notify:_,_progress:_,_setCompleteValue:_,_setErrorValue:_},state_success_notify={name:"complete_notify",enter:function(promise){if(promise.done=CompletePromise.prototype.done,promise.then=CompletePromise.prototype.then,promise._listeners)for(var p,queue=[promise];queue.length;)(p=queue.shift())._state._notify(p,queue);promise._setState(state_success)},cancel:_,done:null,then:null,_completed:_,_error:_,_notify:notifySuccess,_progress:_,_setCompleteValue:_,_setErrorValue:_},state_success={name:"success",enter:function(promise){promise.done=CompletePromise.prototype.done,promise.then=CompletePromise.prototype.then,promise._cleanupAction()},cancel:_,done:null,then:null,_completed:_,_error:_,_notify:notifySuccess,_progress:_,_setCompleteValue:_,_setErrorValue:_},state_error_notify={name:"error_notify",enter:function(promise){if(promise.done=ErrorPromise.prototype.done,promise.then=ErrorPromise.prototype.then,promise._listeners)for(var p,queue=[promise];queue.length;)(p=queue.shift())._state._notify(p,queue);promise._setState(state_error)},cancel:_,done:null,then:null,_completed:_,_error:_,_notify:notifyError,_progress:_,_setCompleteValue:_,_setErrorValue:_},state_error={name:"error",enter:function(promise){promise.done=ErrorPromise.prototype.done,promise.then=ErrorPromise.prototype.then,promise._cleanupAction()},cancel:_,done:null,then:null,_completed:_,_error:_,_notify:notifyError,_progress:_,_setCompleteValue:_,_setErrorValue:_};var PromiseStateMachine=_Base.Class.define(null,{_listeners:null,_nextState:null,_state:null,_value:null,cancel:function(){this._state.cancel(this),this._run()},done:function Promise_done(onComplete,onError,onProgress){this._state.done(this,onComplete,onError,onProgress)},then:function Promise_then(onComplete,onError,onProgress){return this._state.then(this,onComplete,onError,onProgress)},_chainedError:function(value,context){var result=this._state._error(this,value,detailsForChainedError,context);return this._run(),result},_completed:function(value){var result=this._state._completed(this,value);return this._run(),result},_error:function(value){var result=this._state._error(this,value,detailsForError);return this._run(),result},_progress:function(value){this._state._progress(this,value)},_setState:function(state){this._nextState=state},_setCompleteValue:function(value){this._state._setCompleteValue(this,value),this._run()},_setChainedErrorValue:function(value,context){var result=this._state._setErrorValue(this,value,detailsForChainedError,context);return this._run(),result},_setExceptionValue:function(value){var result=this._state._setErrorValue(this,value,detailsForException);return this._run(),result},_run:function(){for(;this._nextState;)this._state=this._nextState,this._nextState=null,this._state.enter(this)}},{supportedForProcessing:!1});function completed(promise,value){var targetState;targetState=value&&"object"==typeof value&&"function"==typeof value.then?state_waiting:state_success_notify,promise._value=value,promise._setState(targetState)}function createErrorDetails(exception,error,promise,id,parent,handler){return{exception:exception,error:error,promise:promise,handler:handler,id:id,parent:parent}}function detailsForHandledError(promise,errorValue,context,handler){var exception=context._isException;return createErrorDetails(exception?errorValue:null,exception?null:errorValue,promise,context._errorId,context,handler)}function detailsForChainedError(promise,errorValue,context){var exception=context._isException,errorId=context._errorId;return setErrorInfo(promise,errorId,exception),createErrorDetails(exception?errorValue:null,exception?null:errorValue,promise,errorId,context)}function detailsForError(promise,errorValue){var errorId=++error_number;return setErrorInfo(promise,errorId),createErrorDetails(null,errorValue,promise,errorId)}function detailsForException(promise,exceptionValue){var errorId=++error_number;return setErrorInfo(promise,errorId,!0),createErrorDetails(exceptionValue,null,promise,errorId)}function done(promise,onComplete,onError,onProgress){pushListener(promise,{c:onComplete,e:onError,p:onProgress,asyncOpID:_Trace._traceAsyncOperationStarting("WinJS.Promise.done")})}function error(promise,value,onerrorDetails,context){promise._value=value,callonerror(promise,value,onerrorDetails,context),promise._setState(state_error_notify)}function notifySuccess(promise,queue){var i,len,value=promise._value,listeners=promise._listeners;if(listeners)for(promise._listeners=null,i=0,len=Array.isArray(listeners)?listeners.length:1;i<len;i++){var listener=1===len?listeners:listeners[i],onComplete=listener.c,target=listener.promise;if(_Trace._traceAsyncOperationCompleted(listener.asyncOpID,_Global.Debug&&_Global.Debug.MS_ASYNC_OP_STATUS_SUCCESS),target){_Trace._traceAsyncCallbackStarting(listener.asyncOpID);try{target._setCompleteValue(onComplete?onComplete(value):value)}catch(ex){target._setExceptionValue(ex)}finally{_Trace._traceAsyncCallbackCompleted()}target._state!==state_waiting&&target._listeners&&queue.push(target)}else CompletePromise.prototype.done.call(promise,onComplete)}}function notifyError(promise,queue){var i,len,value=promise._value,listeners=promise._listeners;if(listeners)for(promise._listeners=null,i=0,len=Array.isArray(listeners)?listeners.length:1;i<len;i++){var listener=1===len?listeners:listeners[i],onError=listener.e,target=listener.promise,errorID=_Global.Debug&&(value&&"Canceled"===value.name?_Global.Debug.MS_ASYNC_OP_STATUS_CANCELED:_Global.Debug.MS_ASYNC_OP_STATUS_ERROR);if(_Trace._traceAsyncOperationCompleted(listener.asyncOpID,errorID),target){var asyncCallbackStarted=!1;try{onError?(_Trace._traceAsyncCallbackStarting(listener.asyncOpID),asyncCallbackStarted=!0,onError.handlesOnError||callonerror(target,value,detailsForHandledError,promise,onError),target._setCompleteValue(onError(value))):target._setChainedErrorValue(value,promise)}catch(ex){target._setExceptionValue(ex)}finally{asyncCallbackStarted&&_Trace._traceAsyncCallbackCompleted()}target._state!==state_waiting&&target._listeners&&queue.push(target)}else ErrorPromise.prototype.done.call(promise,null,onError)}}function callonerror(promise,value,onerrorDetailsGenerator,context,handler){if(promiseEventListeners._listeners.error){if(value instanceof Error&&"Canceled"===value.message)return;promiseEventListeners.dispatchEvent("error",onerrorDetailsGenerator(promise,value,context,handler))}}function progress(promise,value){var i,len,listeners=promise._listeners;if(listeners)for(i=0,len=Array.isArray(listeners)?listeners.length:1;i<len;i++){var listener=1===len?listeners:listeners[i],onProgress=listener.p;if(onProgress)try{onProgress(value)}catch(ex){}listener.c||listener.e||!listener.promise||listener.promise._progress(value)}}function pushListener(promise,listener){var listeners=promise._listeners;listeners?(listeners=Array.isArray(listeners)?listeners:[listeners]).push(listener):listeners=listener,promise._listeners=listeners}function setErrorInfo(promise,errorId,isException){promise._isException=isException||!1,promise._errorId=errorId}function setErrorValue(promise,value,onerrorDetails,context){promise._value=value,callonerror(promise,value,onerrorDetails,context),promise._setState(state_error)}function setCompleteValue(promise,value){var targetState;targetState=value&&"object"==typeof value&&"function"==typeof value.then?state_waiting:state_success,promise._value=value,promise._setState(targetState)}function then(promise,onComplete,onError,onProgress){var result=new ThenPromise(promise);return pushListener(promise,{promise:result,c:onComplete,e:onError,p:onProgress,asyncOpID:_Trace._traceAsyncOperationStarting("WinJS.Promise.then")}),result}var staticCanceledPromise,ThenPromise=_Base.Class.derive(PromiseStateMachine,(function(creator){tagWithStack&&(!0===tagWithStack||tagWithStack&tag.thenPromise)&&(this._stack=Promise._getStack()),this._creator=creator,this._setState(state_created),this._run()}),{_creator:null,_cancelAction:function(){this._creator&&this._creator.cancel()},_cleanupAction:function(){this._creator=null}},{supportedForProcessing:!1}),ErrorPromise=_Base.Class.define((function ErrorPromise_ctor(value){tagWithStack&&(!0===tagWithStack||tagWithStack&tag.errorPromise)&&(this._stack=Promise._getStack()),this._value=value,callonerror(this,value,detailsForError)}),{cancel:function(){},done:function ErrorPromise_done(unused,onError){var value=this._value;if(onError)try{onError.handlesOnError||callonerror(null,value,detailsForHandledError,this,onError);var result=onError(value);return void(result&&"object"==typeof result&&"function"==typeof result.done&&result.done())}catch(ex){value=ex}value instanceof Error&&"Canceled"===value.message||Promise._doneHandler(value)},then:function ErrorPromise_then(unused,onError){if(!onError)return this;var result,value=this._value;try{onError.handlesOnError||callonerror(null,value,detailsForHandledError,this,onError),result=new CompletePromise(onError(value))}catch(ex){result=ex===value?this:new ExceptionPromise(ex)}return result}},{supportedForProcessing:!1}),ExceptionPromise=_Base.Class.derive(ErrorPromise,(function ExceptionPromise_ctor(value){tagWithStack&&(!0===tagWithStack||tagWithStack&tag.exceptionPromise)&&(this._stack=Promise._getStack()),this._value=value,callonerror(this,value,detailsForException)}),{},{supportedForProcessing:!1}),CompletePromise=_Base.Class.define((function CompletePromise_ctor(value){if(tagWithStack&&(!0===tagWithStack||tagWithStack&tag.completePromise)&&(this._stack=Promise._getStack()),value&&"object"==typeof value&&"function"==typeof value.then){var result=new ThenPromise(null);return result._setCompleteValue(value),result}this._value=value}),{cancel:function(){},done:function CompletePromise_done(onComplete){if(onComplete)try{var result=onComplete(this._value);result&&"object"==typeof result&&"function"==typeof result.done&&result.done()}catch(ex){Promise._doneHandler(ex)}},then:function CompletePromise_then(onComplete){try{var newValue=onComplete?onComplete(this._value):this._value;return newValue===this._value?this:new CompletePromise(newValue)}catch(ex){return new ExceptionPromise(ex)}}},{supportedForProcessing:!1});var Promise=_Base.Class.derive(PromiseStateMachine,(function Promise_ctor(init,oncancel){tagWithStack&&(!0===tagWithStack||tagWithStack&tag.promise)&&(this._stack=Promise._getStack()),this._oncancel=oncancel,this._setState(state_created),this._run();try{init(this._completed.bind(this),this._error.bind(this),this._progress.bind(this))}catch(ex){this._setExceptionValue(ex)}}),{_oncancel:null,_cancelAction:function(){try{if(!this._oncancel)throw new Error("Promise did not implement oncancel");this._oncancel()}catch(ex){ex.message,ex.stack;promiseEventListeners.dispatchEvent("error",ex)}},_cleanupAction:function(){this._oncancel=null}},{addEventListener:function Promise_addEventListener(eventType,listener,capture){promiseEventListeners.addEventListener(eventType,listener,capture)},any:function Promise_any(values){return new Promise((function(complete,error){var keys=Object.keys(values);0===keys.length&&complete();var canceled=0;keys.forEach((function(key){Promise.as(values[key]).then((function(){complete({key:key,value:values[key]})}),(function(e){e instanceof Error&&"Canceled"===e.name?++canceled===keys.length&&complete(Promise.cancel):error({key:key,value:values[key]})}))}))}),(function(){Object.keys(values).forEach((function(key){var promise=Promise.as(values[key]);"function"==typeof promise.cancel&&promise.cancel()}))}))},as:function Promise_as(value){return value&&"object"==typeof value&&"function"==typeof value.then?value:new CompletePromise(value)},cancel:{get:function(){return staticCanceledPromise=staticCanceledPromise||new ErrorPromise(new _ErrorFromName("Canceled"))}},dispatchEvent:function Promise_dispatchEvent(eventType,details){return promiseEventListeners.dispatchEvent(eventType,details)},is:function Promise_is(value){return value&&"object"==typeof value&&"function"==typeof value.then},join:function Promise_join(values){return new Promise((function(complete,error,progress){var keys=Object.keys(values),errors=Array.isArray(values)?[]:{},results=Array.isArray(values)?[]:{},undefineds=0,pending=keys.length,argDone=function(key){if(0==--pending){var errorCount=Object.keys(errors).length;if(0===errorCount)complete(results);else{var canceledCount=0;keys.forEach((function(key){var e=errors[key];e instanceof Error&&"Canceled"===e.name&&canceledCount++})),canceledCount===errorCount?complete(Promise.cancel):error(errors)}}else progress({Key:key,Done:!0})};keys.forEach((function(key){var value=values[key];void 0===value?undefineds++:Promise.then(value,(function(value){results[key]=value,argDone(key)}),(function(value){errors[key]=value,argDone(key)}))})),0!==(pending-=undefineds)||complete(results)}),(function(){Object.keys(values).forEach((function(key){var promise=Promise.as(values[key]);"function"==typeof promise.cancel&&promise.cancel()}))}))},removeEventListener:function Promise_removeEventListener(eventType,listener,capture){promiseEventListeners.removeEventListener(eventType,listener,capture)},supportedForProcessing:!1,then:function Promise_then(value,onComplete,onError,onProgress){return Promise.as(value).then(onComplete,onError,onProgress)},thenEach:function Promise_thenEach(values,onComplete,onError,onProgress){var result=Array.isArray(values)?[]:{};return Object.keys(values).forEach((function(key){result[key]=Promise.as(values[key]).then(onComplete,onError,onProgress)})),Promise.join(result)},timeout:function Promise_timeout(time,promise){var to=function timeout(timeoutMS){var id;return new Promise((function(c){timeoutMS?id=_Global.setTimeout(c,timeoutMS):_BaseCoreUtils._setImmediate(c)}),(function(){id&&_Global.clearTimeout(id)}))}(time);return promise?function timeoutWithPromise(timeout,promise){var cancelTimeout=function(){timeout.cancel()};return timeout.then((function(){promise.cancel()})),promise.then(cancelTimeout,cancelTimeout),promise}(to,promise):to},wrap:function Promise_wrap(value){return new CompletePromise(value)},wrapError:function Promise_wrapError(error){return new ErrorPromise(error)},_veryExpensiveTagWithStack:{get:function(){return tagWithStack},set:function(value){tagWithStack=value}},_veryExpensiveTagWithStack_tag:tag,_getStack:function(){if(_Global.Debug&&_Global.Debug.debuggerEnabled)try{throw new Error}catch(e){return e.stack}},_cancelBlocker:function Promise__cancelBlocker(input,oncancel){if(!Promise.is(input))return Promise.wrap(input);var complete,error,output=new Promise((function(c,e){complete=c,error=e}),(function(){complete=null,error=null,oncancel&&oncancel()}));return input.then((function(v){complete&&complete(v)}),(function(e){error&&error(e)})),output}});return Object.defineProperties(Promise,_Events.createEventProperties("error")),Promise._doneHandler=function(value){_BaseCoreUtils._setImmediate((function Promise_done_rethrow(){throw value}))},{PromiseStateMachine:PromiseStateMachine,Promise:Promise,state_created:state_created}})),_winjs("WinJS/Promise",["WinJS/Core/_Base","WinJS/Promise/_StateMachine"],(function promiseInit(_Base,_StateMachine){return _Base.Namespace.define("WinJS",{Promise:_StateMachine.Promise}),_StateMachine.Promise})),(__winjs_exports=_modules["WinJS/Core/_WinJS"]).TPromise=__winjs_exports.Promise,__winjs_exports.PPromise=__winjs_exports.Promise}();var Promise=__winjs_exports.Promise,TPromise=__winjs_exports.TPromise;__winjs_exports.PPromise}).call(this,__webpack_require__("yLpj"),__webpack_require__("8oxB"))},smNY:function(module,exports){function webpackEmptyContext(req){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}webpackEmptyContext.keys=function(){return[]},webpackEmptyContext.resolve=webpackEmptyContext,module.exports=webpackEmptyContext,webpackEmptyContext.id="smNY"},"xiP/":function(module,__webpack_exports__,__webpack_require__){"use strict";(function(process){function _encode(ch){return"%"+ch.charCodeAt(0).toString(16).toUpperCase()}function encodeURIComponent2(str){return encodeURIComponent(str).replace(/[!'()*]/g,_encode)}function encodeNoop(str){return str.replace(/[#?]/,_encode)}var isWindows,URI=function(){function URI(){this._scheme=URI._empty,this._authority=URI._empty,this._path=URI._empty,this._query=URI._empty,this._fragment=URI._empty,this._formatted=null,this._fsPath=null}return URI.isUri=function(thing){return thing instanceof URI||!!thing&&("string"==typeof thing.authority&&"string"==typeof thing.fragment&&"string"==typeof thing.path&&"string"==typeof thing.query&&"string"==typeof thing.scheme)},Object.defineProperty(URI.prototype,"scheme",{get:function(){return this._scheme},enumerable:!0,configurable:!0}),Object.defineProperty(URI.prototype,"authority",{get:function(){return this._authority},enumerable:!0,configurable:!0}),Object.defineProperty(URI.prototype,"path",{get:function(){return this._path},enumerable:!0,configurable:!0}),Object.defineProperty(URI.prototype,"query",{get:function(){return this._query},enumerable:!0,configurable:!0}),Object.defineProperty(URI.prototype,"fragment",{get:function(){return this._fragment},enumerable:!0,configurable:!0}),Object.defineProperty(URI.prototype,"fsPath",{get:function(){var value;this._fsPath||(value=this._authority&&this._path&&"file"===this.scheme?"//"+this._authority+this._path:URI._driveLetterPath.test(this._path)?this._path[1].toLowerCase()+this._path.substr(2):this._path,isWindows&&(value=value.replace(/\//g,"\\")),this._fsPath=value);return this._fsPath},enumerable:!0,configurable:!0}),URI.prototype.with=function(change){if(!change)return this;var scheme=change.scheme,authority=change.authority,path=change.path,query=change.query,fragment=change.fragment;if(void 0===scheme?scheme=this.scheme:null===scheme&&(scheme=""),void 0===authority?authority=this.authority:null===authority&&(authority=""),void 0===path?path=this.path:null===path&&(path=""),void 0===query?query=this.query:null===query&&(query=""),void 0===fragment?fragment=this.fragment:null===fragment&&(fragment=""),scheme===this.scheme&&authority===this.authority&&path===this.path&&query===this.query&&fragment===this.fragment)return this;var ret=new URI;return ret._scheme=scheme,ret._authority=authority,ret._path=path,ret._query=query,ret._fragment=fragment,URI._validate(ret),ret},URI.parse=function(value){var ret=new URI,data=URI._parseComponents(value);return ret._scheme=data.scheme,ret._authority=decodeURIComponent(data.authority),ret._path=decodeURIComponent(data.path),ret._query=decodeURIComponent(data.query),ret._fragment=decodeURIComponent(data.fragment),URI._validate(ret),ret},URI.file=function(path){var ret=new URI;if(ret._scheme="file",isWindows&&(path=path.replace(/\\/g,URI._slash)),path[0]===URI._slash&&path[0]===path[1]){var idx=path.indexOf(URI._slash,2);-1===idx?ret._authority=path.substring(2):(ret._authority=path.substring(2,idx),ret._path=path.substring(idx))}else ret._path=path;return ret._path[0]!==URI._slash&&(ret._path=URI._slash+ret._path),URI._validate(ret),ret},URI._parseComponents=function(value){var ret={scheme:URI._empty,authority:URI._empty,path:URI._empty,query:URI._empty,fragment:URI._empty},match=URI._regexp.exec(value);return match&&(ret.scheme=match[2]||ret.scheme,ret.authority=match[4]||ret.authority,ret.path=match[5]||ret.path,ret.query=match[7]||ret.query,ret.fragment=match[9]||ret.fragment),ret},URI.from=function(components){return(new URI).with(components)},URI._validate=function(ret){if(ret.scheme&&!URI._schemePattern.test(ret.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(ret.path)if(ret.authority){if(!URI._singleSlashStart.test(ret.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(URI._doubleSlashStart.test(ret.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')},URI.prototype.toString=function(skipEncoding){return void 0===skipEncoding&&(skipEncoding=!1),skipEncoding?URI._asFormatted(this,!0):(this._formatted||(this._formatted=URI._asFormatted(this,!1)),this._formatted)},URI._asFormatted=function(uri,skipEncoding){var encoder=skipEncoding?encodeNoop:encodeURIComponent2,parts=[],scheme=uri.scheme,authority=uri.authority,path=uri.path,query=uri.query,fragment=uri.fragment;(scheme&&parts.push(scheme,":"),(authority||"file"===scheme)&&parts.push("//"),authority)&&(-1===(idx=(authority=authority.toLowerCase()).indexOf(":"))?parts.push(encoder(authority)):parts.push(encoder(authority.substr(0,idx)),authority.substr(idx)));if(path){var m=URI._upperCaseDrive.exec(path);m&&(path=m[1]?"/"+m[2].toLowerCase()+path.substr(3):m[2].toLowerCase()+path.substr(2));for(var lastIdx=0;;){var idx;if(-1===(idx=path.indexOf(URI._slash,lastIdx))){parts.push(encoder(path.substring(lastIdx)));break}parts.push(encoder(path.substring(lastIdx,idx)),URI._slash),lastIdx=idx+1}}return query&&parts.push("?",encoder(query)),fragment&&parts.push("#",encoder(fragment)),parts.join(URI._empty)},URI.prototype.toJSON=function(){var res={fsPath:this.fsPath,external:this.toString(),$mid:1};return this.path&&(res.path=this.path),this.scheme&&(res.scheme=this.scheme),this.authority&&(res.authority=this.authority),this.query&&(res.query=this.query),this.fragment&&(res.fragment=this.fragment),res},URI.revive=function(data){var result=new URI;return result._scheme=data.scheme||URI._empty,result._authority=data.authority||URI._empty,result._path=data.path||URI._empty,result._query=data.query||URI._empty,result._fragment=data.fragment||URI._empty,result._fsPath=data.fsPath,result._formatted=data.external,URI._validate(result),result},URI}();if(__webpack_exports__.a=URI,URI._empty="",URI._slash="/",URI._regexp=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,URI._driveLetterPath=/^\/[a-zA-z]:/,URI._upperCaseDrive=/^(\/)?([A-Z]:)/,URI._schemePattern=/^\w[\w\d+.-]*$/,URI._singleSlashStart=/^\//,URI._doubleSlashStart=/^\/\//,"object"==typeof process)isWindows="win32"===process.platform;else if("object"==typeof navigator){var userAgent=navigator.userAgent;isWindows=userAgent.indexOf("Windows")>=0}}).call(this,__webpack_require__("8oxB"))},yLpj:function(module,exports){var g;g=function(){return this}();try{g=g||new Function("return this")()}catch(e){"object"==typeof window&&(g=window)}module.exports=g}});
//# sourceMappingURL=json.worker.js.map